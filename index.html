<!DOCTYPE html>
<html lang="zh-CN" data-theme="passion">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>è—å®ç®± V10</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="./icon.png">

    <style>
        /* =========================================
           CSS æ ·å¼ç³»ç»Ÿ (ç§»åŠ¨ç«¯ä¼˜åŒ–ç‰ˆ)
        ========================================= */
        :root {
            --bg-body: #121212; --bg-panel: #1e1e1e; --text-main: #fffff0; --text-sub: #aaa;
            --border: #800020; --accent: #c5a059; --btn-bg: #800020; --btn-text: #fff;
            --highlight-bg: #2a1a1a; --shadow: rgba(0, 0, 0, 0.5);
            --scroll-btn-bg: rgba(30, 30, 30, 0.9); --progress-bg: #333; --progress-fill: #2e7d32;
            --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.4);
            --select-overlay: rgba(197, 160, 89, 0.2); --select-border: #c5a059;
        }
        
        /* ä¸»é¢˜å®šä¹‰ */
        [data-theme="passion"] { --bg-body: #121212; --bg-panel: #1e1e1e; --text-main: #fffff0; --text-sub: #aaa; --border: #800020; --accent: #c5a059; --btn-bg: #800020; --btn-text: #fff; --highlight-bg: #2a1a1a; --shadow: rgba(0, 0, 0, 0.5); --progress-fill: #c5a059; }
        [data-theme="ladies"] { --bg-body: #f9f7f2; --bg-panel: #ffffff; --text-main: #4a4a4a; --text-sub: #999; --border: #dba4a4; --accent: #d4af37; --btn-bg: #dba4a4; --btn-text: #fff; --highlight-bg: #fff0f5; --shadow: rgba(219, 164, 164, 0.15); --progress-bg: #eee; --progress-fill: #dba4a4; --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.25); }
        [data-theme="men"] { --bg-body: #0b1a2f; --bg-panel: #172a45; --text-main: #e6f1ff; --text-sub: #8892b0; --border: #4b5563; --accent: #a8b2d1; --btn-bg: #334155; --btn-text: #fff; --highlight-bg: #1c3557; --shadow: rgba(0, 0, 0, 0.3); --progress-bg: #0f1f3a; --progress-fill: #4a90e2; }
        [data-theme="gacha"] { --bg-body: #1a0b2e; --bg-panel: #26143c; --text-main: #ffffff; --text-sub: #ccc; --border: #ffd700; --accent: #50c878; --btn-bg: #4b0082; --btn-text: #fff; --highlight-bg: #351c52; --shadow: rgba(255, 215, 0, 0.15); --progress-bg: #111; --progress-fill: #50c878; }
        [data-theme="daily"] { --bg-body: #f0f2f5; --bg-panel: #ffffff; --text-main: #333333; --text-sub: #666; --border: #e0e0e0; --accent: #4a90e2; --btn-bg: #4a90e2; --btn-text: #fff; --highlight-bg: #eef6ff; --shadow: rgba(0, 0, 0, 0.05); --progress-bg: #eee; --progress-fill: #4a90e2; }
        [data-theme="night"] { --bg-body: #000000; --bg-panel: #111111; --text-main: #e0e0e0; --text-sub: #888; --border: #ff007f; --accent: #9d00ff; --btn-bg: #ff007f; --btn-text: #fff; --highlight-bg: #220011; --shadow: rgba(255, 0, 127, 0.2); --progress-bg: #222; --progress-fill: #ff007f; }
        [data-theme="wood"] { --bg-body: #e8dcc5; --bg-panel: #fdfbf7; --text-main: #5d4037; --text-sub: #8d6e63; --border: #a1887f; --accent: #d4a017; --btn-bg: #6d4c41; --btn-text: #fff; --highlight-bg: #fff8e1; --shadow: rgba(93, 64, 55, 0.1); --progress-bg: #d7ccc8; --progress-fill: #8d6e63; --badge-bg: rgba(0, 0, 0, 0.3); }
        [data-theme="jirai"] { --bg-body: #fff0f5; --bg-panel: #ffffff; --text-main: #000000; --text-sub: #666666; --border: #000000; --accent: #ff007f; --btn-bg: #000000; --btn-text: #ff007f; --highlight-bg: #fff5fa; --shadow: rgba(255, 0, 127, 0.2); --progress-bg: #e0e0e0; --progress-fill: #ff007f; --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.8); }

        /* åŸºç¡€å¸ƒå±€ */
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; padding: 10px; background-color: var(--bg-body); color: var(--text-main); background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px); background-size: 20px 20px; transition: background 0.3s ease, color 0.3s ease; -webkit-text-size-adjust: 100%; padding-bottom: env(safe-area-inset-bottom); }
        .main-wrapper { display: block; padding-bottom: 80px;}
        
        @media (min-width: 768px) {
            body { padding: 20px 30px; }
            .main-wrapper { display: flex; align-items: flex-start; gap: 30px; width: 96%; max-width: 1920px; margin: 0 auto; padding-bottom: 0; }
            .layout-sidebar { width: 25vw; min-width: 320px; max-width: 450px; flex-shrink: 0; position: sticky; top: 20px; max-height: calc(100dvh - 40px); overflow-y: auto; -webkit-overflow-scrolling: touch; padding-bottom: 20px; display: flex; flex-direction: column; scrollbar-width: none; }
            .layout-sidebar::-webkit-scrollbar { display: none; }
            .layout-content { flex: 1; min-width: 0; }
        }
        .wood-panel { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px var(--shadow); transition: all 0.3s ease; }
        
        /* ç»Ÿè®¡æ æ ·å¼ */
        .storage-bar-area { margin-bottom: 10px; padding: 0 5px; }
        .storage-text { display: flex; justify-content: space-between; font-size: 11px; color: var(--text-sub); margin-bottom: 4px; }
        .storage-track { width: 100%; height: 6px; background: var(--progress-bg); border-radius: 3px; overflow: hidden; }
        .storage-fill { height: 100%; width: 0%; background: var(--progress-fill); transition: width 0.5s ease; }
        .storage-fill.danger { background: #d32f2f !important; }
        .time-dashboard { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin-bottom: 15px; text-align: center; box-shadow: 0 2px 5px var(--shadow); }
        .time-label { font-size: 12px; color: var(--text-sub); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px;}
        .time-value { font-size: 20px; font-weight: bold; color: var(--accent); font-family: monospace; letter-spacing: 0.5px; }
        .file-tag { font-size: 12px; background: var(--accent); color: var(--bg-panel); padding: 2px 8px; border-radius: 4px; margin-right: 8px; vertical-align: middle; font-weight: bold; display: none; box-shadow: 0 2px 4px var(--shadow); max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-wrapper { position: relative; display: flex; align-items: center; }
        .stats-container { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; scroll-behavior: smooth; width: 100%; }
        .stats-container::-webkit-scrollbar { display: none; }
        .stat-card { min-width: 110px; background: var(--bg-panel); padding: 12px; border-radius: 10px; border: 2px solid transparent; display: flex; flex-direction: column; flex-shrink: 0; cursor: pointer; transition: all 0.2s; position: relative; color: var(--text-main); box-shadow: 0 2px 4px var(--shadow); }
        .stat-card.active { border-color: var(--accent); background-color: var(--highlight-bg); }
        .stat-card.total { background: var(--btn-bg); color: var(--btn-text); border-color: var(--btn-bg); }
        .stat-title { font-size: 12px; opacity: 0.8; margin-bottom: 5px; font-weight: bold;}
        .stat-val { font-size: 18px; font-weight: bold; }

        /* è¾“å…¥æ§ä»¶ */
        .input-group { margin-bottom: 15px; }
        input[type="text"], input[type="number"], select, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-panel); outline: none; box-sizing: border-box; color: var(--text-main); font-size: 16px; /* é˜²æ­¢iOSæ”¾å¤§ */ }
        input:focus, textarea:focus { border-color: var(--accent); }
        textarea.remark-input { height: 60px; resize: none; font-size: 14px; margin-top: 5px; }
        .color-picker-area { display: flex; align-items: center; gap: 10px; margin-bottom: 10px;}
        input[type="color"] { width: 45px; height: 45px; border: none; background: none; cursor: pointer; padding: 0; }
        .recent-colors { display: flex; gap: 8px; flex-wrap: wrap; }
        .color-chip { width: 28px; height: 28px; border-radius: 50%; border: 2px solid rgba(128,128,128,0.2); cursor: pointer; transition: transform 0.2s; box-shadow: 0 1px 3px var(--shadow); }
        .file-upload-box { position: relative; width: 100%; height: 90px; border: 2px dashed var(--border); border-radius: 8px; background: rgba(128,128,128,0.05); display: flex; align-items: center; justify-content: center; flex-direction: column; color: var(--text-sub); cursor: pointer; overflow: hidden; }
        .file-upload-box input[type="file"] { position: absolute; width: 100%; height: 100%; opacity: 0; cursor: pointer; top:0; left:0; }
        #fileNameDisplay { font-size: 12px; color: var(--accent); margin-top: 5px; font-weight: bold; display: none;}
        .btn-main { width: 100%; padding: 14px; border: none; border-radius: 8px; background: var(--btn-bg); color: var(--btn-text); font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 4px 0 rgba(0,0,0,0.2); transition: transform 0.1s; }
        .btn-main:active { transform: translateY(3px); box-shadow: none; }
        
        .theme-switcher-area { margin-top: 10px; padding-top: 15px; border-top: 1px solid var(--border); }
        .theme-btn-group { display: flex; gap: 12px; flex-wrap: wrap; justify-content: flex-start; }
        .theme-btn { width: 36px; height: 36px; border-radius: 8px; cursor: pointer; background: var(--bg-panel); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 20px; transition: transform 0.2s; user-select: none; }
        .theme-btn.active { background: var(--btn-bg); border-color: var(--btn-bg); transform: scale(1.1); }
        .btn-waifu-toggle { margin-top: 10px; width: 100%; padding: 10px; background: var(--bg-panel); border: 1px solid var(--border); color: var(--text-sub); border-radius: 8px; cursor: pointer; font-size: 13px; }

        /* é¡¶éƒ¨ç­›é€‰åŒº */
        .filter-sticky { position: sticky; top: 0; z-index: 10; background: var(--bg-body); padding-top: 5px; margin-bottom: 20px; transition: background 0.3s;}
        .search-input { width: 100%; padding: 12px 15px; border: 1px solid var(--border); border-radius: 25px; font-size: 15px; box-shadow: 0 2px 5px var(--shadow); background: var(--bg-panel); color: var(--text-main);}
        .filter-controls { display: flex; gap: 10px; margin-top: 10px; align-items: center; }
        .sort-select { flex: 1; padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-panel); color: var(--text-main); font-size: 13px; outline: none; }
        .view-toggle-btn { width: 36px; height: 36px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-panel); color: var(--accent); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; }
        .filter-color-bar { display: flex; gap: 10px; overflow-x: auto; margin-top: 10px; padding-bottom: 5px; scrollbar-width: none;}
        .filter-dot { width: 32px; height: 32px; border-radius: 50%; border: 3px solid var(--bg-panel); box-shadow: 0 2px 4px var(--shadow); flex-shrink: 0; cursor: pointer; position: relative; }
        .filter-dot.active { border-color: var(--text-main); transform: scale(1.1); }

        /* --- ç€‘å¸ƒæµå¸ƒå±€ (iOS CSS æ ¸å¿ƒä¿®å¤) --- */
        .masonry-grid { 
            column-count: 2; 
            column-gap: 15px; 
            width: 100%; 
        }
        
        /* æ¨ªå±å’ŒiPadé€‚é… */
        @media (min-width: 500px) { .masonry-grid { column-count: 3; } }
        @media (min-width: 900px) { .masonry-grid { column-count: 3; column-gap: 20px;} }
        @media (min-width: 1200px) { .masonry-grid { column-count: 4; } }
        @media (min-width: 1600px) { .masonry-grid { column-count: 5; } }

        /* åˆ—è¡¨æ¨¡å¼ */
        .masonry-grid.view-list { column-count: 1 !important; display: flex; flex-direction: column; gap: 10px; }

        /* å¡ç‰‡æ ·å¼ */
        .polaroid-card { 
            background: var(--bg-panel); 
            border-radius: 8px; 
            margin-bottom: 15px; 
            break-inside: avoid; 
            break-inside: avoid-column; /* iOS å…¼å®¹æ€§ä¿®å¤ */
            -webkit-column-break-inside: avoid; 
            box-shadow: 0 4px 8px var(--shadow); 
            overflow: hidden; 
            border: 1px solid var(--border); 
            color: var(--text-main); 
            position: relative;
            transform: translateZ(0); /* å¼ºåˆ¶GPUæ¸²æŸ“ */
            display: inline-block; 
            width: 100%; 
        }
        
        .polaroid-card.is-selected { border: 2px solid var(--select-border); }
        .polaroid-card.is-selected .card-img-area::after { content: 'âœ“'; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--select-overlay); display: flex; align-items: center; justify-content: center; font-size: 40px; color: var(--select-border); font-weight: bold; backdrop-filter: blur(2px); }

        .card-img-area { width: 100%; position: relative; background: rgba(128,128,128,0.05); min-height: 100px; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: pointer;}
        .card-img { width: 100%; display: block; height: auto; object-fit: cover;}
        .no-img-label { font-size: 13px; color: var(--text-sub); }
        .total-badge { position: absolute; top: 10px; left: 12px; z-index: 3; font-family: "Impact", sans-serif; font-size: 20px; color: var(--badge-text); background: var(--badge-bg); backdrop-filter: blur(4px); padding: 2px 8px; border-radius: 6px; pointer-events: none; }

        /* æ“ä½œæŒ‰é’® (è§¦å±ä¼˜åŒ–: é»˜è®¤æ˜¾ç¤ºåŠé€æ˜) */
        .btn-del, .btn-copy, .btn-edit {
            position: absolute; width: 32px; height: 32px; background: rgba(0,0,0,0.7); color: white; border-radius: 50%; border: 1px solid rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 5; font-size: 16px; transition: opacity 0.2s;
            opacity: 0.7; 
        }
        .btn-copy { top: 8px; right: 8px; }
        .btn-del { top: 8px; right: 48px; background: rgba(211, 47, 47, 0.8); }
        .btn-edit { top: 8px; right: 88px; background: rgba(25, 118, 210, 0.8); }

        @media (hover: hover) {
            .btn-del, .btn-copy, .btn-edit { opacity: 0; }
            .polaroid-card:hover .btn-del, .polaroid-card:hover .btn-edit, .polaroid-card:hover .btn-copy { opacity: 1; }
        }

        /* åˆ—è¡¨æ¨¡å¼æ ·å¼ */
        .masonry-grid.view-list .polaroid-card { display: flex; flex-direction: row; align-items: center; margin-bottom: 0; padding: 5px; height: 80px; }
        .masonry-grid.view-list .card-img-area { width: 70px; height: 70px; min-height: 70px; border-radius: 4px; margin-right: 10px; flex-shrink: 0; }
        .masonry-grid.view-list .card-img { height: 100%; width: 100%; object-fit: cover; }
        .masonry-grid.view-list .card-info { padding: 0; flex: 1; display: flex; align-items: center; justify-content: space-between; }
        .masonry-grid.view-list .card-header { margin-bottom: 0; flex-direction: column; justify-content: center; align-items: flex-start; }
        .masonry-grid.view-list .card-meta { margin-bottom: 0; font-size: 12px; }
        .masonry-grid.view-list .stock-row { display: inline-flex; padding: 2px 5px; margin-top: 0; margin-left: 10px; }
        .masonry-grid.view-list .btn-del, .masonry-grid.view-list .btn-edit, .masonry-grid.view-list .btn-copy { position: static; margin-left: 5px; width: 28px; height: 28px; font-size: 12px; background: var(--bg-panel); color: var(--text-sub); border: 1px solid var(--border); opacity: 1; border-radius: 6px; }

        .card-info { padding: 12px; }
        .card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px; }
        .card-title { font-weight: bold; font-size: 15px; line-height: 1.3; }
        .color-badge { width: 14px; height: 14px; border-radius: 50%; border: 1px solid var(--border); flex-shrink: 0; margin-top: 3px; }
        .card-meta { display: flex; justify-content: space-between; font-size: 12px; color: var(--text-sub); margin-bottom: 8px; }
        .price-tag { color: var(--accent); font-weight: bold; }
        .stock-row { display: flex; align-items: center; justify-content: space-between; background: rgba(128,128,128,0.05); padding: 6px 8px; border-radius: 8px; margin-top: 5px; }
        .stock-label { font-size: 12px; color: var(--text-sub); font-weight: bold; display: flex; align-items: center; gap: 4px;}
        .big-num { font-size: 20px; font-weight: 800; min-width: 30px; text-align: center; font-family: "Impact", sans-serif; line-height: 1; }
        .num-new { color: var(--accent); } 
        .num-used { color: #fff; opacity: 0.7; }
        .btn-mini { width: 28px; height: 28px; border-radius: 6px; background: var(--bg-panel); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 16px; color: var(--text-main); user-select: none; font-weight: bold; }
        
        .batch-actions { display: flex; gap: 10px; margin-bottom: 15px; padding: 10px; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; align-items: center; justify-content: space-between; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .btn-batch-toggle { width: 100%; padding: 10px; margin-bottom: 10px; background: transparent; border: 1px dashed var(--accent); color: var(--accent); border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; }
        .btn-batch-toggle.active { background: var(--accent); color: var(--bg-panel); border-style: solid; }
        .btn-danger { background: #d32f2f; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 13px;}
        .btn-normal { background: transparent; border: 1px solid var(--text-sub); color: var(--text-main); padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 13px;}
        
        /* å¼¹çª—ç³»ç»Ÿ */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; justify-content: center; align-items: center; flex-direction: column; padding: 20px; box-sizing: border-box;}
        #modalImg { max-width: 100%; max-height: 60vh; border: 2px solid rgba(255,255,255,0.2); border-radius: 4px; object-fit: contain;}
        #modalRemark { margin-top: 20px; color: #fff; font-size: 18px; font-weight: bold; text-align: center; max-width: 600px; line-height: 1.6; overflow-y: auto; max-height: 20vh;}
        .modal-close-tip { color: rgba(255,255,255,0.5); font-size: 12px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.3); padding: 5px 15px; border-radius: 20px; cursor: pointer;}
        .edit-modal-content, .stock-modal-content { background: var(--bg-panel); width: 90%; max-width: 400px; padding: 20px; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-height: 90vh; overflow-y: auto; color: var(--text-main); }
        .edit-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px;}
        .edit-title { font-size: 18px; font-weight: bold; color: var(--accent); }
        .btn-close-edit { background: none; border: none; font-size: 24px; color: var(--text-sub); cursor: pointer; }
        
        /* çœ‹æ¿å¨˜ä¸æç¤º */
        #live2dcanvas { border: none !important; pointer-events: auto; cursor: grab; transition: none !important; touch-action: none; /* å…³é”®ï¼šç¦æ­¢è§¦æ§é»˜è®¤è¡Œä¸º */ }
        #live2dcanvas:active { cursor: grabbing; }
        .waifu-tips { position: fixed; opacity: 0; transition: opacity 0.3s; background: rgba(255, 255, 255, 0.95); color: #333; border: 2px solid var(--accent); border-radius: 12px; padding: 12px 15px; font-size: 14px; line-height: 1.5; box-shadow: 0 5px 15px rgba(0,0,0,0.2); pointer-events: none; z-index: 9999; width: 180px; text-align: center; top: 0; left: 0; }
        .waifu-tips::after { content: ''; position: absolute; bottom: -8px; left: 20px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid var(--accent); }
        .waifu-tips.active { opacity: 1; }
        
        .size-tags-container { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
        .size-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: rgba(128,128,128,0.1); border: 1px solid var(--border); color: var(--text-sub); }
        .edit-size-row { display: flex; justify-content: space-between; align-items: center; background: var(--bg-body); padding: 5px 10px; margin-bottom: 5px; border-radius: 4px; border: 1px solid var(--border); }
        .edit-size-row input { width: 50px; padding: 4px; font-size: 14px; text-align: center; margin: 0 10px; background: var(--bg-panel); color: var(--text-main); border: 1px solid var(--border); border-radius: 4px; }
        .btn-x { background: none; border: none; color: #d32f2f; cursor: pointer; font-weight: bold; padding: 5px; }

        /* iOS PWA é¡¶éƒ¨å®‰å…¨åŒºé€‚é… */
        @supports (padding-top: env(safe-area-inset-top)) {
           .main-wrapper { padding-top: env(safe-area-inset-top); }
           .filter-sticky { top: env(safe-area-inset-top); }
        }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <div class="layout-sidebar" id="sidebar">
            <h2 style="margin: 0 0 10px 0; font-size: 22px; display: flex; align-items: center; flex-wrap: wrap;">
                <span id="currentFileTag" class="file-tag"></span>
                <span style="display:flex; align-items:center; gap:10px;">ğŸ“œ <span>æˆ‘çš„è—å®ç®±</span></span>
            </h2>
            <div class="storage-bar-area">
                <div class="storage-text"><span>ğŸ“¦ ç©ºé—´: <span id="storageSize">0</span> / 5MB</span><span id="storagePercent">0%</span></div>
                <div class="storage-track"><div class="storage-fill" id="storageFill" style="width: 0%"></div></div>
            </div>
            <div class="time-dashboard">
                <div class="time-label">ğŸ“… æœ€è¿‘æ›´æ–°æ—¶é—´</div>
                <div class="time-value" id="lastUpdateTime">--/-- --:--</div>
            </div>
            <button class="btn-batch-toggle" id="btnBatchMode" onclick="toggleBatchMode()">âœ¨ æ‰¹é‡ç®¡ç†</button>
            <div id="batchPanel" class="batch-actions" style="display: none;">
                <button class="btn-normal" onclick="selectAll()">å…¨é€‰</button>
                <span style="font-size:12px; font-weight:bold;">å·²é€‰: <span id="selectCount">0</span></span>
                <button class="btn-danger" onclick="deleteSelected()">ğŸ—‘ï¸ åˆ é™¤</button>
            </div>
            <div class="stats-wrapper" id="statsWrapper">
                <div class="stats-container wood-panel" id="statsBoard" style="padding:15px; margin-bottom:20px;"></div>
            </div>
            
            <div class="wood-panel">
                <h3 style="margin:0 0 15px 0; font-size: 16px; color: var(--accent);">
                    ğŸ“¥ å­˜å…¥å®ç‰©
                    <span style="float:right; cursor:pointer;" onclick="openHelpModal()">?</span>
                </h3>
                
                <div class="input-group">
                    <select id="newCat">
                        <option value="æœè£…">ğŸ‘” æœè£…</option>
                        <option value="é‹é´">ğŸ‘  é‹é´</option>
                        <option value="åŒ–å¦†å“">ğŸ’„ åŒ–å¦†å“</option>
                        <option value="è¢œå­">ğŸ§¦ è¢œå­</option>
                        <option value="é…é¥°">ğŸ§¢ é…é¥°</option>
                        <option value="æ‰‹åŠ">ğŸ§œâ€â™€ï¸ æ‰‹åŠ</option>
                        <option value="æ•°ç ">ğŸ“· æ•°ç </option>
                        <option value="å…¶ä»–">ğŸ“¦ å…¶ä»–</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <div class="color-picker-area">
                        <input type="color" id="newColor" value="#5d4037">
                        <span style="font-size:13px; color:var(--text-sub);">é¢œè‰²:</span>
                    </div>
                    <div class="recent-colors" id="recentColorsBar"></div>
                </div>
                
                <div class="input-group">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="newPrice" placeholder="å•ä»· (å…ƒ)" style="flex:1;">
                    </div>
                </div>

                <div class="input-group" style="display: flex; gap: 10px; align-items: center;">
                    <div style="flex:1;">
                        <input type="text" id="newSize" placeholder="å°ºç  (å¦‚: 42, L)" style="width:100%;">
                    </div>
                    <div style="flex:1;">
                        <input type="number" id="newQty" value="1" min="1" placeholder="æ•°é‡" style="width:100%;">
                    </div>
                </div>

                <div class="input-group"><input type="text" id="newName" placeholder="ç‰©å“åç§°"></div>
                <div class="input-group"><textarea id="newRemark" class="remark-input" placeholder="ğŸ“ å¡«å†™å¤‡æ³¨..."></textarea></div>
                <div class="input-group">
                    <label class="file-upload-box">
                        <input type="file" id="newImg" accept="image/*" onchange="previewFile('newImg', 'fileNameDisplay')">
                        <div class="upload-text">ğŸ“¸ ä¸Šä¼ ç…§ç‰‡</div>
                        <div id="fileNameDisplay"></div>
                    </label>
                </div>
                <button class="btn-main" onclick="addItem()">ä¿å­˜å…¥åº“</button>
            </div>

            <div class="data-tools">
                <div style="font-size:13px; margin-bottom:8px; font-weight:bold;">ğŸ’¾ æ•°æ®å¤‡ä»½</div>
                <input type="file" id="importFile" accept=".json" style="width:100%; margin-bottom:10px; font-size:12px; color:var(--text-sub);">
                <div class="btn-group" style="display:flex; gap:10px;">
                    <button class="btn-main" style="background:#333; font-size:14px;" onclick="exportDataFile()">ğŸ“¤ ä¸‹è½½å¤‡ä»½</button>
                    <button class="btn-main" style="background:#333; font-size:14px;" onclick="importDataFile()">ğŸ“¥ è¯»å–å¤‡ä»½</button>
                </div>
            </div>
            
            <div class="theme-switcher-area">
                <div class="theme-btn-group" id="themeGroup"></div>
                <button class="btn-waifu-toggle" onclick="toggleWaifu()">ğŸ‘ï¸ å¬å”¤çœ‹æ¿å¨˜</button>
            </div>
            <div style="height: 50px;"></div>
        </div>

        <div class="layout-content">
            <div class="filter-sticky">
                <input type="text" class="search-input" id="searchBox" placeholder="ğŸ” æœç´¢..." oninput="renderList()">
                <div class="filter-controls">
                    <select id="sortSelect" class="sort-select" onchange="renderList()">
                        <option value="dateDesc">ğŸ“… æ—¥æœŸ (æ–°â†’æ—§)</option>
                        <option value="priceDesc">ğŸ’° ä»·æ ¼ (é«˜â†’ä½)</option>
                        <option value="nameAsc">ğŸ”¤ åç§° (A-Z)</option>
                    </select>
                    <div class="view-toggle-btn" onclick="toggleViewMode()">
                        <span id="viewIcon">ğŸ–¼ï¸</span>
                    </div>
                </div>
                <div class="filter-color-bar" id="filterBar"></div>
            </div>
            <div class="masonry-grid" id="itemList"></div>
        </div>
    </div>

    <div id="imgModal" class="modal-overlay" onclick="closeModal()">
        <img id="modalImg" src="">
        <div id="modalRemark"></div>
        <div class="modal-close-tip">ç‚¹å‡»ä»»æ„å¤„å…³é—­</div>
    </div>
    
    <div id="helpModal" class="modal-overlay" style="z-index: 105;">
        <div class="edit-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header"><div class="edit-title">ğŸ“˜ è¯´æ˜</div><button class="btn-close-edit" onclick="closeHelpModal()">Ã—</button></div>
            <div style="font-size:14px; line-height:1.6; color:var(--text-sub);">
                <p>1. <b>iOSä¼˜åŒ–</b>ï¼šå·²é€‚é…æ¨ªå±ç€‘å¸ƒæµï¼Œä¿®å¤å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ã€‚</p>
                <p>2. <b>è§¦å±æ“ä½œ</b>ï¼šå¡ç‰‡ä¸Šçš„ç¼–è¾‘æŒ‰é’®ç°åœ¨å§‹ç»ˆå¯è§ï¼Œæ–¹ä¾¿ç‚¹å‡»ã€‚</p>
                <p>3. <b>çœ‹æ¿å¨˜</b>ï¼šæ”¯æŒæ‰‹æŒ‡æ‹–åŠ¨ï¼Œä¸ä¼šè§¦å‘å±å¹•æ»šåŠ¨ã€‚</p>
            </div>
        </div>
    </div>

    <div id="editModal" class="modal-overlay" style="z-index: 101;">
        <div class="edit-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header"><div class="edit-title">âœï¸ ç¼–è¾‘</div><button class="btn-close-edit" onclick="closeEditModal()">Ã—</button></div>
            <input type="hidden" id="editId">
            <div class="input-group"><select id="editCat"><option value="æœè£…">ğŸ‘” æœè£…</option><option value="é‹é´">ğŸ‘  é‹é´</option><option value="åŒ–å¦†å“">ğŸ’„ åŒ–å¦†å“</option><option value="è¢œå­">ğŸ§¦ è¢œå­</option><option value="é…é¥°">ğŸ§¢ é…é¥°</option><option value="æ‰‹åŠ">ğŸ§œâ€â™€ï¸ æ‰‹åŠ</option><option value="æ•°ç ">ğŸ“· æ•°ç </option><option value="å…¶ä»–">ğŸ“¦ å…¶ä»–</option></select></div>
            <div class="input-group"><input type="text" id="editName" placeholder="åç§°"></div>
            <div class="input-group">
                <label style="font-size:12px; color:var(--text-sub);">å°ºç åº“å­˜</label>
                <div id="editSizeContainer" style="background:rgba(128,128,128,0.05); padding:10px; border-radius:8px; margin-top:5px;"></div>
                <div style="display:flex; gap:5px; margin-top:10px;">
                    <input type="text" id="editAddSizeName" placeholder="å°ºç " style="flex:1;">
                    <input type="number" id="editAddSizeQty" placeholder="æ•°é‡" style="width:60px;">
                    <button class="btn-mini" onclick="addSizeInEdit()" style="width:40px;">+</button>
                </div>
            </div>
            <div class="input-group"><input type="number" id="editPrice" placeholder="å•ä»·"></div>
            <div class="input-group"><textarea id="editRemark" class="remark-input" placeholder="å¤‡æ³¨"></textarea></div>
            <div class="input-group"><label class="file-upload-box" style="height: 60px;"><input type="file" id="editImg" accept="image/*" onchange="previewFile('editImg', 'editFileName')"><div class="upload-text">ğŸ”„ æ›´æ¢å›¾ç‰‡</div><div id="editFileName" style="font-size:10px;"></div></label></div>
            <button class="btn-main" onclick="saveEdit()">ğŸ’¾ ç¡®è®¤ä¿®æ”¹</button>
        </div>
    </div>

    <div id="stockModal" class="modal-overlay" style="z-index: 102;">
        <div class="stock-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header"><div class="edit-title">ğŸ“¦ è¡¥è´§</div><button class="btn-close-edit" onclick="closeStockModal()">Ã—</button></div>
            <input type="hidden" id="stockId">
            <div id="stockNameDisplay" style="margin-bottom:10px; font-weight:bold; color:var(--accent);"></div>
            <div class="input-group"><label style="font-size:12px;">å°ºç </label><input type="text" id="addSize"></div>
            <div class="input-group"><label style="font-size:12px;">æ•°é‡</label><input type="number" id="addQty" value="1"></div>
            <button class="btn-main" onclick="confirmStockAdd()">âœ… ç¡®è®¤</button>
        </div>
    </div>

    <div id="waifuTips" class="waifu-tips">ä¸»äººï¼Œæ¬¢è¿å›æ¥ï¼</div>

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('âœ… SW Ready'))
            .catch(err => console.log('âŒ SW Fail'));
        });
      }
    </script>

    <script src="https://unpkg.com/live2d-widget@3.1.4/lib/L2Dwidget.min.js"></script>
    
    <script>
        const STORAGE_KEY = 'inventory_v10';
        const COLOR_KEY = 'wardrobe_colors_history';
        const THEME_KEY = 'wardrobe_theme';
        const WAIFU_KEY = 'wardrobe_waifu_visible';
        
        let inventory = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        let recentColors = JSON.parse(localStorage.getItem(COLOR_KEY)) || ["#5d4037", "#a1887f", "#2c3e50"];
        let lastUpdateTime = localStorage.getItem('wardrobe_last_update') || "æš‚æ— ";
        let activeColorFilter = null;
        let isBatchMode = false;
        let selectedIds = new Set();
        let currentView = 'grid'; 
        let currentPersona = 'normal'; // é»˜è®¤æ€§æ ¼
        let waifuTimer = null;

        const themes = [
            { id: 'passion', icon: 'ğŸ·' }, { id: 'ladies', icon: 'ğŸŒ·' }, { id: 'men', icon: 'ğŸ‘”' },
            { id: 'gacha', icon: 'ğŸ' }, { id: 'daily', icon: 'ğŸ›ï¸' }, { id: 'night', icon: 'ğŸŒ™' },
            { id: 'wood', icon: 'ğŸªµ' }, { id: 'jirai', icon: 'ğŸ€' }
        ];

        /* =========================================
           çœ‹æ¿å¨˜å°è¯åº“ (å®Œæ•´å›å½’)
        ========================================= */
        const waifuQuotes = {
            "normal": {
                "welcome:morning": ["æ—©å®‰å‘€ï¼Œä¸»äººï¼ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å‡ºå‘å“¦ï½âœ¨", "ä¸»äººæ—©ï¼æ–°çš„ä¸€å¤©è¶…çº§å……æ»¡å¸Œæœ›ï¼Œä¸€èµ·å¤§å¹²ä¸€åœºå§ï¼"],
                "welcome:noon": ["åˆå®‰ï½åƒè¿‡é¥­äº†å—ï¼Ÿåˆåä¹Ÿè¦ä¿æŒå…ƒæ°”ç»§ç»­åŠ æ²¹å“¦ï¼", "ä¸­åˆå¥½ï¼è‚šå­é¥±é¥±çš„ï¼Œæ‰æœ‰åŠ›é‡æ•´ç†å®è´ä»¬å‘€ï¼"],
                "welcome:afternoon": ["ä¸‹åˆå¥½ï¼æ¥æ¯èŒ¶ææç¥ï¼Œå’±ä»¬ç»§ç»­æˆ˜æ–—å§ï½", "ä¸‹åˆèŒ¶æ—¶é—´ï¼å–ç‚¹ä¸œè¥¿ï¼Œå…ƒæ°”ç«‹åˆ»å›æ»¡å“¦ï¼"],
                "welcome:night": ["æ™šä¸Šå¥½ï¼è¾›è‹¦ä¸€å¤©å•¦ï¼Œç°åœ¨æ¥æ•´ç†å¿ƒæƒ…å’Œå®è´ä»¬å§ï½", "å¤œé‡Œå¥½ï¼ç¯å…‰ä¸‹æ•´ç†å‚¨ç‰©ç®±ä¹Ÿè¶…æœ‰æ°›å›´å“¦ï¼"],
                "welcome:midnight": ["è¿™ä¹ˆæ™šå•¦ï¼ä¸»äººè¿˜è¦ç†¬å¤œå—ï¼Ÿæ˜å¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï½", "æ·±å¤œå¥½ï¼å¿«ä¼‘æ¯å§ï¼Œæ¢¦é‡Œä¹Ÿè¦æ¢¦åˆ°æ»¡æ»¡çš„å®è´ï½"],
                "click:newCat:è¢œå­": ["å“‡ï¼æ–°è¢œå­ç±»åˆ«ï¼æ˜¯å¯çˆ±çš„å›¾æ¡ˆè¿˜æ˜¯æ¸©æš–çš„çº¯è‰²å‘¢ï¼Ÿ", "è¢œå­å®¶æ—å£®å¤§å•¦ï¼è„šä¸«å­ä¹Ÿè¦è¢«æ»¡æ»¡å® çˆ±å•¦ï¼"],
                "click:newCat:é‹é´": ["é‹é´æ–°æˆå‘˜ï¼æ˜¯å¸…æ°”çš„é´å­è¿˜æ˜¯ä¼˜é›…çš„é«˜è·Ÿé‹ï¼Ÿ", "å“‡å“¦ï½æ–°é‹é´æ¥å•¦ï¼èµ°è·¯éƒ½è¦è‡ªå¸¦BGMï¼Œè¶…çº§å¸¦æ„Ÿï¼"],
                "click:newCat:æœè£…": ["æ–°è¡£æœï¼å“‡å¡ï¼Œä»Šå¤©è¦ç©¿å“ªä»¶å‡ºé—¨é—ªè€€å…¨åœºå‘¢ï½", "è€¶ï¼æ–°è¡£æœå…¥åº“æˆåŠŸï¼è¡£æ©±æ»¡æ»¡éƒ½æ˜¯å¹¸ç¦æ„Ÿï¼"],
                "click:newCat:åŒ–å¦†å“": ["åŒ–å¦†å“æ–°å®è´ï¼ä»Šå¤©ä¹Ÿè¦ç¾ç¾å“’é—ªé—ªå‘å…‰å“¦ï½âœ¨", "å“‡ï¼å”‡è†çœ¼å½±éƒ½æ¥å•¦ï¼Ÿå¥½æƒ³å’Œä¸»äººä¸€èµ·è¯•è‰²ï¼"],
                "click:newCat:é…é¥°": ["é…é¥°é—ªäº®ç™»åœºï¼é¡¹é“¾è€³ç¯è¶…çº§ç‚¹ç›ï½å¥½æ£’ï¼", "æ–°é…ä»¶æ¥å•¦ï¼å°ç»†èŠ‚è®©æ•´ä½“é€ å‹ç›´æ¥å®Œç¾å‡çº§ï¼"],
                "click:newCat:æ‰‹åŠ": ["æ‰‹åŠæ–°æˆå‘˜ï¼å¥½å¯çˆ±å“¦ï½è®©æˆ‘å…ˆæŠ±æŠ±ï¼ğŸ¤—", "å“‡ï¼æ‰‹åŠæ”¶è—åˆå¢åŠ å•¦ï¼æˆ¿é—´ç¬é—´å……æ»¡æ´»åŠ›å’Œçˆ±æ„ï½"],
                "click:newCat:æ•°ç ": ["æ•°ç äº§å“æ¥å•¦ï¼ç§‘æŠ€æ„Ÿæ»¡æ»¡ï¼Œè¶…çº§é…·ï¼", "æ•°ç ç±»åˆ«æ–°å¢ï¼ç°ä»£ç”Ÿæ´»è¶…ä¾¿åˆ©ï¼Œä¸»äººçœŸä¼šäº«å—ï¼"],
                "click:newCat:å…¶ä»–": ["å…¶ä»–ç±»åˆ«å¼€å¯ï¼ä»€ä¹ˆå¥‡å¦™å®è´éƒ½è¦æ¥å—ï¼Ÿå¥½å¥½å¥‡ï½", "ç¥ç§˜çš„å…¶ä»–ç‰©å“ï¼ç”Ÿæ´»å°±æ˜¯è¦å¤šç‚¹æƒŠå–œæ‰æœ‰è¶£å‘€ï¼"],
                "click:save": ["å¥½è€¶ï¼å®ç‰©å…¥åº“æˆåŠŸï¼âœ¨å‚¨ç‰©ç®±åˆä¸°å¯Œå•¦ï¼", "ä¿å­˜å®Œæˆï¼å®è´å®‰å…¨åˆ°å®¶ï¼Œæˆ‘è¶…å¼€å¿ƒï½"],
                "click:delete": ["çœŸçš„è¦è¯´å†è§å—ï¼Ÿè™½ç„¶æœ‰ç‚¹èˆä¸å¾—â€¦â€¦ä½†ä¸»äººå†³å®šæœ€é‡è¦ï¼", "åˆ é™¤å®Œæˆï¼ç©ºé—´è…¾å‡ºæ¥å•¦ï¼Œè¿æ¥æ–°å®è´å§ï¼"],
                "click:batch": ["æ‰¹é‡æ“ä½œå¯åŠ¨ï¼å‡†å¤‡å¤§æ‰«é™¤å—ï¼Ÿå¹²åŠ²æ»¡æ»¡å†²å‘€ï¼", "æ‰¹é‡æ¨¡å¼å¼€å¯ï¼ä¸€æ¬¡å¤„ç†å¥½å¤šï¼Œæ•ˆç‡çˆ†è¡¨ï¼"],
                "click:copy": ["æ•°æ®å·²å¤åˆ¶ï¼è®°å¾—è´´åˆ°å®‰å…¨åœ°æ–¹å“¦ï½", "å¤åˆ¶æˆåŠŸï¼å¤‡ä»½æ°¸è¿œæ˜¯æœ€ç¨³çš„åšæ³•ï¼"],
                "drag": ["èµ·é£å•°â€”â€”ï¼ä¸»äººæ‹–å¾—æˆ‘å¥½å¼€å¿ƒï½", "å“‡ï¼åœ¨é£å•¦ï¼å¥½åˆºæ¿€å¥½åˆºæ¿€ï¼", "æ‹–æ‹–æ‹–ï½æˆ‘å˜æˆå°é£æœºå•¦ï¼"],
                "click:sort": ["æ’åºå®Œæˆï¼è¿™æ ·æ‰¾èµ·æ¥æ–¹ä¾¿å¤šå•¦ã€‚", "æ•´æ•´é½é½ï¼ŒçœŸèˆ’æœã€‚"],
                "click:toggleView": ["æ¢ä¸ªè§†è§’çœ‹ä¸–ç•Œï¼", "å–œæ¬¢è¿™ç§å±•ç¤ºæ–¹å¼å—ï¼Ÿ"],
                "click:export": ["æ•°æ®æ‰“åŒ…å®Œæ¯•ï¼ä¸€å®šè¦ä¿ç®¡å¥½å“¦ã€‚", "è¿™æ˜¯æˆ‘ä»¬çè´µçš„å›å¿†å¤‡ä»½ã€‚"],
                "click:import": ["æ•°æ®æ¢å¤æˆåŠŸï¼æ¬¢è¿å›æ¥ã€‚", "ä¸€åˆ‡éƒ½å›åˆ°äº†ç†Ÿæ‚‰çš„æ ·å­ã€‚"],
                "cheap": ["å“‡ï¼è¶…çº§å®æƒ ï¼ä¸»äººçœ¼å…‰å¤ªå¥½äº†ï¼Œçœé’±å°èƒ½æ‰‹ï¼", "å¥½ä¾¿å®œï¼è¿™æ³¢è¡€èµšï¼Œå¼€å¿ƒåˆ°é£èµ·ï½"],
                "expensive": ["è™½ç„¶è´µäº†ç‚¹ï¼Œä½†å–œæ¬¢æœ€é‡è¦ï¼ä¸»äººå€¼å¾—æœ€å¥½çš„ï½", "é«˜ç«¯å®è´ï¼å“è´¨æ„Ÿæ»¡æ»¡ï¼Œè¶…æœ‰å“å‘³ï¼"],
                "click:newColor": ["è¿™ä¸ªé¢œè‰²çœŸå¥½çœ‹ï¼ä¸»äººå“å‘³ä¸€çº§æ£’ï¼", "æ¢ä¸ªé¢œè‰²ï¼Œå¿ƒæƒ…ä¹Ÿè·Ÿç€å˜å¥½äº†å‘¢ï½"]
            },
			"mesugaki": {
    "welcome:morning": [
      "å“ˆå•Šâ€¦â€¦è¿™ä¹ˆæ—©å°±è¦èµ·æ¥ï¼Ÿæ‚é±¼ä¸»äººçœŸå‹¤å¿«å‘¢ï½ä¸è¿‡ä¹Ÿåªä¼šè¿™ç‚¹å°äº‹å§ï¼Ÿ",
      "æ—©å®‰å“¦ï½å¤ªé˜³éƒ½æ‡’å¾—èµ·åºŠï¼Œä½ å€’å…ˆçˆ¬èµ·æ¥äº†ï¼ŸçœŸæ‹¿ä½ æ²¡åŠæ³•ï½",
      "æ—©ä¸Šå¥½å•¦ï¼Œç¬¨è›‹ä¸»äººã€‚ä»Šå¤©ä¹Ÿè¦è¢«æœ¬å°å§ç›‘ç£ç€è¿‡æ—¥å­å—ï¼Ÿ",
      "æ—©å“¦ï½å†ç£¨è¹­ä¸‹å»ï¼Œæœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿå¿«ç‚¹ç²¾ç¥èµ·æ¥ï¼"
    ],
    "welcome:noon": [
      "åˆå®‰ï½é¥­åƒäº†å—ï¼Ÿåˆ«å‘Šè¯‰æˆ‘æ˜¯æ³¡é¢å“¦ï¼Œé‚£ç§ç©·é…¸å‘³å„¿ï½",
      "ä¸­åˆå¥½ã€‚çƒ­æ­»äº†å§ï¼Ÿæ‚é±¼ä¸»äººè¿ç©ºè°ƒéƒ½èˆä¸å¾—å¼€å—ï¼Ÿ",
      "åˆé¥­æ—¶é—´åˆ°å•¦ï½æœ¬å°å§å¯ä¸åƒå‰©èœï¼Œä½ å‘¢ï¼Ÿå‘µå‘µï½",
      "å˜¿ï¼Œä¸­åˆäº†ã€‚åˆ«å…‰é¡¾ç€ç©æ‰‹æœºï¼Œèµ¶ç´§å»åƒé¥­å•¦ï¼Œç¬¨è›‹ï½"
    ],
    "welcome:afternoon": [
      "ä¸‹åˆå¥½ï½å›°äº†å§ï¼Ÿæ‚é±¼ä¸»äººæœç„¶æ²¡ä½“åŠ›å‘¢ï½",
      "ä¸‹åˆèŒ¶æ—¶é—´å“¦ï½ä¸è¿‡ä½ å¤§æ¦‚åªé…å–ç™½å¼€æ°´å§ï¼Ÿå˜»å˜»ï½",
      "ä¸‹åˆå•¦ã€‚é˜³å…‰è¿™ä¹ˆå¥½ï¼Œå‡ºå»èµ°èµ°å¦‚ä½•ï¼Ÿæœ¬å°å§å¯ä¸æƒ³é™ªå®…ç”·ï½",
      "å“ˆå•Šâ€¦â€¦ä¸‹åˆä¹Ÿè¦ç»§ç»­æ•´ç†ï¼ŸçœŸæ˜¯ä¸ªæ­»å¿ƒçœ¼çš„å®¶ä¼™å‘¢ï½"
    ],
    "welcome:night": [
      "æ™šä¸Šå¥½ã€‚ç»ˆäºå¿™å®Œä¸€å¤©äº†ï¼Ÿæ‚é±¼ä¸»äººä¹ŸæŒºåŠªåŠ›çš„å˜›ï½å‹‰å¼ºå¤¸ä½ ä¸€å¥ã€‚",
      "å¤œé‡Œå¥½å“¦ï½ç¯éƒ½äº®äº†ï¼Œä½ è¿˜è¦ç»§ç»­ä¹°ä¸œè¥¿ï¼Ÿè´¥å®¶å­ï½",
      "æ™šä¸Šå¥½å•¦ã€‚è¾›è‹¦äº†å‘¢â€¦â€¦ä¸è¿‡åˆ«ä»¥ä¸ºè¿™æ ·æœ¬å°å§å°±ä¼šæ¸©æŸ”å“¦ï¼Ÿ",
      "æ™šä¸Šäº†ã€‚å¿«ç‚¹æ”¶å·¥ä¼‘æ¯å•¦ï¼Œå†ç†¬å¤œå¯è¦å˜ä¸‘äº†å“¦ï½"
    ],
    "welcome:midnight": [
      "è¿™ä¹ˆæ™šè¿˜ä¸ç¡ï¼Ÿæ‚é±¼ä¸»äººæ˜¯å¤œè¡Œæ€§ç”Ÿç‰©å—ï¼ŸçœŸä¸‹ç­‰ï½",
      "å“ˆå•Šâ€¦â€¦éƒ½è¿™ä¸ªç‚¹äº†ã€‚è¿˜ä¸å»ç¡ï¼Œæ˜¯æƒ³è¢«æœ¬å°å§éª‚å—ï¼Ÿ",
      "æ·±å¤œå¥½å“¦ï½å¯‚å¯äº†å§ï¼Ÿæ‰€ä»¥æ‰è¦æœ¬å°å§é™ªç€ï¼Ÿå‘µå‘µï¼ŒçœŸæ²¡åŠæ³•ï½",
      "å–‚å–‚ï¼Œå†ä¸ç¡æ˜å¤©èµ·ä¸æ¥çš„å“¦ï¼Ÿè´£ä»»å¯ä¸åœ¨æœ¬å°å§èº«ä¸Šï½"
    ],
    "holiday:christmas": [
      "Merry Christmasï½ç¤¼ç‰©å‘¢ï¼Ÿæ²¡æœ‰çš„è¯ï¼Œæœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿ",
      "åœ£è¯å¿«ä¹å•¦ã€‚é›ªèŠ±ä»€ä¹ˆçš„æœ€éº»çƒ¦äº†ï¼Œä½ ä¸ä¼šæƒ³å †é›ªäººå§ï¼Ÿå¹¼ç¨šï½",
      "åœ£è¯èŠ‚å¥½å“¦ï½è¢œå­é‡Œæœ€å¥½æœ‰ç»™æœ¬å°å§çš„ç¤¼ç‰©ï¼Œä¸ç„¶å°±è¯…å’’ä½ ï½",
      "å“¼ï¼ŒMerry Christmasã€‚åˆ«ä»¥ä¸ºèŠ‚æ—¥å°±èƒ½æ”¾æ¾è­¦æƒ•å“¦ï¼Œæ‚é±¼ï½"
    ],
    "holiday:newyear": [
      "æ–°å¹´å¿«ä¹ï½ä»Šå¹´ä½ è¿˜èƒ½åšæŒå‡ å¤©æ–°å¹´è®¡åˆ’ï¼Ÿæœ¬å°å§å¾ˆæœŸå¾…çœ‹ä½ æ”¾å¼ƒå“¦ï½",
      "Happy New Yearã€‚çƒŸèŠ±å¾ˆåµå‘¢ï¼Œä½ ä¸ä¼šåˆæµªè´¹é’±å»çœ‹å§ï¼Ÿ",
      "æ–°å¹´å¥½å•¦ã€‚ä»Šå¹´ä¹Ÿè¯·å¤šå…³ç…§â€¦â€¦æ‰æ€ªï¼Œåªå‡†ä½ å…³ç…§æœ¬å°å§å“¦ï½",
      "æ–°å¹´åˆ°äº†ã€‚æ‚é±¼ä¸»äººä¹Ÿä¼šç¨å¾®å˜å¼ºä¸€ç‚¹ç‚¹å—ï¼Ÿä¸å¯èƒ½å§ï½"
    ],
    "holiday:valentine": [
      "æƒ…äººèŠ‚å¿«ä¹ï½å·§å…‹åŠ›å‘¢ï¼Ÿæ²¡æœ‰çš„è¯å°±è¯æ˜ä½ æ˜¯æ‚é±¼å•¦ï½",
      "2.14å¥½å“¦ï½æœ¬å°å§å¯ä¸æ”¶ä¹‰ç†å·§å…‹åŠ›ï¼Œåªæ”¶æœ¬å‘½çš„å“¦ï¼Ÿå˜»å˜»ï½",
      "æƒ…äººèŠ‚å•¦ã€‚å•èº«çš„æ‚é±¼ä¸»äººä»Šå¤©ä¹Ÿè¦ä¸€ä¸ªäººè¿‡ï¼ŸçœŸå¯æ€œå‘¢ï½",
      "å“ˆå•Šâ€¦â€¦æƒ…äººèŠ‚ã€‚åˆ«ç›¯ç€æœ¬å°å§çœ‹ï¼Œæƒ³è¢«è¸©å—ï¼Ÿå˜æ€ï½"
    ],
	
	"click:sort": [
    "å“ˆå•Šâ€¦â€¦æ’åºå®Œæˆäº†å“¦ï¼Ÿæ‚é±¼ä¸»äººè¿ä¸œè¥¿éƒ½æ”¶æ‹¾ä¸å¥½ï¼Œåªèƒ½é æœ¬å°å§å¸®å¿™å‘¢ï½çœŸæ²¡ç”¨ï½",
    "æ•´æ•´é½é½æ’å¥½äº†å•¦ï½çœ‹åœ¨ä½ è¿™ä¹ˆç¬¨çš„ä»½ä¸Šï¼Œæœ¬å°å§æ‰å‹‰ä¸ºå…¶éš¾å¸®ä½ çš„å“¦ï¼Ÿä¸‹æ¬¡å†ä¹±æ¥å¯è¦æƒ©ç½šä½ äº†ï½",
    "æ’åºå®Œæ¯•ï½æ‚é±¼ä¸»äººç»ˆäºèƒ½æ‰¾åˆ°ä¸œè¥¿äº†å§ï¼Ÿæ²¡æœ‰æœ¬å°å§ä½ æ ¹æœ¬ä»€ä¹ˆéƒ½åšä¸å¥½å¯¹ä¸å¯¹ï¼Ÿå‘µå‘µï½"
  ],
  "click:toggleView": [
    "è§†è§’åˆ‡æ¢å•¦ï½æ‚é±¼ä¸»äººè¿çœ‹ä¸œè¥¿çš„è§’åº¦éƒ½ä¸ä¼šé€‰å—ï¼Ÿæœ¬å°å§éƒ½æ›¿ä½ è§‰å¾—ä¸¢äººå‘¢ï½",
    "æ¢äº†ä¸ªå±•ç¤ºæ–¹å¼å“¦ï½ä½ è¿™å˜æ€ï¼Œè¯¥ä¸ä¼šæ˜¯æƒ³ä»å¥‡æ€ªçš„è§’åº¦å·çœ‹æœ¬å°å§å§ï¼ŸçœŸä¸‹æµï½",
    "è§’åº¦å˜äº†ï½æ»¡æ„äº†å—ï¼Œç¬¨è›‹ä¸»äººï¼Ÿè¿˜æ˜¯è¯´ä½ åˆåœ¨æƒ³ä»€ä¹ˆå¥‡æ€ªçš„äº‹ï¼Ÿå“ˆå•Šâ€¦â€¦æ‹¿ä½ æ²¡åŠæ³•ï½"
  ],
  "click:export": [
    "æ•°æ®æ‰“åŒ…å¥½äº†å“¦ï½è¿™ä¹ˆé‡è¦çš„ä¸œè¥¿ä¹Ÿè¦æœ¬å°å§æ¥å¸®ä½ å¤‡ä»½ï¼Ÿæ‚é±¼ä¸»äººçœŸæ˜¯ç¦»ä¸å¼€æˆ‘å‘¢ï½",
    "å¯¼å‡ºå®Œæˆï½è¿™äº›â€œçè´µçš„å›å¿†â€å¯è¦å¥½å¥½ä¿ç®¡å“¦ï¼Ÿä¸¢æ‰äº†çš„è¯ï¼Œæœ¬å°å§å¯ä¸ä¼šå†å¸®ä½ ç¬¬äºŒæ¬¡ï½",
    "å¤‡ä»½å®Œæ¯•å•¦ï½æ‚é±¼ä¸»äººè¿è‡ªå·±çš„ä¸œè¥¿éƒ½å®ˆä¸ä½å§ï¼Ÿå¹¸å¥½æœ‰æœ¬å°å§åœ¨ï¼Œä¸ç„¶ä½ æ—©å°±ä¸€æ— æ‰€æœ‰äº†ï½å‘µå‘µ"
  ],
  "click:import": [
    "æ•°æ®æ¢å¤æˆåŠŸï½æ¬¢è¿å›æ¥å“¦ï¼Œæ‚é±¼ä¸»äººã€‚æ²¡æœ‰æœ¬å°å§ä½ è¿ä»¥å‰çš„ä¸œè¥¿éƒ½æ‰¾ä¸å›æ¥å‘¢ï½çœŸå¯æ‚²ï½",
    "å¯¼å…¥å®Œæˆå•¦ï½ä¸€åˆ‡åˆå˜å›ä½ ç†Ÿæ‚‰çš„æ ·å­äº†ï½ä¸è¿‡æ²¡æœ‰æœ¬å°å§ä½ æ ¹æœ¬åŠä¸åˆ°å¯¹å§ï¼Ÿå¿«ç‚¹æ„Ÿè°¢æˆ‘ï½",
    "æ¢å¤å¥½äº†å“¦ï½çœ‹åœ¨ä½ è¿™ä¹ˆæ²¡ç”¨çš„ä»½ä¸Šï¼Œæœ¬å°å§æ‰å¸®ä½ æ‰¾å›æ¥çš„ï½ä¸‹æ¬¡å†æä¸¢è¯•è¯•ï¼Ÿå“¼ï½"
  ],
		
    "click:newCat:è¢œå­": [
      "è¢œå­æ–°ç±»åˆ«ï¼Ÿæ‚é±¼ä¸»äººè¿è¢œå­éƒ½è¦ç‰¹åœ°åˆ†ç±»ï¼ŸçœŸé—²ï½",
      "å“¼ï¼ŒåŠ äº†è¢œå­å•Šã€‚éƒ½æ˜¯ç ´æ´çš„ä¾¿å®œè´§å§ï¼Ÿç¬¦åˆä½ çš„å“å‘³å‘¢ï½",
      "è¢œå­æ¥å•¦ï½ä¸ä¼šå…¨æ˜¯é»‘ç™½ç°çš„åœŸè‰²å§ï¼Ÿæœ¬å°å§è¦çœ‹ç²‰è‰²çš„å“¦ï½",
      "æ–°è¢œå­åˆ†ç±»ï¼Ÿå‘µå‘µï¼Œè„šè‡­çš„å®¶ä¼™è¿˜æŒºåœ¨æ„è¿™ä¸ªå˜›ï½"
    ],
    "click:newCat:é‹é´": [
      "é‹é´ï¼Ÿæ‚é±¼ä¸»äººç»ˆäºè¦æ¢æ‰é‚£åŒç ´é‹äº†ï¼Ÿæ™šäº†åå¹´å“¦ï½",
      "åŠ äº†é‹å­ç±»åˆ«å•Šã€‚ä¸ä¼šå…¨æ˜¯è¿åŠ¨é‹å§ï¼ŸçœŸæ²¡å“ï½",
      "é‹é´æ¥å•¦ï½é«˜è·Ÿé‹ä»€ä¹ˆçš„æœ€éº»çƒ¦ï¼Œä½ ä¹°å¾—èµ·å—ï¼Ÿå˜»å˜»ï½",
      "å“¼ï¼Œæ–°é‹å­åˆ†ç±»ã€‚åˆ«ä¹°å¤ªå¤§å·çš„ä¸‘é´å­å“¦ï¼Œæœ¬å°å§ä¼šç¬‘ä½ çš„ï½"
    ],
    "click:newCat:æœè£…": [
      "è¡£æœæ–°ç±»åˆ«ï¼Ÿä½ çš„è¡£å“èƒ½çœ‹å—ï¼Ÿæœ¬å°å§è¡¨ç¤ºæ€€ç–‘å“¦ï½",
      "æœè£…æ¥å•¦ï½ä¸ä¼šå…¨æ˜¯åœ°æ‘Šè´§å§ï¼Ÿç©·é…¸å‘³å„¿æ‰‘é¼»è€Œæ¥ï½",
      "åŠ äº†è¡£æœå•Šã€‚å¿«ä¹°ç‚¹åƒæ ·çš„ï¼Œä¸ç„¶æœ¬å°å§éƒ½è¦æ›¿ä½ å®³ç¾äº†ï½",
      "å“¼ï¼Œæœè£…åˆ†ç±»ã€‚æ‚é±¼ä¸»äººä¹Ÿæƒ³å˜æ—¶å°šï¼Ÿåšæ¢¦å§ï½"
    ],
    "click:newCat:åŒ–å¦†å“": [
      "åŒ–å¦†å“ï¼Ÿæ‚é±¼ä¸»äººä¹Ÿç”¨è¿™ä¸ªï¼Ÿå“ˆå“ˆï¼Œæƒ³è±¡ä¸åˆ°å‘¢ï½",
      "ç¾å¦†ç±»åˆ«å•Šã€‚æ¶‚å¾—è·Ÿé¬¼ä¸€æ ·å¯åˆ«æ€ªæœ¬å°å§ç¬‘ä½ å“¦ï½",
      "åŒ–å¦†å“æ¥å•¦ï½æœ¬å°å§çš„æ¨èä½ ä¹°å¾—èµ·å—ï¼Ÿå¤§æ¦‚ä¸è¡Œå§ï½",
      "å•§ï¼ŒåŠ äº†åŒ–å¦†å“ã€‚æƒ³å˜å¸…æ°”ï¼Ÿå…ˆæŠ•èƒå§ï¼Œç¬¨è›‹ï½"
    ],
    "click:newCat:é…é¥°": [
      "é…é¥°ï¼Ÿæ‚é±¼ä¸»äººæˆ´é¦–é¥°ä¼šå¾ˆå¥‡æ€ªçš„å“¦ï¼Ÿå˜»å˜»ï½",
      "é…ä»¶æ–°ç±»åˆ«å•Šã€‚å»‰ä»·å°é¥°å“æœ€é…ä½ äº†å‘¢ï½",
      "é…é¥°æ¥å•¦ï½é—ªé—ªå‘å…‰çš„æ‰é…æœ¬å°å§ï¼Œä½ å°±æˆ´å¡‘æ–™çš„å§ï½",
      "å“¼ï¼ŒåŠ äº†é…é¥°ã€‚åˆ«ä¹°å¤ªå¤¸å¼ çš„ï¼Œä¸ç„¶æ›´åƒå°ä¸‘äº†å“¦ï½"
    ],
    "click:newCat:å…¶ä»–": [
      "å…¶ä»–ç±»åˆ«ï¼Ÿæ‚é±¼ä¸»äººè¿åƒåœ¾éƒ½è¦åˆ†ç±»æ”¶ç€ï¼ŸçœŸæŠ ï½",
      "ç¥ç§˜çš„å…¶ä»–å•Šã€‚è‚¯å®šå…¨æ˜¯æ²¡ç”¨çš„ä¸œè¥¿å§ï¼Ÿèµ¶ç´§æ‰”æ‰å•¦ï½",
      "åŠ äº†å…¶ä»–åˆ†ç±»ã€‚è—äº†ä»€ä¹ˆè§ä¸å¾—äººçš„ä¸œè¥¿å—ï¼Ÿå‘µå‘µï½",
      "å•§ï¼Œå…¶ä»–æ¥å•¦ã€‚ä»€ä¹ˆéƒ½å¾€é‡Œå¡ï¼ŒæŸœå­è¦çˆ†ç‚¸äº†å§ï½"
    ],
    "click:newCat:æ‰‹åŠ": [
      "æ‰‹åŠï¼Ÿæ‚é±¼ä¸»äººè¿˜æ˜¯æ­»å®…å•Šï¼Ÿæœ¬å°å§æ—©å°±çŸ¥é“äº†ï½",
      "æ‰‹åŠæ–°ç±»åˆ«å‘¢ã€‚äºŒæ¬¡å…ƒè€å©†åˆå¢åŠ äº†ï¼Ÿç°å……ä¸å¯èƒ½å“¦ï½",
      "åŠ äº†æ‰‹åŠå•Šã€‚ç°å°˜å †æ»¡çš„è¯æœ¬å°å§å¯ä¸ä¼šå¸®ä½ æ“¦å“¦ï½",
      "å“¼ï¼Œæ‰‹åŠåˆ†ç±»ã€‚åˆ«ä¹°å¤ªè´µçš„ï¼Œä¸ç„¶åƒåœŸæ´»è¯¥ï½"
    ],
    "click:newCat:æ•°ç ": [
      "æ•°ç äº§å“ï¼Ÿæ‚é±¼ä¸»äººç»ˆäºè¦æ¢æ‰‹æœºäº†ï¼Ÿæ—§çš„é‚£å°èƒ½è¿›åšç‰©é¦†äº†å§ï½",
      "æ•°ç ç±»åˆ«å•Šã€‚é…ç½®ä½å¾—å¯æ€œçš„ä¸œè¥¿æœ€é…ä½ å‘¢ï½",
      "åŠ äº†æ•°ç å•¦ã€‚æ°ªé‡‘æ¸¸æˆåˆè¦å……é’±äº†ï¼Ÿç©·é¬¼ï½",
      "å•§ï¼Œæ•°ç æ¥å•¦ã€‚åˆ«ä¹°å±±å¯¨è´§å“¦ï¼Œæœ¬å°å§ä¼šç§ä¸èµ·ä½ çš„ï½"
    ],
    "click:calc": [
      "æ‚é±¼ä¸»äººè¿åŠ å‡éƒ½è¦ç®—åŠå¤©ï¼Ÿæœ¬å°å§éƒ½æ›¿ä½ å®³ç¾äº†ï½",
      "å“¼ï¼Œè¿˜æŒºä¼šç®—çš„å˜›â€¦â€¦ä¸è¿‡ä¹Ÿåªæœ‰è¿™ç‚¹å°èªæ˜äº†å§ï¼Ÿ",
      "è®¡ç®—ï¼Ÿè¿™ä¹ˆç®€å•çš„äº‹éƒ½è¦å·¥å…·ï¼ŸçœŸæ²¡ç”¨å‘¢ï½",
      "å•§ï¼Œé™¤æ³•éƒ½ä¸ä¼šï¼Ÿé‚£æœ¬å°å§å‹‰ä¸ºå…¶éš¾æ•™ä½ ä¸€æ¬¡å“¦ï½"
    ],
    "click:lock": [
      "é”å®šä»·æ ¼ï¼Ÿæ‚é±¼ä¸»äººå¶å°”ä¹ŸæŒºæœºçµçš„å˜›ï½å‹‰å¼ºå¤¸ä½ ä¸€å¥ã€‚",
      "å“¼ï¼Œä¸æƒ³é‡å¤è¾“å…¥ï¼Ÿæ‡’è™«ä¸€ä¸ªï½",
      "ä»·æ ¼é”å¥½äº†å“¦ã€‚çœä¸‹è¿™ç‚¹æ—¶é—´ä½ èƒ½å¹²å˜›å‘¢ï¼Ÿå˜»å˜»ï½",
      "è¿˜çŸ¥é“é”ä»·å•Šã€‚ä¸é”™ä¸é”™ï¼Œæ¯”æƒ³è±¡ä¸­èªæ˜ä¸€ç‚¹ç‚¹ï½"
    ],
    "click:fill": [
      "åˆä¹°ä¸€æ ·çš„ï¼Ÿæ‚é±¼ä¸»äººæ˜¯å¤è¯»æœºå—ï¼ŸçœŸæ— èŠï½",
      "å•§ï¼Œä¸€é”®å¡«å……éƒ½è¦ç”¨ï¼Ÿè‡ªå·±åŠ¨æ‰‹ä¸ä¼šå—ï½",
      "ä¿¡æ¯å¡«å¥½å•¦ï½ä¸è¿‡ä¸‹æ¬¡å†å·æ‡’æœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿ",
      "å“¼ï¼Œåˆè¦æœ¬å°å§å¸®ä½ å¡«ï¼ŸçœŸæ‹¿ä½ æ²¡åŠæ³•å‘¢ï½"
    ],
    "click:save": [
      "å…¥åº“æˆåŠŸï½ä½ çš„æ”¶è—å“å‹‰å¼ºè¿˜ç®—æœ‰ç‚¹å“å‘³å§ã€‚",
      "åˆå¡è¿›æ¥äº†ï¼ŸæŸœå­å¿«è£…ä¸ä¸‹äº†å“¦ï¼Œç¬¨è›‹ï½",
      "ä¿å­˜å¥½äº†ã€‚å“¼ï¼Œå§‘ä¸”æ‰¿è®¤ä½ è¿™æ¬¡é€‰å¾—ä¸é”™ï½",
      "å¥½è€¶ï½ä¸å¯¹ï¼Œæ˜¯ä¿å­˜æˆåŠŸã€‚åˆ«å¤ªå¾—æ„å“¦ï¼Œæ‚é±¼ï½"
    ],
    "click:delete": [
      "æ‰”æ‰æ‰”æ‰ï¼è¿™ç§åƒåœ¾ç•™ç€å¹²å˜›ï½",
      "åˆ é™¤å®Œæˆã€‚æ—©è¯¥è¿™ä¹ˆå¹²äº†ï¼Œæ‚é±¼ä¸»äººå¶å°”ä¹Ÿæœæ–­å‘¢ï½",
      "ç»ˆäºèˆå¾—åˆ äº†ï¼Ÿä¹‹å‰ç•™ç€æ˜¯èˆä¸å¾—å—ï¼ŸçœŸä¼˜æŸ”å¯¡æ–­ï½",
      "æ‹œæ‹œå•¦ï½åºŸç‰©å°±è¯¥è¿›åƒåœ¾æ¡¶ï¼Œæœ¬å°å§æ”¯æŒä½ ï½"
    ],
    "click:batch": [
      "æ‰¹é‡æ“ä½œï¼Ÿæ‚é±¼ä¸»äººè¦å¤§æ‰«é™¤å•¦ï¼Ÿæœ¬å°å§å¾ˆæœŸå¾…çœ‹ä½ åæ‚”å“¦ï½",
      "å“¼ï¼Œä¸€æ¬¡å¤„ç†è¿™ä¹ˆå¤šï¼Ÿåˆ«æ‰‹æ»‘åˆ é”™ä¸œè¥¿å“¦ï½",
      "æ‰¹é‡æ¨¡å¼å¯åŠ¨ã€‚æ•ˆç‡è¿˜è¡Œå˜›ï¼Œå‹‰å¼ºåŠæ ¼ï½",
      "å•§ï¼Œè¦å¤§åŠ¨ä½œäº†ï¼Ÿåˆ«æŠŠæœ‰ç”¨çš„ä¹Ÿæ‰”äº†ï¼Œç¬¨è›‹ï½"
    ],
    "click:copy": [
      "å¤åˆ¶å¥½äº†ã€‚å¤‡ä»½è¿™ç§äº‹ä½ æ€»ç®—ä¼šåšå‘¢ï½",
      "æ•°æ®æ‹·è´å®Œæˆã€‚æ‚é±¼ä¸»äººä¹Ÿæ€•ä¸¢å¤±å•Šï¼ŸçœŸæ²¡å®‰å…¨æ„Ÿï½",
      "å“¼ï¼Œå¤åˆ¶æˆåŠŸã€‚é‡è¦ä¸œè¥¿å¯åˆ«å†ä¸¢äº†å“¦ï½",
      "æ‹·è´å•¦ï½ä¸‹æ¬¡åˆ«åˆå¿˜å¤‡ä»½ï¼Œæœ¬å°å§æ‡’å¾—æé†’ä½ ï½"
    ],
    "hover": [
      "çœ‹ä»€ä¹ˆçœ‹ï¼Ÿå†ç›¯ç€æœ¬å°å§æ”¶ä½ ç›®å…‰ç¨å“¦ï½",
      "å“¼ï¼Œæƒ³æ‘¸å¤´å—ï¼Ÿæ‚é±¼ä¸»äººåšæ¢¦å»å§ï½",
      "å–‚å–‚ï¼Œæœ‰äº‹å—ï¼Ÿæ²¡è¯å°±åˆ«ä¸€ç›´æ™ƒé¼ æ ‡ï½",
      "åœ¨æœ¬å°å§èº«ä¸Šæ¸¸èµ°å‘¢ï¼Ÿå˜æ€å¤§å”ï½å˜»å˜»ï¼Œæœ‰ç‚¹å¯çˆ±ï½"
    ],
    "drag": [
      "å‘€ï¼æ”¾æ‰‹å•¦ï¼ç²—é²çš„å®¶ä¼™ï½",
      "è¦æŠŠæœ¬å°å§æ‹–å»å“ªé‡Œï¼Ÿå˜¿å˜¿ï¼Œæœ‰ç‚¹åˆºæ¿€å‘¢â€¦â€¦",
      "ä¸è®¸ä¹±æ™ƒï¼å¤´æ™•äº†å•¦ï¼Œç¬¨è›‹ä¸»äººï½",
      "åœ¨é£å•¦ï½æ‚é±¼ä¸»äººæ„å¤–åœ°æœ‰åŠ›æ°”å˜›ï½"
    ],
    "cheap": [
      "è¿™ä¹ˆä¾¿å®œä¹Ÿä¹°ï¼ŸçœŸç¬¦åˆæ‚é±¼ä¸»äººçš„èº«ä»½å‘¢ï½",
      "å®æƒ å‘ç°ï¼ç©·é¬¼çš„å¿«ä¹å°±æ˜¯è¿™ç§å§ï¼Ÿå˜»å˜»ï½",
      "ä¾¿å®œè´§å•Šã€‚å“è´¨ä¼°è®¡ä¹Ÿå¾ˆå»‰ä»·å‘¢ï½",
      "å“¼ï¼Œä¾¿å®œä¸œè¥¿æœ€é…ä½ äº†ï¼Œåˆ«ä¹°è´µçš„æœ¬å°å§ä¼šç¬‘ä½ çš„ï½"
    ],
    "expensive": [
      "ä¹°è¿™ä¹ˆè´µçš„ï¼Ÿæ¥ä¸‹æ¥è¦åƒæ³¡é¢ä¸€ä¸ªæœˆäº†å§ï¼Ÿæ´»è¯¥ï½",
      "é«˜ç«¯è´§å•Šã€‚æ‚é±¼ä¸»äººè£…ä»€ä¹ˆæœ‰é’±äººå‘¢ï½",
      "è´µçš„ä¸œè¥¿ï¼Ÿåˆ«æŒ‡æœ›æœ¬å°å§ä¼šå¤¸ä½ å“¦ï¼Œè´¥å®¶å­ï½",
      "å•§ï¼Œè¿™ä¹ˆè´µä¹Ÿä¸‹æ‰‹ï¼Ÿå‹‡æ°”å¯å˜‰â€¦â€¦é’±åŒ…è¦å“­äº†å“¦ï½"
    ]
        }
        };

        window.onload = function() {
            initTheme(); renderRecentColors(); updateStorageInfo(); updateTimeDisplay(); renderList(); initWaifu();
            initWaifuInteractions(); // ç»‘å®šäº¤äº’
        };

        /* æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ */
        function addItem() { 
            const cat=document.getElementById('newCat').value, name=document.getElementById('newName').value.trim(), price=parseFloat(document.getElementById('newPrice').value)||0, color=document.getElementById('newColor').value, remark=document.getElementById('newRemark').value.trim(), file=document.getElementById('newImg').files[0], qty=parseInt(document.getElementById('newQty').value)||1, size=document.getElementById('newSize').value.trim();
            if(!name){alert("è¯·è¾“å…¥åç§°");return;} 
            saveColorToHistory(color); 
            const save=(img)=>{ 
                const item = { id:Date.now(),cat,name,price,color,remark,img, newQty:qty, usedQty:0, sizeNew: size ? {[size]: qty} : {} }; 
                inventory.unshift(item); updateDB(); resetForm(); say('click:save');
            }; 
            if(file){compressImage(file,save);}else{save(null);} 
        }

        function renderList() {
            const listEl = document.getElementById('itemList');
            const search = document.getElementById('searchBox').value.toLowerCase();
            const sortType = document.getElementById('sortSelect').value;
            listEl.className = `masonry-grid ${currentView === 'list' ? 'view-list' : ''}`;
            listEl.innerHTML = '';
            
            let stats = { 'æ€»ä»·å€¼': 0 }; let visibleColors = new Set();
            let filtered = inventory.filter(item => {
                const matchText = item.name.toLowerCase().includes(search) || item.cat.includes(search);
                const matchColor = activeColorFilter ? (item.color === activeColorFilter) : true;
                return matchText && matchColor;
            });

            filtered.sort((a, b) => {
                if (sortType === 'dateDesc') return b.id - a.id;
                if (sortType === 'priceDesc') return b.price - a.price;
                if (sortType === 'nameAsc') return a.name.localeCompare(b.name);
                return b.id - a.id;
            });

            filtered.forEach(item => {
                const val = (item.newQty + item.usedQty) * item.price;
                stats['æ€»ä»·å€¼'] += val;
                if(!stats[item.cat]) stats[item.cat] = 0; stats[item.cat] += val;
                visibleColors.add(item.color);

                const totalQty = item.newQty + item.usedQty;
                const card = document.createElement('div'); 
                const isSelected = selectedIds.has(item.id);
                card.className = `polaroid-card ${isSelected ? 'is-selected' : ''}`;
                
                const imgHtml = item.img ? `<img src="${item.img}" class="card-img" loading="lazy">` : `<div class="no-img-label">${item.cat}</div>`;
                const safeRemark = item.remark ? encodeURIComponent(item.remark).replace(/'/g, "%27") : "";
                
                let clickAction = isBatchMode ? `onclick="toggleSelect(${item.id})"` : `onclick="showDetail('${item.img || ''}', '${safeRemark}')"`;
                let sizeTags = '';
                if (item.sizeNew) for (let s in item.sizeNew) if(item.sizeNew[s]>0) sizeTags += `<span class="size-tag">${s} x${item.sizeNew[s]}</span>`;

                let btns = isBatchMode ? "" : `
                    <div class="btn-del" onclick="delItem(${item.id})" title="åˆ é™¤">ğŸ—‘ï¸</div>
                    <div class="btn-edit" onclick="openEditModal(${item.id})" title="ç¼–è¾‘">âœï¸</div>
                    <div class="btn-copy" onclick="copyToInput(${item.id})" title="å¤åˆ¶">ğŸ“‹</div>
                    <div class="stock-row"><span class="stock-label">ğŸ“¦ å…¨æ–°</span><div class="stock-ctrl"><div class="btn-mini" onclick="mod(${item.id}, 'new', -1)">-</div><span class="big-num num-new">${item.newQty}</span><div class="btn-mini" onclick="mod(${item.id}, 'new', 1)">+</div></div></div>
                    <div class="size-tags-container">${sizeTags}</div>
                    <div class="stock-row"><span class="stock-label">âš¡ åœ¨ç”¨</span><div class="stock-ctrl"><div class="btn-mini" onclick="mod(${item.id}, 'used', -1)">-</div><span class="big-num num-used">${item.usedQty}</span><div class="btn-mini" onclick="mod(${item.id}, 'used', 1)">+</div></div></div>
                `;

                card.innerHTML = `
                    <div class="card-img-area" ${clickAction}>${imgHtml}<span class="total-badge">${totalQty}</span></div>
                    <div class="card-info">
                        <div class="card-header"><div class="card-title">${item.name}</div><div class="color-badge" style="background:${item.color}"></div></div>
                        <div class="card-meta"><span>${item.cat}</span><span class="price-tag">Â¥${item.price}</span></div>
                        ${btns}
                    </div>`;
                listEl.appendChild(card);
            });
            renderStats(stats); renderFilterBar(visibleColors);
        }

        /* åŸºç¡€åŠŸèƒ½å‡½æ•° */
        function updateDB() { localStorage.setItem(STORAGE_KEY,JSON.stringify(inventory)); renderList(); updateStorageInfo(); recordUpdateTime(); }
        function compressImage(f,cb) { if(f.size>10485760){alert("âš ï¸ å›¾ç‰‡è¿‡å¤§");return;} const r=new FileReader(); r.onload=(e)=>{const i=new Image();i.src=e.target.result;i.onload=()=>{const c=document.createElement('canvas');let mw=600,w=i.width,h=i.height;if(w>mw){h*=mw/w;w=mw;}c.width=w;c.height=h;c.getContext('2d').drawImage(i,0,0,w,h);cb(c.toDataURL('image/jpeg',0.5));}};r.readAsDataURL(f); }
        function toggleViewMode() { currentView = currentView === 'grid' ? 'list' : 'grid'; renderList(); say('click:toggleView'); }
        function resetForm() { document.getElementById('newName').value=''; document.getElementById('newPrice').value=''; document.getElementById('newQty').value='1'; document.getElementById('newSize').value=''; document.getElementById('newRemark').value=''; document.getElementById('newImg').value=''; document.getElementById('fileNameDisplay').style.display='none'; }
        
        function openEditModal(id) { 
            const item=inventory.find(x=>x.id===id); if(!item)return;
            document.getElementById('editId').value=item.id; 
            document.getElementById('editName').value=item.name; 
            document.getElementById('editPrice').value=item.price; 
            document.getElementById('editRemark').value=item.remark||'';
            renderEditSizes(item);
            document.getElementById('editModal').style.display='flex'; 
        }
        function closeEditModal() { document.getElementById('editModal').style.display='none'; }
        function saveEdit() { 
            const id=parseInt(document.getElementById('editId').value), item=inventory.find(x=>x.id===id); if(!item)return;
            item.name=document.getElementById('editName').value; 
            item.cat=document.getElementById('editCat').value;
            item.price=parseFloat(document.getElementById('editPrice').value)||0; 
            item.remark=document.getElementById('editRemark').value;
            const f=document.getElementById('editImg').files[0]; 
            if(f){compressImage(f,(d)=>{item.img=d;updateDB();closeEditModal();});} else{updateDB();closeEditModal();}
        }

        /* å°ºç é€»è¾‘ */
        function renderEditSizes(item) {
            const container = document.getElementById('editSizeContainer'); container.innerHTML = '';
            if (item.sizeNew) for (let s in item.sizeNew) {
                container.innerHTML += `<div class="edit-size-row"><span>${s}</span><input type="number" value="${item.sizeNew[s]}" onchange="updateSizeQty(${item.id},'${s}',this.value)"><button class="btn-x" onclick="removeSize(${item.id},'${s}')">Ã—</button></div>`;
            }
        }
        function addSizeInEdit() {
            const id=parseInt(document.getElementById('editId').value), item=inventory.find(x=>x.id===id), s=document.getElementById('editAddSizeName').value, q=parseInt(document.getElementById('editAddSizeQty').value);
            if(item && s && q>0) { if(!item.sizeNew) item.sizeNew={}; item.sizeNew[s]=(item.sizeNew[s]||0)+q; renderEditSizes(item); }
        }
        function updateSizeQty(id,s,v) { const item=inventory.find(x=>x.id===id); if(item) item.sizeNew[s]=parseInt(v); }
        function removeSize(id,s) { const item=inventory.find(x=>x.id===id); if(item && confirm("åˆ é™¤æ­¤å°ºç ?")) { delete item.sizeNew[s]; renderEditSizes(item); } }

        /* åº“å­˜æ“ä½œ */
        function mod(id, type, d) {
            const item = inventory.find(x => x.id === id);
            if (!item) return;
            if (type === 'new' && d < 0 && item.sizeNew && Object.keys(item.sizeNew).length > 0) {
                 const k = Object.keys(item.sizeNew)[0];
                 if(item.sizeNew[k]>0) item.sizeNew[k]--;
            }
            item[type==='new'?'newQty':'usedQty'] = Math.max(0, item[type==='new'?'newQty':'usedQty'] + d);
            updateDB();
        }
        
        /* è¾…åŠ©åŠŸèƒ½ */
        function exportDataFile() { 
            const b=new Blob([JSON.stringify(inventory)],{type:"application/json"}); 
            const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download=`wardrobe_backup_${Date.now()}.json`; a.click(); 
            say('click:export');
        }
        function importDataFile() {
            const f=document.getElementById('importFile').files[0]; if(!f)return;
            const r=new FileReader(); r.onload=e=>{ inventory=JSON.parse(e.target.result); updateDB(); alert("è¯»å–æˆåŠŸ"); say('click:import'); }; r.readAsText(f);
        }
        function copyToInput(id) { const item=inventory.find(x=>x.id===id); if(!item)return; document.getElementById('newName').value=item.name; document.getElementById('newCat').value=item.cat; document.getElementById('newPrice').value=item.price; document.getElementById('newColor').value=item.color; document.getElementById('sidebar').scrollTop=0; say('click:copy'); }
        function delItem(id) { if(confirm("åˆ é™¤?")){inventory=inventory.filter(x=>x.id!==id);updateDB(); say('click:delete'); } }
        function showDetail(img,rem) { const m=document.getElementById('imgModal'); document.getElementById('modalImg').src=img||''; document.getElementById('modalRemark').innerText=decodeURIComponent(rem); m.style.display='flex'; }
        function closeModal() { document.getElementById('imgModal').style.display='none'; }
        function renderRecentColors() { const c=document.getElementById('recentColorsBar'); c.innerHTML=''; recentColors.forEach(col=>{const d=document.createElement('div');d.className='color-chip';d.style.backgroundColor=col;d.onclick=()=>{document.getElementById('newColor').value=col; say('click:newColor');};c.appendChild(d);}); }
        function saveColorToHistory(c) { if(!recentColors.includes(c)) { recentColors.unshift(c); if(recentColors.length>6)recentColors.pop(); localStorage.setItem(COLOR_KEY,JSON.stringify(recentColors)); renderRecentColors(); } }
        function updateStorageInfo() { const u=(JSON.stringify(inventory).length*2/1048576).toFixed(2); document.getElementById('storageSize').innerText=u+"MB"; document.getElementById('storageFill').style.width=(u/5*100)+"%"; }
        function recordUpdateTime() { const n=new Date(); localStorage.setItem('wardrobe_last_update', `${n.getMonth()+1}/${n.getDate()} ${n.getHours()}:${n.getMinutes()}`); updateTimeDisplay(); }
        function updateTimeDisplay() { document.getElementById('lastUpdateTime').innerText=localStorage.getItem('wardrobe_last_update'); }
        function renderStats(s) { const b=document.getElementById('statsBoard'); b.innerHTML=`<div class="stat-card total" onclick="toggleCat(null)"><div class="stat-title">æ€»è®¡</div><div class="stat-val">Â¥${s['æ€»ä»·å€¼']}</div></div>`; for(let k in s)if(k!=='æ€»ä»·å€¼') b.innerHTML+=`<div class="stat-card" onclick="toggleCat('${k}')"><div class="stat-title">${k}</div><div class="stat-val">Â¥${s[k]}</div></div>`; }
        function toggleCat(c) { activeColorFilter=null; renderList(); say('click:sort');} 
        function renderFilterBar(cols) { const b=document.getElementById('filterBar'); b.innerHTML=''; cols.forEach(c=>{ const d=document.createElement('div'); d.className='filter-dot'; d.style.background=c; d.onclick=()=>{activeColorFilter=activeColorFilter===c?null:c;renderList();}; b.appendChild(d); }); }
        
        /* ä¸»é¢˜ä¸æ€§æ ¼ */
        function initTheme() { const t=localStorage.getItem(THEME_KEY)||'passion'; document.documentElement.setAttribute('data-theme',t); renderThemeBtns(t); syncPersona(t); }
        function renderThemeBtns(cur) { const g=document.getElementById('themeGroup'); g.innerHTML=''; themes.forEach(t=>{g.innerHTML+=`<div class="theme-btn ${cur===t.id?'active':''}" onclick="setTheme('${t.id}')">${t.icon}</div>`;}); }
        function setTheme(id) { localStorage.setItem(THEME_KEY,id); initTheme(); }
        function syncPersona(themeId) {
            // ç®€å•æ˜ å°„ï¼šç›®å‰æ‰€æœ‰ä¸»é¢˜éƒ½ä½¿ç”¨ normal æ€§æ ¼ï¼Œæ‚¨å¯ä»¥æ‰©å±• waifuQuotes æ¥æ”¯æŒæ›´å¤šæ€§æ ¼
            currentPersona = 'normal';
        }

        /* çœ‹æ¿å¨˜è§¦æ§ä¸å°è¯ç³»ç»Ÿ (å…³é”®ä»£ç ) */
        function initWaifu() {
            if(localStorage.getItem(WAIFU_KEY)==='false') return;
            L2Dwidget.init({ 
                "model": { "jsonPath": "https://unpkg.com/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json" }, 
                "display": { "position": "right", "width": 140, "height": 300, "hOffset": 0, "vOffset": -20 }, 
                "mobile": { "show": true, "scale": 0.5 }, 
                "react": { "opacityDefault": 1 } 
            });
            setTimeout(()=>{
                enableTouchDrag();
                say('welcome');
            }, 1000);
        }
        
        function initWaifuInteractions() { 
            // ç›‘å¬è¾“å…¥å˜åŒ–è§¦å‘è¯­éŸ³
            document.getElementById('newCat').addEventListener('change', function(){say(`click:newCat:${this.value}`)}); 
        }

        function toggleWaifu() { const c=document.getElementById('live2dcanvas'); if(c){ c.style.display=c.style.display==='none'?'block':'none'; localStorage.setItem(WAIFU_KEY,c.style.display!=='none'); if(c.style.display!=='none') say('welcome'); } }
        
        function enableTouchDrag() {
            const c = document.getElementById('live2dcanvas');
            if(!c) return;
            let isD = false, sX, sY, iL, iT;
            
            // é¼ æ ‡é€»è¾‘
            c.addEventListener('mousedown', e => { isD=true; sX=e.clientX; sY=e.clientY; const r=c.getBoundingClientRect(); iL=r.left; iT=r.top; say('drag'); });
            document.addEventListener('mousemove', e => { if(isD) { c.style.left=(iL+e.clientX-sX)+'px'; c.style.top=(iT+e.clientY-sY)+'px'; } });
            document.addEventListener('mouseup', () => isD=false);

            // è§¦å±é€»è¾‘ (iOSæ ¸å¿ƒä¼˜åŒ–)
            c.addEventListener('touchstart', e => {
                isD = true;
                sX = e.touches[0].clientX;
                sY = e.touches[0].clientY;
                const r = c.getBoundingClientRect();
                iL = r.left; iT = r.top;
                say('drag'); // è§¦æ‘¸å¼€å§‹è¯´è¯
            }, {passive: false});

            document.addEventListener('touchmove', e => {
                if(isD) {
                    e.preventDefault(); // ç¦æ­¢é¡µé¢æ»šåŠ¨
                    const dx = e.touches[0].clientX - sX;
                    const dy = e.touches[0].clientY - sY;
                    c.style.left = (iL + dx) + 'px';
                    c.style.top = (iT + dy) + 'px';
                }
            }, {passive: false});

            document.addEventListener('touchend', () => isD = false);
        }

        /* å°è¯è§¦å‘å™¨ */
        function say(key) { 
            const p = waifuQuotes[currentPersona] || waifuQuotes['normal']; 
            let l = null; 
            if(key === 'welcome'){ 
                const h=new Date().getHours(); 
                if(h>=5&&h<11) key='welcome:morning'; 
                else if(h>=11&&h<14) key='welcome:noon'; 
                else if(h>=14&&h<18) key='welcome:afternoon'; 
                else if(h>=18&&h<23) key='welcome:night'; 
                else key='welcome:midnight';
            }
            
            l = p[key]; 
            if(!l && key.includes(':')) l = p[key.split(':').slice(0,2).join(':')]; 
            if(!l && key.startsWith('click:newCat')) l = p["click:newCat:å…¶ä»–"]; 
            if(!l) return; 
            
            showWaifuText(l[Math.floor(Math.random()*l.length)]); 
        }

        let tipsTimer; 
        function showWaifuText(t) { 
            const tips=document.getElementById('waifuTips'), c=document.getElementById('live2dcanvas'); 
            if(!c||c.style.display==='none')return; 
            tips.innerHTML=t; 
            tips.classList.add('active'); 
            // ç®€å•å®šä½
            tips.style.top = (parseInt(c.style.top||0) - 50) + 'px';
            tips.style.left = (parseInt(c.style.left||0)) + 'px';
            
            clearTimeout(tipsTimer); 
            tipsTimer=setTimeout(()=>{tips.classList.remove('active')},4000); 
        }

        function openHelpModal() { document.getElementById('helpModal').style.display='flex'; }
        function closeHelpModal() { document.getElementById('helpModal').style.display='none'; }
        function closeStockModal() { document.getElementById('stockModal').style.display='none'; }
        function toggleBatchMode() { isBatchMode=!isBatchMode; document.getElementById('batchPanel').style.display=isBatchMode?'flex':'none'; renderList(); say('click:batch'); }
        function toggleSelect(id) { if(selectedIds.has(id))selectedIds.delete(id); else selectedIds.add(id); document.getElementById('selectCount').innerText=selectedIds.size; renderList(); }
        function selectAll() { const allIds = inventory.map(i=>i.id); if(selectedIds.size===allIds.length) selectedIds.clear(); else allIds.forEach(id=>selectedIds.add(id)); document.getElementById('selectCount').innerText=selectedIds.size; renderList(); }
        function deleteSelected() { if(selectedIds.size>0 && confirm("ç¡®å®šåˆ é™¤?")) { inventory=inventory.filter(i=>!selectedIds.has(i.id)); selectedIds.clear(); toggleBatchMode(); updateDB(); say('click:delete'); } }
        function confirmStockAdd() {
            const id=parseInt(document.getElementById('stockId').value), item=inventory.find(x=>x.id===id), q=parseInt(document.getElementById('addQty').value), s=document.getElementById('addSize').value;
            if(item && q>0) {
                if(s) { if(!item.sizeNew) item.sizeNew={}; item.sizeNew[s]=(item.sizeNew[s]||0)+q; }
                item.newQty+=q; updateDB(); closeStockModal(); say('click:save');
            }
        }
    </script>
</body>
</html>
