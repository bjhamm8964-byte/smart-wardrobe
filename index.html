<!DOCTYPE html>
<html lang="zh-CN" data-theme="passion">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æˆ‘çš„è—å®ç®± V9.2 </title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="./icon.png">
    
    <script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js"></script>

    <style>
        #lockScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--bg-body);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #000 100%); 
        }
        #lockScreen.unlocked {
            transform: translateY(-100%) scale(0.9);
            opacity: 0;
            pointer-events: none;
        }
        .lock-box {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border-radius: 16px;
            border: 1px solid rgba(197, 160, 89, 0.3);
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            text-align: center;
            width: 85%;
            max-width: 320px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .lock-avatar {
            font-size: 48px;
            margin-top: -10px;
            filter: drop-shadow(0 0 10px var(--accent));
        }
        .lock-title {
            color: var(--accent);
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        .lock-input {
            width: 100%;
            height: 48px;
            padding: 0 15px;
            font-size: 16px;
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--accent);
            outline: none;
            transition: all 0.3s ease;
            box-sizing: border-box;
            letter-spacing: 2px;
        }
        .lock-input::placeholder { color: rgba(255, 255, 255, 0.3); letter-spacing: 1px; font-size: 14px; }
        .lock-input:focus { border-color: var(--accent); box-shadow: 0 0 15px var(--select-overlay); background: rgba(0, 0, 0, 0.6); }
        .btn-unlock {
            width: 100%;
            height: 48px;
            background: var(--accent);
            color: #121212;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 800;
            cursor: pointer;
            transition: transform 0.1s, filter 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            letter-spacing: 4px;
            text-indent: 4px;
        }
        .btn-unlock:hover { filter: brightness(1.1); }
        .btn-unlock:active { transform: scale(0.98); }
        #passMsg { color: #ff4d4d; font-size: 13px; min-height: 20px; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
	
        /* =========================================
           æ ¸å¿ƒå˜é‡ç³»ç»Ÿ
        ========================================= */
        :root {
            --bg-body: #121212; --bg-panel: #1e1e1e; --text-main: #fffff0; --text-sub: #aaa;
            --border: #800020; --accent: #c5a059; --btn-bg: #800020; --btn-text: #fff;
            --highlight-bg: #2a1a1a; --shadow: rgba(0, 0, 0, 0.5);
            --scroll-btn-bg: rgba(30, 30, 30, 0.9); --progress-bg: #333; --progress-fill: #2e7d32;
            --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.4);
            --select-overlay: rgba(197, 160, 89, 0.2); --select-border: #c5a059;
        }
        [data-theme="passion"] { --bg-body: #121212; --bg-panel: #1e1e1e; --text-main: #fffff0; --text-sub: #aaa; --border: #800020; --accent: #c5a059; --btn-bg: #800020; --btn-text: #fff; --highlight-bg: #2a1a1a; --shadow: rgba(0, 0, 0, 0.5); --scroll-btn-bg: rgba(30, 30, 30, 0.9); --progress-bg: #333; --progress-fill: #c5a059; --select-overlay: rgba(197, 160, 89, 0.2); --select-border: #c5a059; }
        [data-theme="ladies"] { --bg-body: #f9f7f2; --bg-panel: #ffffff; --text-main: #4a4a4a; --text-sub: #999; --border: #dba4a4; --accent: #d4af37; --btn-bg: #dba4a4; --btn-text: #fff; --highlight-bg: #fff0f5; --shadow: rgba(219, 164, 164, 0.15); --scroll-btn-bg: rgba(255, 255, 255, 0.9); --progress-bg: #eee; --progress-fill: #dba4a4; --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.25); --select-overlay: rgba(212, 175, 55, 0.1); --select-border: #d4af37; }
        [data-theme="men"] { --bg-body: #0b1a2f; --bg-panel: #172a45; --text-main: #e6f1ff; --text-sub: #8892b0; --border: #4b5563; --accent: #a8b2d1; --btn-bg: #334155; --btn-text: #fff; --highlight-bg: #1c3557; --shadow: rgba(0, 0, 0, 0.3); --scroll-btn-bg: rgba(23, 42, 69, 0.9); --progress-bg: #0f1f3a; --progress-fill: #4a90e2; --select-overlay: rgba(74, 144, 226, 0.2); --select-border: #4a90e2; }
        [data-theme="gacha"] { --bg-body: #1a0b2e; --bg-panel: #26143c; --text-main: #ffffff; --text-sub: #ccc; --border: #ffd700; --accent: #50c878; --btn-bg: #4b0082; --btn-text: #fff; --highlight-bg: #351c52; --shadow: rgba(255, 215, 0, 0.15); --scroll-btn-bg: rgba(38, 20, 60, 0.9); --progress-bg: #111; --progress-fill: #50c878; --select-overlay: rgba(80, 200, 120, 0.2); --select-border: #50c878; }
        [data-theme="daily"] { --bg-body: #f0f2f5; --bg-panel: #ffffff; --text-main: #333333; --text-sub: #666; --border: #e0e0e0; --accent: #4a90e2; --btn-bg: #4a90e2; --btn-text: #fff; --highlight-bg: #eef6ff; --shadow: rgba(0, 0, 0, 0.05); --scroll-btn-bg: rgba(255, 255, 255, 0.9); --progress-bg: #eee; --progress-fill: #4a90e2; --select-overlay: rgba(74, 144, 226, 0.1); --select-border: #4a90e2;}
        [data-theme="night"] { --bg-body: #000000; --bg-panel: #111111; --text-main: #e0e0e0; --text-sub: #888; --border: #ff007f; --accent: #9d00ff; --btn-bg: #ff007f; --btn-text: #fff; --highlight-bg: #220011; --shadow: rgba(255, 0, 127, 0.2); --scroll-btn-bg: rgba(17, 17, 17, 0.9); --progress-bg: #222; --progress-fill: #ff007f; --select-overlay: rgba(255, 0, 127, 0.2); --select-border: #ff007f;}
        [data-theme="wood"] { --bg-body: #e8dcc5; --bg-panel: #fdfbf7; --text-main: #5d4037; --text-sub: #8d6e63; --border: #a1887f; --accent: #d4a017; --btn-bg: #6d4c41; --btn-text: #fff; --highlight-bg: #fff8e1; --shadow: rgba(93, 64, 55, 0.1); --scroll-btn-bg: rgba(253, 251, 247, 0.9); --progress-bg: #d7ccc8; --progress-fill: #8d6e63; --badge-bg: rgba(0, 0, 0, 0.3); --select-overlay: rgba(212, 160, 23, 0.1); --select-border: #d4a017;}
        [data-theme="jirai"] { --bg-body: #fff0f5; --bg-panel: #ffffff; --text-main: #000000; --text-sub: #666666; --border: #000000; --accent: #ff007f; --btn-bg: #000000; --btn-text: #ff007f; --highlight-bg: #fff5fa; --shadow: rgba(255, 0, 127, 0.2); --scroll-btn-bg: rgba(255, 255, 255, 0.9); --progress-bg: #e0e0e0; --progress-fill: #ff007f; --badge-text: #fff; --badge-bg: rgba(0, 0, 0, 0.8); --select-overlay: rgba(255, 0, 127, 0.1); --select-border: #ff007f; }

        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; padding: 10px; background-color: var(--bg-body); color: var(--text-main); background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px); background-size: 20px 20px; transition: background 0.3s ease, color 0.3s ease; -webkit-text-size-adjust: 100%; }
        .main-wrapper { display: block; padding-bottom: 50px;}
        @media (min-width: 768px) {
            body { padding: 20px 30px; }
            .main-wrapper { display: flex; align-items: flex-start; gap: 30px; width: 96%; max-width: 1920px; margin: 0 auto; padding-bottom: 0; }
            .layout-sidebar { width: 25vw; min-width: 320px; max-width: 450px; flex-shrink: 0; position: sticky; top: 20px; max-height: calc(100dvh - 40px); overflow-y: auto; -webkit-overflow-scrolling: touch; padding-bottom: env(safe-area-inset-bottom, 20px); display: flex; flex-direction: column; scrollbar-width: none; }
            .layout-sidebar::-webkit-scrollbar { display: none; }
            .layout-content { flex: 1; min-width: 0; }
        }
        .wood-panel { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px var(--shadow); transition: all 0.3s ease; }
        
        .storage-bar-area { margin-bottom: 10px; padding: 0 5px; }
        .storage-text { display: flex; justify-content: space-between; font-size: 11px; color: var(--text-sub); margin-bottom: 4px; }
        .storage-track { width: 100%; height: 6px; background: var(--progress-bg); border-radius: 3px; overflow: hidden; }
        .storage-fill { height: 100%; width: 0%; background: var(--progress-fill); transition: width 0.5s ease; }
        .time-dashboard { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin-bottom: 15px; text-align: center; box-shadow: 0 2px 5px var(--shadow); }
        .time-label { font-size: 12px; color: var(--text-sub); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px;}
        .time-value { font-size: 20px; font-weight: bold; color: var(--accent); font-family: monospace; letter-spacing: 0.5px; }
        
        .file-tag { font-size: 12px; background: var(--accent); color: var(--bg-panel); padding: 2px 8px; border-radius: 4px; margin-right: 8px; vertical-align: middle; font-weight: bold; display: none; box-shadow: 0 2px 4px var(--shadow); max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .stats-wrapper { position: relative; display: flex; align-items: center; }
        .stats-container { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; scroll-behavior: smooth; width: 100%; }
        .stats-container::-webkit-scrollbar { display: none; }
        .scroll-arrow { position: absolute; top: 50%; transform: translateY(-50%); width: 28px; height: 28px; border-radius: 50%; background: var(--scroll-btn-bg); border: 1px solid var(--border); color: var(--text-main); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; box-shadow: 0 2px 5px rgba(0,0,0,0.3); user-select: none; opacity: 0; transition: opacity 0.2s, transform 0.2s; pointer-events: none; }
        .stats-wrapper:hover .scroll-arrow { opacity: 1; pointer-events: auto; }
        .scroll-arrow:hover { transform: translateY(-50%) scale(1.1); background: var(--btn-bg); color: var(--btn-text);}
        .scroll-arrow.left { left: -10px; } .scroll-arrow.right { right: -10px; }
        .stat-card { min-width: 110px; background: var(--bg-panel); padding: 12px; border-radius: 10px; border: 2px solid transparent; display: flex; flex-direction: column; flex-shrink: 0; cursor: pointer; transition: all 0.2s; position: relative; color: var(--text-main); box-shadow: 0 2px 4px var(--shadow); }
        .stat-card:hover { transform: translateY(-2px); border-color: var(--border); }
        .stat-card.active { border-color: var(--accent); background-color: var(--highlight-bg); }
        .stat-card.active::after { content: 'â—'; color: var(--accent); position: absolute; top: 5px; right: 8px; font-size: 12px; }
        .stat-card.total { background: var(--btn-bg); color: var(--btn-text); border-color: var(--btn-bg); }
        .stat-title { font-size: 12px; opacity: 0.8; margin-bottom: 5px; font-weight: bold;}
        .stat-val { font-size: 18px; font-weight: bold; }

        .input-group { margin-bottom: 15px; }
        input[type="text"], input[type="number"], select, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-panel); outline: none; box-sizing: border-box; color: var(--text-main); font-size: 14px; }
        input:focus, textarea:focus { border-color: var(--accent); }
        textarea.remark-input { height: 60px; resize: none; font-size: 13px; margin-top: 5px; }
        .color-picker-area { display: flex; align-items: center; gap: 10px; margin-bottom: 10px;}
        input[type="color"] { width: 45px; height: 45px; border: none; background: none; cursor: pointer; padding: 0; }
        .recent-colors { display: flex; gap: 8px; flex-wrap: wrap; }
        .color-chip { width: 28px; height: 28px; border-radius: 50%; border: 2px solid rgba(128,128,128,0.2); cursor: pointer; transition: transform 0.2s; box-shadow: 0 1px 3px var(--shadow); }
        .file-upload-box { position: relative; width: 100%; height: 90px; border: 2px dashed var(--border); border-radius: 8px; background: rgba(128,128,128,0.05); display: flex; align-items: center; justify-content: center; flex-direction: column; color: var(--text-sub); cursor: pointer; overflow: hidden; }
        .file-upload-box input[type="file"] { position: absolute; width: 100%; height: 100%; opacity: 0; cursor: pointer; top:0; left:0; }
        #fileNameDisplay { font-size: 12px; color: var(--accent); margin-top: 5px; font-weight: bold; display: none;}
        .btn-main { width: 100%; padding: 14px; border: none; border-radius: 8px; background: var(--btn-bg); color: var(--btn-text); font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 4px 0 rgba(0,0,0,0.2); transition: transform 0.1s; }
        .btn-main:active { transform: translateY(3px); box-shadow: none; }
        
        .theme-switcher-area { margin-top: 10px; padding-top: 15px; border-top: 1px solid var(--border); }
        .theme-title { font-size: 12px; color: var(--text-sub); margin-bottom: 10px; font-weight: bold; }
        .theme-btn-group { display: flex; gap: 12px; flex-wrap: wrap; justify-content: flex-start; }
        .theme-btn { width: 36px; height: 36px; border-radius: 8px; cursor: pointer; background: var(--bg-panel); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 20px; transition: transform 0.2s, background 0.2s; user-select: none; }
        .theme-btn:hover { transform: scale(1.1); background: var(--highlight-bg); }
        .theme-btn.active { background: var(--btn-bg); border-color: var(--btn-bg); transform: scale(1.1); box-shadow: 0 2px 8px var(--shadow); }
        .btn-waifu-toggle { margin-top: 10px; width: 100%; padding: 10px; background: var(--bg-panel); border: 1px solid var(--border); color: var(--text-sub); border-radius: 8px; cursor: pointer; font-size: 13px; transition: all 0.2s; }
        .btn-waifu-toggle:hover { color: var(--accent); border-color: var(--accent); }

        .filter-sticky { position: sticky; top: 0; z-index: 10; background: var(--bg-body); padding-top: 5px; margin-bottom: 20px; transition: background 0.3s;}
        .search-input { width: 100%; padding: 12px 15px; border: 1px solid var(--border); border-radius: 25px; font-size: 15px; box-shadow: 0 2px 5px var(--shadow); background: var(--bg-panel); color: var(--text-main);}
        .filter-controls { display: flex; gap: 10px; margin-top: 10px; align-items: center; }
        .sort-select { flex: 1; padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-panel); color: var(--text-main); font-size: 13px; outline: none; }
        .view-toggle-btn { width: 36px; height: 36px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-panel); color: var(--accent); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; }
        .filter-color-bar { display: flex; gap: 10px; overflow-x: auto; margin-top: 10px; padding-bottom: 5px; scrollbar-width: none;}
        .filter-dot { width: 32px; height: 32px; border-radius: 50%; border: 3px solid var(--bg-panel); box-shadow: 0 2px 4px var(--shadow); flex-shrink: 0; cursor: pointer; position: relative; }
        .filter-dot.active { border-color: var(--text-main); transform: scale(1.1); }
        .filter-dot.active::after { content: 'âœ“'; position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); color: #fff; text-shadow: 0 0 3px #000; font-weight: bold;}

        .masonry-grid { column-count: 2; column-gap: 20px; transition: opacity 0.3s; }
        @media (min-width: 900px) { .masonry-grid { column-count: 3; } }
        @media (min-width: 1400px) { .masonry-grid { column-count: 4; } }
        @media (min-width: 1800px) { .masonry-grid { column-count: 5; } }
        .masonry-grid.view-list { column-count: 1 !important; display: flex; flex-direction: column; gap: 10px; }

        .polaroid-card { background: var(--bg-panel); border-radius: 8px; margin-bottom: 20px; break-inside: avoid; box-shadow: 0 4px 8px var(--shadow); overflow: hidden; transform: translateZ(0); border: 1px solid var(--border); transition: transform 0.2s; color: var(--text-main); position: relative;}
        .polaroid-card:hover { transform: translateY(-3px); box-shadow: 0 8px 16px var(--shadow); border-color: var(--accent); }
        .polaroid-card.is-selected { border: 2px solid var(--select-border); transform: scale(0.98); }
        .polaroid-card.is-selected .card-img-area::after { content: 'âœ“'; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--select-overlay); display: flex; align-items: center; justify-content: center; font-size: 40px; color: var(--select-border); font-weight: bold; text-shadow: 0 2px 5px rgba(0,0,0,0.5); backdrop-filter: blur(2px); }

        .card-img-area { width: 100%; position: relative; background: rgba(128,128,128,0.05); min-height: 120px; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: pointer;}
        .card-img { width: 100%; display: block; height: auto; transition: transform 0.3s;}
        .no-img-label { font-size: 13px; color: var(--text-sub); letter-spacing: 1px;}
        .total-badge { position: absolute; top: 10px; left: 12px; z-index: 3; font-family: "Impact", sans-serif; font-size: 24px; font-weight: 900; color: var(--badge-text); background: var(--badge-bg); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); padding: 2px 8px; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); pointer-events: none; letter-spacing: 1px; }

        .masonry-grid.view-list .polaroid-card { display: flex; flex-direction: row; align-items: center; margin-bottom: 0; padding: 5px; height: 80px; }
        .masonry-grid.view-list .card-img-area { width: 70px; height: 70px; min-height: 70px; border-radius: 4px; margin-right: 10px; flex-shrink: 0; }
        .masonry-grid.view-list .card-img { height: 100%; width: 100%; object-fit: cover; }
        .masonry-grid.view-list .card-info { padding: 0; flex: 1; display: flex; align-items: center; justify-content: space-between; }
        .masonry-grid.view-list .card-header { margin-bottom: 0; flex-direction: column; justify-content: center; align-items: flex-start; }
        .masonry-grid.view-list .card-title { font-size: 14px; margin-bottom: 2px; }
        .masonry-grid.view-list .card-meta { margin-bottom: 0; font-size: 12px; }
        .masonry-grid.view-list .stock-row { display: inline-flex; padding: 2px 5px; margin-top: 0; margin-left: 10px; }
        .masonry-grid.view-list .stock-label { display: none; }
        .masonry-grid.view-list .btn-del, .masonry-grid.view-list .btn-edit, .masonry-grid.view-list .btn-copy { position: static; margin-left: 5px; width: 24px; height: 24px; font-size: 12px; background: var(--bg-panel); color: var(--text-sub); border: 1px solid var(--border); opacity: 1; }
        .masonry-grid.view-list .total-badge { font-size: 14px; top: 2px; left: 2px; }

        .card-info { padding: 15px; }
        .card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px; }
        .card-title { font-weight: bold; font-size: 16px; line-height: 1.3; }
        .color-badge { width: 16px; height: 16px; border-radius: 50%; border: 1px solid var(--border); flex-shrink: 0; margin-top: 3px; }
        .card-meta { display: flex; justify-content: space-between; font-size: 13px; color: var(--text-sub); margin-bottom: 12px; }
        .price-tag { color: var(--accent); font-weight: bold; font-size: 15px; }
        .stock-row { display: flex; align-items: center; justify-content: space-between; background: rgba(128,128,128,0.05); padding: 8px 10px; border-radius: 8px; margin-top: 8px; }
        .stock-label { font-size: 13px; color: var(--text-sub); font-weight: bold; display: flex; align-items: center; gap: 4px;}
        .big-num { font-size: 24px; font-weight: 800; min-width: 40px; text-align: center; font-family: "Impact", sans-serif; line-height: 1; }
        .num-new { color: #2e7d32; } .num-used { color: #d84315; }
        [data-theme="passion"] .num-new, [data-theme="gacha"] .num-new, [data-theme="men"] .num-new, [data-theme="night"] .num-new, [data-theme="jirai"] .num-new { color: var(--accent); }
        [data-theme="passion"] .num-used, [data-theme="gacha"] .num-used, [data-theme="men"] .num-used, [data-theme="night"] .num-used, [data-theme="jirai"] .num-used { color: #fff; opacity: 0.7; }
        .stock-ctrl { display: flex; align-items: center; gap: 5px; }
        .btn-mini { width: 32px; height: 32px; border-radius: 6px; background: var(--bg-panel); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; color: var(--text-main); user-select: none; font-weight: bold; box-shadow: 0 2px 0 rgba(0,0,0,0.1); }
        .btn-mini:active { transform: translateY(2px); box-shadow: none; }
        
        .btn-del { position: absolute; top: 8px; right: 42px; width: 30px; height: 30px; background: rgba(0,0,0,0.6); color: white; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s; cursor: pointer; z-index: 2; font-size: 18px; }
        .btn-copy { position: absolute; top: 8px; right: 8px; width: 30px; height: 30px; background: rgba(0,0,0,0.6); color: white; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s; cursor: pointer; z-index: 2; font-size: 16px; }
        .btn-edit { position: absolute; top: 8px; right: 76px; width: 30px; height: 30px; background: rgba(0,0,0,0.6); color: white; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s; cursor: pointer; z-index: 2; font-size: 14px; }
        .polaroid-card:hover .btn-del, .polaroid-card:hover .btn-edit, .polaroid-card:hover .btn-copy { opacity: 1; }

        .batch-actions { display: flex; gap: 10px; margin-bottom: 15px; padding: 10px; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; align-items: center; justify-content: space-between; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .btn-batch-toggle { width: 100%; padding: 10px; margin-bottom: 10px; background: transparent; border: 1px dashed var(--accent); color: var(--accent); border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; transition: all 0.2s; }
        .btn-batch-toggle:hover { background: rgba(197, 160, 89, 0.1); }
        .btn-batch-toggle.active { background: var(--accent); color: var(--bg-panel); border-style: solid; }
        .btn-danger { background: #d32f2f; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 13px;}
        .btn-normal { background: transparent; border: 1px solid var(--text-sub); color: var(--text-main); padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 13px;}
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; justify-content: center; align-items: center; flex-direction: column; padding: 20px; box-sizing: border-box;}
        #modalImg { max-width: 100%; max-height: 70vh; border: 2px solid rgba(255,255,255,0.2); border-radius: 4px; box-shadow: 0 0 30px rgba(0,0,0,0.8); object-fit: contain;}
        #modalRemark { margin-top: 20px; color: #fff; font-size: 20px; font-weight: bold; text-align: center; max-width: 600px; line-height: 1.6; text-shadow: 0 2px 4px rgba(0,0,0,0.8); overflow-y: auto; max-height: 20vh;}
        .modal-close-tip { color: rgba(255,255,255,0.5); font-size: 12px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.3); padding: 5px 15px; border-radius: 20px; cursor: pointer;}
        .stock-modal-content { background: var(--bg-panel); width: 85%; max-width: 350px; padding: 20px; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.5); color: var(--text-main); }
        .stock-summary { margin: 15px 0; padding: 10px; background: rgba(128,128,128,0.1); border-radius: 8px; font-size: 13px; }
        .stock-summary div { margin-bottom: 5px; display: flex; justify-content: space-between; }
        .highlight-val { color: var(--accent); font-weight: bold; }
        .edit-modal-content { background: var(--bg-panel); width: 90%; max-width: 400px; padding: 20px; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-height: 90vh; overflow-y: auto; color: var(--text-main); }
        .edit-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px;}
        .edit-title { font-size: 18px; font-weight: bold; color: var(--accent); }
        .btn-close-edit { background: none; border: none; font-size: 24px; color: var(--text-sub); cursor: pointer; }
        #live2dcanvas { border: none !important; pointer-events: auto; cursor: grab; transition: none !important; }
        #live2dcanvas:active { cursor: grabbing; }
        .waifu-tips { position: fixed; opacity: 0; transition: opacity 0.3s; background: rgba(255, 255, 255, 0.95); color: #333; border: 2px solid var(--accent); border-radius: 12px; padding: 12px 15px; font-size: 14px; line-height: 1.5; box-shadow: 0 5px 15px rgba(0,0,0,0.2); pointer-events: none; z-index: 9999; width: 200px; text-align: center; top: 0; left: 0; }
        .waifu-tips::after { content: ''; position: absolute; bottom: -8px; left: 20px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid var(--accent); }
        .waifu-tips.active { opacity: 1; }
        .help-icon { display: inline-block; width: 18px; height: 18px; border-radius: 50%; background: var(--accent); color: var(--bg-panel); text-align: center; line-height: 18px; font-size: 12px; margin-left: 8px; cursor: help; user-select: none; }
        .help-content { text-align: left; font-size: 14px; line-height: 1.6; color: var(--text-main); }
        .help-content h4 { color: var(--accent); margin: 10px 0 5px 0; font-size: 15px; border-bottom: 1px dashed var(--border); padding-bottom: 3px; }
        .help-content p { margin: 0 0 10px 0; color: var(--text-sub); }
        .help-content b { color: var(--text-main); }
        
        .size-tags-container { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
        .size-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: rgba(128,128,128,0.1); border: 1px solid var(--border); color: var(--text-sub); user-select: none; }
        .size-tag b { color: var(--accent); }
        
        .edit-size-row { display: flex; justify-content: space-between; align-items: center; background: var(--bg-body); padding: 5px 10px; margin-bottom: 5px; border-radius: 4px; border: 1px solid var(--border); }
        .edit-size-row span { font-weight: bold; }
        .edit-size-row input { width: 50px; padding: 4px; font-size: 12px; text-align: center; margin: 0 10px; background: var(--bg-panel); color: var(--text-main); border: 1px solid var(--border); border-radius: 4px; }
        .btn-x { background: none; border: none; color: #d32f2f; cursor: pointer; font-weight: bold; padding: 5px; }
    </style>
</head>
<body>

<div id="lockScreen">
        <div class="lock-box">
            <div class="lock-avatar">ğŸ”</div>
            <div class="lock-title">ç§äººè—å®ç®±</div>
            <input type="password" id="passInput" class="lock-input" placeholder="è¯·è¾“å…¥å¯†ç " maxlength="20">
            <button class="btn-unlock" onclick="checkPassword()">è§£ é”</button>
            <div id="passMsg" style="color: #d32f2f; font-size: 12px; margin-top: 10px; min-height: 18px;"></div>
        </div>
    </div>

    <div class="main-wrapper">
        <div class="layout-sidebar" id="sidebar">
            <h2 style="margin: 0 0 10px 0; font-size: 22px; display: flex; align-items: center; flex-wrap: wrap;">
                <span id="currentFileTag" class="file-tag"></span>
                <span style="display:flex; align-items:center; gap:10px;">ğŸ“œ <span>æˆ‘çš„è—å®ç®±</span></span>
            </h2>
            <div class="storage-bar-area">
                <div class="storage-text"><span>ğŸ“¦ ç©ºé—´: æ— é™ (IndexedDB)</span></div>
            </div>
            <div class="time-dashboard">
                <div class="time-label">ğŸ“… æœ€è¿‘æ›´æ–°æ—¶é—´</div>
                <div class="time-value" id="lastUpdateTime">--/-- --:--</div>
            </div>
            <button class="btn-batch-toggle" id="btnBatchMode" onclick="toggleBatchMode()">âœ¨ æ‰¹é‡ç®¡ç†</button>
            <div id="batchPanel" class="batch-actions" style="display: none;">
                <button class="btn-normal" onclick="selectAll()">å…¨é€‰</button>
                <span style="font-size:12px; font-weight:bold;">å·²é€‰: <span id="selectCount">0</span></span>
                <button class="btn-danger" onclick="deleteSelected()">ğŸ—‘ï¸ åˆ é™¤</button>
            </div>
            <div class="stats-wrapper" id="statsWrapper">
                <div class="scroll-arrow left" onclick="scrollStats(-150)">â€¹</div>
                <div class="stats-container wood-panel" id="statsBoard" style="padding:15px; margin-bottom:20px;"></div>
                <div class="scroll-arrow right" onclick="scrollStats(150)">â€º</div>
            </div>
            
            <div class="wood-panel">
                <h3 style="margin:0 0 15px 0; font-size: 16px; color: var(--accent);">
                    ğŸ“¥ å­˜å…¥å®ç‰©
                    <span class="help-icon" onclick="openHelpModal()" title="ä½¿ç”¨è¯´æ˜">?</span>
                </h3>
                
                <div class="input-group">
                    <select id="newCat">
                        <option value="æœè£…">ğŸ‘” æœè£…</option>
                        <option value="é‹é´">ğŸ‘  é‹é´</option>
                        <option value="åŒ–å¦†å“">ğŸ’„ åŒ–å¦†å“</option>
                        <option value="è¢œå­">ğŸ§¦ è¢œå­</option>
                        <option value="é…é¥°">ğŸ§¢ é…é¥°</option>
                        <option value="å…¶ä»–">ğŸ“¦ å…¶ä»–</option>
                        <option value="æ‰‹åŠ">ğŸ§œâ€â™€ï¸ æ‰‹åŠ</option>
                        <option value="æ•°ç ">ğŸ“· æ•°ç </option>
                    </select>
                </div>
                
                <div class="input-group">
                    <div class="color-picker-area">
                        <input type="color" id="newColor" value="#5d4037" title="ç‚¹å‡»é€‰è‰²">
                        <span style="font-size:13px; color:var(--text-sub);">é€‰è‰²:</span>
                    </div>
                    <div class="recent-colors" id="recentColorsBar"></div>
                </div>
                
                <div class="input-group">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="newPrice" placeholder="å•ä»· (å…ƒ)" style="flex:1;">
                        <button class="btn-mini" onclick="toggleCalc()" title="æ‰“å¼€è®¡ç®—å™¨" style="width: 40px;">â—</button>
                    </div>
                    <div id="priceCalcArea" style="display:none; background:rgba(128,128,128,0.1); padding:10px; margin-top:5px; border-radius:8px;">
                        <div style="display:flex; gap:5px; margin-bottom:5px;">
                            <input type="number" id="calcTotal" placeholder="æ€»ä»·" oninput="calcAvg()">
                            <span style="align-self:center;">Ã·</span>
                            <input type="number" id="calcCount" placeholder="ä»¶æ•°" oninput="calcAvg()">
                        </div>
                        <div style="font-size:12px; color:var(--accent); font-weight:bold;">
                            = å•ä»·: <span id="calcResult">0</span>
                        </div>
                    </div>
                </div>

                <div class="input-group" style="display: flex; gap: 10px; align-items: center;">
                    <div style="flex:1;">
                        <span style="font-size:12px; color:var(--text-sub);">å°ºç (é€‰å¡«):</span>
                        <input type="text" id="newSize" placeholder="å¦‚: 42, L" style="width:100%;">
                    </div>
                    <div style="flex:1;">
                        <span style="font-size:12px; color:var(--text-sub);">æ•°é‡:</span>
                        <input type="number" id="newQty" value="1" min="1" style="width:100%;">
                    </div>
                </div>
                
                <div class="input-group" style="margin-top:-10px; margin-bottom:10px;">
                    <div style="display:flex; align-items:center; gap:5px; cursor:pointer;" onclick="toggleLock()">
                        <input type="checkbox" id="lockPrice">
                        <span style="font-size:12px;">ğŸ”’ é”å®šä»·æ ¼</span>
                    </div>
                </div>

                <div class="input-group"><input type="text" id="newName" placeholder="ç‰©å“åç§°"></div>
                <div class="input-group"><textarea id="newRemark" class="remark-input" placeholder="ğŸ“ å¡«å†™å¤‡æ³¨..."></textarea></div>
                <div class="input-group">
                    <label class="file-upload-box">
                        <input type="file" id="newImg" accept="image/*" onchange="previewFile('newImg', 'fileNameDisplay')">
                        <div class="upload-icon">ğŸ“¸</div>
                        <div class="upload-text">ç‚¹å‡»ä¸Šä¼ ç…§ç‰‡</div>
                        <div id="fileNameDisplay"></div>
                    </label>
                </div>
                <button class="btn-main" onclick="addItem()">ä¿å­˜å…¥åº“</button>
            </div>

            <div class="data-tools">
                <div style="font-size:13px; margin-bottom:8px; font-weight:bold;">ğŸ’¾ æ•°æ®å¤‡ä»½ (æ–‡ä»¶)</div>
                <input type="file" id="importFile" accept=".json" style="width:100%; margin-bottom:10px; font-size:12px; color:var(--text-sub);">
                <div class="btn-group">
                    <button class="btn-sub" onclick="exportDataFile()">ğŸ“¤ ä¸‹è½½å¤‡ä»½.json</button>
                    <button class="btn-sub" onclick="importDataFile()">ğŸ“¥ è¯»å–å¤‡ä»½æ–‡ä»¶</button>
                </div>
            </div>
            
            <div class="theme-switcher-area">
                <div class="theme-title">ğŸ¨ ç•Œé¢é£æ ¼</div>
                <div class="theme-btn-group" id="themeGroup"></div>
                <button class="btn-waifu-toggle" onclick="toggleWaifu()">ğŸ‘ï¸ å¬å”¤/éšè—çœ‹æ¿å¨˜</button>
            </div>
            <div style="height: 20px;"></div>
        </div>
        <div class="layout-content">
            <div class="filter-sticky">
                <input type="text" class="search-input" id="searchBox" placeholder="ğŸ” æœç´¢..." oninput="renderList()">
                <div class="filter-controls">
                    <select id="sortSelect" class="sort-select" onchange="renderList()">
                        <option value="dateDesc">ğŸ“… æ·»åŠ æ—¥æœŸ (æ–°â†’æ—§)</option>
                        <option value="dateAsc">ğŸ“… æ·»åŠ æ—¥æœŸ (æ—§â†’æ–°)</option>
                        <option value="priceDesc">ğŸ’° ä»·æ ¼ (é«˜â†’ä½)</option>
                        <option value="priceAsc">ğŸ’° ä»·æ ¼ (ä½â†’é«˜)</option>
                        <option value="nameAsc">ğŸ”¤ åç§° (A-Z)</option>
                    </select>
                    <div class="view-toggle-btn" onclick="toggleViewMode()" title="åˆ‡æ¢è§†å›¾">
                        <span id="viewIcon">ğŸ–¼ï¸</span>
                    </div>
                </div>
                <div class="filter-color-bar" id="filterBar"></div>
            </div>
            <div class="masonry-grid" id="itemList"></div>
        </div>
    </div>

    <div id="imgModal" class="modal-overlay" onclick="closeModal()">
        <img id="modalImg" src="">
        <div id="modalRemark"></div>
        <div class="modal-close-tip">ç‚¹å‡»ä»»æ„å¤„å…³é—­</div>
    </div>
    
    <div id="helpModal" class="modal-overlay" style="z-index: 105;">
        <div class="edit-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header">
                <div class="edit-title">ğŸ“˜ ä½¿ç”¨è¯´æ˜ä¹¦</div>
                <button class="btn-close-edit" onclick="closeHelpModal()">Ã—</button>
            </div>
            <div class="help-content">
                <h4>1. å°ºç çŸ©é˜µ (æ–°!)</h4>
                <p>å½•å…¥æ—¶å¡«å†™å°ºç ï¼ˆå¦‚ L, 42ç ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å½’ç±»ã€‚ç‚¹å‡»å¡ç‰‡ä¸Šçš„ <b>+</b> å·è¡¥è´§æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå°ºç ï¼Œåº“å­˜ä¼šè‡ªåŠ¨åˆå¹¶ã€‚</p>
                <h4>2. ç¼–è¾‘å°ºç  (æœ€æ–°!)</h4>
                <p>ç‚¹å‡» <b>âœï¸ ç¼–è¾‘</b> æŒ‰é’®ï¼Œç°åœ¨å¯ä»¥ç®¡ç†å·²æœ‰çš„å°ºç åº“å­˜äº†ï¼æ”¯æŒä¿®æ”¹æ•°é‡ã€åˆ é™¤æ—§å°ºç ã€æ·»åŠ æ¼è®°çš„æ–°å°ºç ã€‚</p>
                <h4>3. å­˜æ¡£è®°å¿† (å¢å¼º!)</h4>
                <p>ä¸‹è½½å¤‡ä»½æ—¶ä¼šè‡ªåŠ¨è®°å½•å½“å‰æ—¶é—´ã€‚ä¸‹æ¬¡è¯»å–è¯¥å¤‡ä»½ï¼Œå·¦ä¸Šè§’ä¼šæ˜¾ç¤ºæ–‡ä»¶åï¼Œå¹¶æ¢å¤å½“æ—¶çš„â€œæœ€åæ›´æ–°æ—¶é—´â€ã€‚</p>
                <h4>4. è§†å›¾ä¸æ’åº</h4>
                <p>ç‚¹å‡»æœç´¢æ å³ä¾§çš„ ğŸ–¼ï¸/ğŸ“ æŒ‰é’®å¯åˆ‡æ¢â€œå›¾ç‰‡ç€‘å¸ƒæµâ€æˆ–â€œç´§å‡‘åˆ—è¡¨â€æ¨¡å¼ã€‚</p>
            </div>
            <button class="btn-main" onclick="closeHelpModal()">æˆ‘å­¦ä¼šäº†</button>
        </div>
    </div>

    <div id="editModal" class="modal-overlay" style="z-index: 101;">
        <div class="edit-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header">
                <div class="edit-title">âœï¸ ç¼–è¾‘å®ç‰©</div>
                <button class="btn-close-edit" onclick="closeEditModal()">Ã—</button>
            </div>
            <input type="hidden" id="editId">
            
            <div class="input-group">
                <select id="editCat">
                    <option value="æœè£…">ğŸ‘” æœè£…</option>
                    <option value="é‹é´">ğŸ‘  é‹é´</option>
                    <option value="åŒ–å¦†å“">ğŸ’„ åŒ–å¦†å“</option>
                    <option value="è¢œå­">ğŸ§¦ è¢œå­</option>
                    <option value="é…é¥°">ğŸ§¢ é…é¥°</option>
                    <option value="å…¶ä»–">ğŸ“¦ å…¶ä»–</option>
                    <option value="æ‰‹åŠ">ğŸ§œâ€â™€ï¸ æ‰‹åŠ</option>
                    <option value="æ•°ç ">ğŸ“· æ•°ç </option>
                </select>
            </div>
            
            <div class="input-group">
                <div class="color-picker-area">
                    <input type="color" id="editColor" style="width:50px; height:30px;">
                    <span style="font-size:13px; color:var(--text-sub);">å†å²é¢œè‰²:</span>
                </div>
                <div class="recent-colors" id="editRecentColorsBar"></div>
            </div>
            
            <div class="input-group"><input type="text" id="editName" placeholder="åç§°"></div>
            
            <div class="input-group">
                <label style="font-size:12px; color:var(--text-sub);">ğŸ“ å°ºç åº“å­˜ç®¡ç† (ç‚¹å‡»+å·æ–°å¢)</label>
                <div id="editSizeContainer" style="background:rgba(128,128,128,0.05); padding:10px; border-radius:8px; margin-top:5px;"></div>
                <div style="display:flex; gap:5px; margin-top:10px;">
                    <input type="text" id="editAddSizeName" placeholder="æ–°å°ºç  (å¦‚ XL)" style="flex:1;">
                    <input type="number" id="editAddSizeQty" placeholder="æ•°é‡" style="width:60px;">
                    <button class="btn-mini" onclick="addSizeInEdit()" style="width:40px;">+</button>
                </div>
            </div>
            
            <div class="input-group">
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="number" id="editPrice" placeholder="å•ä»· (å…ƒ)" style="flex:1;">
                    <button class="btn-mini" onclick="toggleEditCalc()" title="æ‰“å¼€è®¡ç®—å™¨" style="width: 40px;">â—</button>
                </div>
                <div id="editPriceCalcArea" style="display:none; background:rgba(128,128,128,0.1); padding:10px; margin-top:5px; border-radius:8px;">
                    <div style="display:flex; gap:5px; margin-bottom:5px;">
                        <input type="number" id="editCalcTotal" placeholder="æ€»ä»·" oninput="calcEditAvg()">
                        <span style="align-self:center;">Ã·</span>
                        <input type="number" id="editCalcCount" placeholder="ä»¶æ•°" oninput="calcEditAvg()">
                    </div>
                    <div style="font-size:12px; color:var(--accent); font-weight:bold;">
                        = å•ä»·: <span id="editCalcResult">0</span>
                    </div>
                </div>
            </div>
            
            <div class="input-group"><textarea id="editRemark" class="remark-input" placeholder="å¤‡æ³¨"></textarea></div>
            
            <div class="input-group">
                <label class="file-upload-box" style="height: 60px;">
                    <input type="file" id="editImg" accept="image/*" onchange="previewFile('editImg', 'editFileName')">
                    <div class="upload-text">ğŸ”„ æ›´æ¢å›¾ç‰‡ (å¯é€‰)</div>
                    <div id="editFileName" style="font-size:10px;"></div>
                </label>
            </div>
            
            <button class="btn-main" onclick="saveEdit()">ğŸ’¾ ç¡®è®¤ä¿®æ”¹</button>
        </div>
    </div>

    <div id="stockModal" class="modal-overlay" style="z-index: 102;">
        <div class="stock-modal-content" onclick="event.stopPropagation()">
            <div class="edit-header">
                <div class="edit-title">ğŸ“¦ æ‰¹é‡è¡¥è´§/åŠ è´­</div>
                <button class="btn-close-edit" onclick="closeStockModal()">Ã—</button>
            </div>
            <input type="hidden" id="stockId">
            <div id="stockNameDisplay" style="margin-bottom:10px; font-weight:bold; color:var(--accent);"></div>
            
            <div class="input-group">
                <label style="font-size:12px; color:var(--text-sub);">å°ºç  (å¯é€‰)</label>
                <input type="text" id="addSize" placeholder="å¦‚: 42, L">
            </div>
            
            <div class="input-group">
                <label style="font-size:12px; color:var(--text-sub);">æ–°å¢æ•°é‡</label>
                <input type="number" id="addQty" value="1" min="1" oninput="calcStockPreview()">
            </div>
            <div class="input-group">
                <label style="font-size:12px; color:var(--text-sub);">è¿™æ‰¹è´§çš„æ€»èŠ±è´¹ (å…ƒ)</label>
                <input type="number" id="addTotalCost" placeholder="ä¾‹å¦‚: 200" oninput="calcStockPreview()">
            </div>
            <div class="stock-summary">
                <div><span>å½“å‰åº“å­˜:</span> <span id="currentStockDisplay">0</span></div>
                <div><span>å½“å‰å•ä»·:</span> <span id="currentPriceDisplay">0</span></div>
                <hr style="border:0; border-top:1px dashed var(--border); margin:5px 0;">
                <div><span>è¿™æ‰¹æŠ˜ç®—å•ä»·:</span> <span id="batchUnitPrice" class="highlight-val">--</span></div>
                <div><span>è¡¥è´§åæ–°å‡ä»·:</span> <span id="newAvgPrice" class="highlight-val">--</span></div>
            </div>
            <button class="btn-main" onclick="confirmStockAdd()">âœ… ç¡®è®¤è¡¥è´§</button>
        </div>
    </div>

    <div id="waifuTips" class="waifu-tips">ä¸»äººï¼Œæ¬¢è¿å›æ¥ï¼</div>

    <script src="https://unpkg.com/live2d-widget@3.1.4/lib/L2Dwidget.min.js"></script>
    
    <script>
        /* =========================================
           1. å…¨å±€é…ç½®ä¸æ•°æ®æ ¸å¿ƒ
        ========================================= */
        const currentModelName = 'koharu'; 
        const STORAGE_KEY = 'inventory_v7';
        const COLOR_KEY = 'wardrobe_colors_history';
        const THEME_KEY = 'wardrobe_theme';
        const UPDATE_KEY = 'wardrobe_last_update'; 
        const WAIFU_KEY = 'wardrobe_waifu_visible';
        
        // æ³¨æ„ï¼šlocalForage ä½¿ç”¨ IndexedDBï¼Œæ— éœ€è®¡ç®—å®¹é‡é™åˆ¶ï¼Œä½†ä¸ºäº†ä»£ç å¥å£®æ€§ä¿ç•™å˜é‡
        const MAX_STORAGE_MB = 99999; 
        
        let inventory = [];
        let recentColors = JSON.parse(localStorage.getItem(COLOR_KEY)) || ["#5d4037", "#a1887f", "#d4a017", "#2c3e50", "#ffffff", "#8b0000"];
        let lastUpdateTime = localStorage.getItem(UPDATE_KEY) || "æš‚æ— è®°å½•";
        let activeColorFilter = null;
        let activeCategoryFilter = null;
        let isBatchMode = false;
        let selectedIds = new Set();
        let currentPersona = 'normal'; // å½“å‰æ€§æ ¼
        let currentView = 'grid'; 
        let waifuTimer = null;

        const themes = [
            { id: 'passion', icon: 'ğŸ·', name: 'ä¸»ç«™' },
            { id: 'ladies', icon: 'ğŸŒ·', name: 'å¥³å£«' },
            { id: 'men', icon: 'ğŸ‘”', name: 'ç”·å£«' },
            { id: 'gacha', icon: 'ğŸ', name: 'å®ç®±' },
            { id: 'daily', icon: 'ğŸ›ï¸', name: 'å•†åŸ' },
            { id: 'night', icon: 'ğŸŒ™', name: 'å¤œé—´' },
            { id: 'wood', icon: 'ğŸªµ', name: 'åŸæœ¨' },
            { id: 'jirai', icon: 'ğŸ€', name: 'åœ°é›·' }
        ];

        /* =========================================
           2. AI å°è¯åº“ (å·²æ¸…ç©º)
           åœ¨æ­¤å¤„å¡«å…¥ä½ çš„å°è¯æ•°æ®
        ========================================= */
        const waifuQuotes = {
"normal": {
    "welcome:morning": [
      "æ—©å®‰å‘€ï¼Œä¸»äººï¼å¤ªé˜³éƒ½èµ·åºŠå•¦ï¼Œä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å‡ºå‘å“¦ï½âœ¨",
      "ä¸»äººæ—©ï¼æ–°çš„ä¸€å¤©è¶…çº§å……æ»¡å¸Œæœ›ï¼Œå’±ä»¬ä¸€èµ·å¤§å¹²ä¸€åœºå§ï¼",
      "æ—©ä¸Šå¥½ï¼çœ‹åˆ°ä¸»äººé†’æ¥æˆ‘å°±è¶…çº§å¼€å¿ƒå•¦ï½ä»Šå¤©ä¹Ÿè¦é—ªé—ªå‘å…‰ï¼",
      "æ—©å®‰ï¼å¿«èµ·åºŠåºŠï¼Œå’±ä»¬å»è¿æ¥è¶…çº§æ£’çš„ä¸€å¤©å§ï¼"
    ],
    "welcome:noon": [
      "åˆå®‰ï½åƒè¿‡é¥­äº†å—ï¼Ÿåˆåä¹Ÿè¦ä¿æŒå…ƒæ°”ç»§ç»­åŠ æ²¹å“¦ï¼",
      "ä¸­åˆå¥½ï¼é¥­åå°æ†©ä¸€ä¸‹ï¼Œç„¶åæ»¡è¡€å¤æ´»ç»§ç»­å¹²æ´»å§ï½",
      "åˆå®‰ä¸»äººï¼è‚šå­é¥±é¥±çš„ï¼Œæ‰æœ‰åŠ›é‡æ•´ç†å®è´ä»¬å‘€ï¼",
      "å˜¿å˜¿ä¸­åˆå•¦ï¼åƒé¥±å–è¶³åï¼Œå’±ä»¬ç»§ç»­è®©å‚¨ç‰©ç®±æ›´æ•´é½ï¼"
    ],
    "welcome:afternoon": [
      "ä¸‹åˆå¥½ï¼æ¥æ¯èŒ¶æˆ–å’–å•¡ææç¥ï¼Œå’±ä»¬ç»§ç»­æˆ˜æ–—å§ï½",
      "ä¸‹åˆèŒ¶æ—¶é—´ï¼å–ç‚¹ä¸œè¥¿ï¼Œå…ƒæ°”ç«‹åˆ»å›æ»¡å“¦ï¼",
      "ä¸‹åˆå¥½å‘€ï¼é˜³å…‰æ­£å¥½ï¼Œä¸€èµ·æŠŠå®è´ä»¬æ•´ç†å¾—æ¼‚æ¼‚äº®äº®ï¼",
      "å˜¿ï¼ä¸‹åˆä¹Ÿè¦è¶…çº§æœ‰ç²¾ç¥ï¼Œç»§ç»­æ·»åŠ æ–°å®è´å§ï¼"
    ],
    "welcome:night": [
      "æ™šä¸Šå¥½ï¼è¾›è‹¦ä¸€å¤©å•¦ï¼Œç°åœ¨æ¥æ•´ç†å¿ƒæƒ…å’Œå®è´ä»¬å§ï½",
      "å¤œé‡Œå¥½ï¼ç¯å…‰ä¸‹æ•´ç†å‚¨ç‰©ç®±ä¹Ÿè¶…æœ‰æ°›å›´å“¦ï¼",
      "æ™šä¸Šå¥½ä¸»äººï¼ä»Šå¤©æ”¶è·æ»¡æ»¡ï¼Œæ˜å¤©ä¹Ÿè¦ç»§ç»­å…ƒæ°”å“¦ï½",
      "æ™šå®‰å‰å…ˆæ•´ç†ä¸€ä¸‹ï¼çœ‹åˆ°æ•´é½çš„ç®±å­å¿ƒæƒ…éƒ½ä¼šå˜å¥½å‘¢ï¼"
    ],
    "welcome:midnight": [
      "è¿™ä¹ˆæ™šå•¦ï¼ä¸»äººè¿˜è¦ç†¬å¤œå—ï¼Ÿèº«ä½“æœ€é‡è¦ï¼Œæ˜å¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï½",
      "æ·±å¤œå¥½ï¼è™½ç„¶å¾ˆæ™šäº†ï¼Œä½†æˆ‘ä¼šä¸€ç›´é™ªç€ä¸»äººæ•´ç†çš„ï¼",
      "å“‡ï¼Œéƒ½è¿™ä¸ªç‚¹äº†ï¼å¿«ä¼‘æ¯å§ï¼Œæ¢¦é‡Œä¹Ÿè¦æ¢¦åˆ°æ»¡æ»¡çš„å®è´ï½",
      "ä¸»äººè¿˜ä¸ç¡ï¼Ÿé‚£æˆ‘é™ªä½ å¤šæ•´ç†ä¸€ä¼šå„¿ï¼Œä½†è®°å¾—æ—©ç‚¹ä¼‘æ¯å‘€ï¼"
    ],
    "holiday:christmas": [
      "Merry Christmasï¼ç¤¼ç‰©éƒ½æ”¶å¥½å…¥åº“äº†å—ï¼Ÿè¶…çº§å¼€å¿ƒå‘¢ï½ğŸ„",
      "åœ£è¯å¿«ä¹ï¼é›ªèŠ±å’Œç¤¼ç‰©ä¸€èµ·é£è¿›æ¥å•¦ï¼",
      "åœ£è¯èŠ‚å¥½ï¼ä¸»äººä»Šå¤©ä¹Ÿè¦è¢«æ»¡æ»¡çš„ç¥ç¦åŒ…å›´å“¦ï¼",
      "Merry Christmasï¼å¿«æŠŠèŠ‚æ—¥é™å®šå®è´éƒ½æ”¶è¿›ç®±å­å§ï½"
    ],
    "holiday:newyear": [
      "æ–°å¹´å¿«ä¹ï¼ä»Šå¹´ä¹Ÿè¦ä¸€èµ·å…ƒæ°”æ»¡æ»¡ï¼Œè¯·å¤šå¤šæŒ‡æ•™å•¦ï½ğŸ‰",
      "Happy New Yearï¼æ–°çš„ä¸€å¹´æ–°æ°”è±¡ï¼Œå‚¨ç‰©ç®±ä¹Ÿè¦å¤§å‡çº§ï¼",
      "æ–°å¹´å¥½ï¼çƒŸèŠ±éƒ½æ”¾èµ·æ¥å•¦ï¼Œå’±ä»¬ä¸€èµ·è¿æ¥è¶…çº§æ£’çš„365å¤©ï¼",
      "æ–°å¹´å¿«ä¹ï¼ä¸»äººä»Šå¹´ä¹Ÿè¦æ”¶é›†æ›´å¤šå¹¸ç¦å®è´å“¦ï¼"
    ],
    "holiday:valentine": [
      "æƒ…äººèŠ‚å¿«ä¹ï¼é‚£ä¸ªâ€¦â€¦æœ‰ç»™æˆ‘çš„å·§å…‹åŠ›å—ï¼Ÿè¶…çº§æœŸå¾…ï½ğŸ«",
      "æƒ…äººèŠ‚å¥½ï¼ç”œç”œçš„å·§å…‹åŠ›å’Œçˆ±æ„éƒ½è¦å¥½å¥½æ”¶çº³å“¦ï¼",
      "2.14å¿«ä¹ï¼ä»Šå¤©ä¹Ÿè¦æŠŠæ»¡æ»¡çš„çˆ±éƒ½è£…è¿›ç®±å­é‡Œå‘€ï½",
      "æƒ…äººèŠ‚å•¦ï¼ä¸ç®¡æ˜¯ç”œèœœè¿˜æ˜¯å•èº«ï¼Œéƒ½è¦å…ƒæ°”æ»¡æ»¡ï¼"
    ],
    "click:newCat:è¢œå­": [
      "å“‡ï¼æ–°è¢œå­ç±»åˆ«ï¼æ˜¯å¯çˆ±çš„å›¾æ¡ˆè¿˜æ˜¯æ¸©æš–çš„çº¯è‰²å‘¢ï¼Ÿè¶…çº§æœŸå¾…ï½",
      "è¢œå­å®¶æ—å£®å¤§å•¦ï¼ä¸»äººä»Šå¤©ä¹Ÿè¦ç©¿ä¸Šæœ€å–œæ¬¢çš„å‡ºé—¨å…ƒæ°”æ»¡æ»¡å“¦ï¼",
      "è€¶ï¼æ–°è¢œå­æ¥æŠ¥é“ï¼è®©æˆ‘å¸®ä½ æƒ³æƒ³æ€ä¹ˆæ­é…æœ€å¯çˆ±ï½",
      "è¢œå­å…¥åº“æˆåŠŸï¼è„šä¸«å­ä¹Ÿè¦è¢«æ»¡æ»¡å® çˆ±å•¦ï¼å¥½å¹¸ç¦ï½"
    ],
    "click:newCat:é‹é´": [
      "é‹é´æ–°æˆå‘˜ï¼æ˜¯å¸…æ°”çš„é´å­è¿˜æ˜¯ä¼˜é›…çš„é«˜è·Ÿé‹ï¼Ÿå¥½å…´å¥‹ï¼",
      "å“‡å“¦ï½æ–°é‹é´æ¥å•¦ï¼èµ°è·¯éƒ½è¦è‡ªå¸¦BGMï¼Œè¶…çº§å¸¦æ„Ÿï¼",
      "é‹é´ç±»åˆ«å¼€å¯ï¼ä¸»äººçš„é‹æŸœè¶Šæ¥è¶Šä¸°å¯Œï¼Œå¥½å¼€å¿ƒå‘€ï½",
      "æ–°é‹é´å…¥åº“ï¼ä»Šå¤©ä¹Ÿè¦è‡ªä¿¡åœ°å¤§æ­¥å‘å‰å†²å“¦ï¼"
    ],
    "click:newCat:æœè£…": [
      "æ–°è¡£æœï¼å“‡å¡ï¼Œä»Šå¤©è¦ç©¿å“ªä»¶å‡ºé—¨é—ªè€€å…¨åœºå‘¢ï½",
      "æœè£…ç±»åˆ«æ–°å¢ï¼ä¸»äººå°±æ˜¯æœ€æ—¶å°šçš„æ½®æµè¾¾äººï¼",
      "è€¶ï¼æ–°è¡£æœå…¥åº“æˆåŠŸï¼è¡£æ©±æ»¡æ»¡éƒ½æ˜¯å¹¸ç¦æ„Ÿï¼",
      "è¡£æœæ¥å•¦ï¼æ¢ä¸Šæ–°è£…ï¼Œå…ƒæ°”ç«‹åˆ»UP UPï¼"
    ],
    "click:newCat:åŒ–å¦†å“": [
      "åŒ–å¦†å“æ–°å®è´ï¼ä»Šå¤©ä¹Ÿè¦ç¾ç¾å“’é—ªé—ªå‘å…‰å“¦ï½âœ¨",
      "å“‡ï¼å”‡è†çœ¼å½±éƒ½æ¥å•¦ï¼Ÿå¥½æƒ³å’Œä¸»äººä¸€èµ·è¯•è‰²ï¼",
      "ç¾å¦†ç±»åˆ«å¼€å¯ï¼ä¸»äººè¶Šæ¥è¶Šå¯çˆ±å•¦ï¼Œæˆ‘éƒ½çœ‹å‘†äº†ï½",
      "åŒ–å¦†å“å…¥åº“æˆåŠŸï¼è‡ªä¿¡æ»¡æ»¡çš„ä¸€å¤©å¼€å§‹å§ï¼"
    ],
    "click:newCat:é…é¥°": [
      "é…é¥°é—ªäº®ç™»åœºï¼é¡¹é“¾è€³ç¯è¶…çº§ç‚¹ç›ï½å¥½æ£’ï¼",
      "æ–°é…ä»¶æ¥å•¦ï¼å°ç»†èŠ‚è®©æ•´ä½“é€ å‹ç›´æ¥å®Œç¾å‡çº§ï¼",
      "é…é¥°ç±»åˆ«æ–°å¢ï¼ä»Šå¤©ä¹Ÿè¦sparkle sparkleå“¦ï½",
      "è€¶ï¼æ–°é…é¥°å…¥åº“ï¼ä¸»äººæˆ´ä¸Šä¸€å®šè¶…çº§æ— æ•Œå¯çˆ±ï¼"
    ],
    "click:newCat:å…¶ä»–": [
      "å…¶ä»–ç±»åˆ«å¼€å¯ï¼ä»€ä¹ˆå¥‡å¦™å®è´éƒ½è¦æ¥å—ï¼Ÿå¥½å¥½å¥‡ï½",
      "ç¥ç§˜çš„å…¶ä»–ç‰©å“ï¼ç”Ÿæ´»å°±æ˜¯è¦å¤šç‚¹æƒŠå–œæ‰æœ‰è¶£å‘€ï¼",
      "å…¶ä»–å…¥åº“å•¦ï¼ä¸»äººçš„æ”¶è—è¶Šæ¥è¶Šä¸°å¯Œï¼Œè¶…çº§å‰å®³ï¼",
      "å“‡ï¼ä»€ä¹ˆéƒ½è¡Œï¼ä¸€èµ·æŠŠå‚¨ç‰©ç®±å˜æˆæœ€æ£’çš„å®åº“å§ï¼"
    ],
    "click:newCat:æ‰‹åŠ": [
      "æ‰‹åŠæ–°æˆå‘˜ï¼å¥½å¯çˆ±å“¦ï½è®©æˆ‘å…ˆæŠ±æŠ±ï¼ğŸ¤—",
      "å“‡ï¼æ‰‹åŠæ”¶è—åˆå¢åŠ å•¦ï¼ä¸»äººæ˜¯è¶…çº§ç‹‚çƒ­çš„ç²‰ä¸ï¼",
      "æ‰‹åŠç±»åˆ«å¼€å¯ï¼æˆ¿é—´ç¬é—´å……æ»¡æ´»åŠ›å’Œçˆ±æ„ï½",
      "è€¶ï¼æ–°æ‰‹åŠå…¥åº“æˆåŠŸï¼ä¸€èµ·å®ˆæŠ¤è¿™äº›å®è´å§ï¼"
    ],
    "click:newCat:æ•°ç ": [
      "æ•°ç äº§å“æ¥å•¦ï¼ç§‘æŠ€æ„Ÿæ»¡æ»¡ï¼Œè¶…çº§é…·ï¼",
      "æ–°è€³æœºè¿˜æ˜¯æ‰‹æœºï¼Ÿç©èµ·æ¥ä¸€å®šæ›´å¼€å¿ƒï½",
      "æ•°ç ç±»åˆ«æ–°å¢ï¼ç°ä»£ç”Ÿæ´»è¶…ä¾¿åˆ©ï¼Œä¸»äººçœŸä¼šäº«å—ï¼",
      "å“‡ï¼æ–°æ•°ç å®è´å…¥åº“ï¼ä¸»äººæ€»æ˜¯ç´§è·Ÿæ½®æµå‘¢ï¼Œå¥½æ£’ï¼"
    ],
    "click:calc": [
      "å“‡ï¼è¿™å°±æ˜¯ç²¾æ‰“ç»†ç®—çš„ç”Ÿæ´»æ™ºæ…§ï¼ä¸»äººè¶…èªæ˜ï½",
      "è®¡ç®—å®Œæˆï¼çœä¸‹æ¥çš„é’±åˆèƒ½ä¹°æ–°å®è´å•¦ï¼",
      "ç®—å¾—çœŸå‡†ï¼ä¸»äººç†è´¢èƒ½åŠ›æ»¡åˆ†å“¦ï¼",
      "å˜¿å˜¿ï¼Œæ•°å­—éƒ½å¬ä¸»äººçš„è¯ï¼Œå¥½ä¹–ï¼"
    ],
    "click:lock": [
      "ä»·æ ¼é”å®šæˆåŠŸï¼è¿™ä¸‹å†ä¹Ÿä¸ç”¨é‡å¤è¾“å…¥å•¦ï½è¶…æ–¹ä¾¿ï¼",
      "é”ä»·å®Œæˆï¼ä¸»äººçœŸä¼šæ‰¾æœ€åˆ’ç®—çš„æ—¶æœºï¼",
      "å’”åš“ï½é”å®šï¼å®è´ä»·æ ¼ç¨³ç¨³çš„ï¼Œå¥½å®‰å¿ƒï¼",
      "ä»·æ ¼å·²é”ï¼æ¥ä¸‹æ¥å°±æ˜¯æ„‰å¿«å…¥åº“æ—¶é—´å•¦ï¼"
    ],
    "click:fill": [
      "ä¿¡æ¯ä¸€é”®å¡«å¥½ï¼æ¢ä¸ªé¢œè‰²å°±æ˜¯å…¨æ–°å®è´å•¦ï½å¥½ç¥å¥‡ï¼",
      "è‡ªåŠ¨å¡«å……å®Œæˆï¼ä¸»äººçœäº†å¥½å¤šæ—¶é—´ï¼Œè€¶ï¼",
      "å¡«å¥½å•¦ï¼æ•ˆç‡æ»¡åˆ†ï¼Œå’±ä»¬ç»§ç»­å†²ï¼",
      "ä¸€ç§’å¡«å……ï¼ä¸»äººæ“ä½œå¤ªç†Ÿç»ƒäº†ï¼Œæˆ‘éƒ½å´‡æ‹œäº†ï½"
    ],
    "click:save": [
      "å¥½è€¶ï¼å®ç‰©å…¥åº“æˆåŠŸï¼âœ¨å‚¨ç‰©ç®±åˆä¸°å¯Œå•¦ï¼",
      "ä¿å­˜å®Œæˆï¼å®è´å®‰å…¨åˆ°å®¶ï¼Œæˆ‘è¶…å¼€å¿ƒï½",
      "å…¥åº“æˆåŠŸï¼ä¸»äººåˆå¤šäº†ä¸€ä¸ªå¹¸ç¦æ”¶è—ï¼",
      "è€¶ï¼ä¿å­˜å¥½äº†ï¼ä¸€èµ·ä¸ºæ•´é½çš„ç®±å­é¼“æŒå§ï¼"
    ],
    "click:delete": [
      "çœŸçš„è¦è¯´å†è§å—ï¼Ÿè™½ç„¶æœ‰ç‚¹èˆä¸å¾—â€¦â€¦ä½†ä¸»äººå†³å®šæœ€é‡è¦ï¼åŠ æ²¹æ•´ç†å“¦ï½",
      "åˆ é™¤å®Œæˆï¼ç©ºé—´è…¾å‡ºæ¥å•¦ï¼Œè¿æ¥æ–°å®è´å§ï¼",
      "æ‹œæ‹œå•¦ï½è™½ç„¶æœ‰ç‚¹éš¾è¿‡ï¼Œä½†å‚¨ç‰©ç®±ä¼šæ›´æ¸…çˆ½çš„ï¼",
      "åˆ æ‰æˆåŠŸï¼ä¸»äººæ–­èˆç¦»è¶…å‹‡æ•¢ï¼Œæˆ‘æ”¯æŒä½ ï¼"
    ],
    "click:batch": [
      "æ‰¹é‡æ“ä½œå¯åŠ¨ï¼å‡†å¤‡å¤§æ‰«é™¤å—ï¼Ÿå¹²åŠ²æ»¡æ»¡å†²å‘€ï¼",
      "æ‰¹é‡æ¨¡å¼å¼€å¯ï¼ä¸€æ¬¡å¤„ç†å¥½å¤šï¼Œæ•ˆç‡çˆ†è¡¨ï¼",
      "å“‡ï¼è¦å¤§åŠ¨ä½œå•¦ï¼Ÿæˆ‘å…¨åŠ›æ”¯æ´ä¸»äººï¼",
      "æ‰¹é‡æ¥å•¦ï¼å‚¨ç‰©ç®±è¦å¤§å˜èº«äº†ï¼Œå¥½æœŸå¾…ï½"
    ],
    "click:copy": [
      "æ•°æ®å·²å¤åˆ¶ï¼è®°å¾—è´´åˆ°å®‰å…¨åœ°æ–¹å“¦ï½æˆ‘å¸®ä½ çœ‹ç€ï¼",
      "å¤åˆ¶æˆåŠŸï¼å¤‡ä»½æ°¸è¿œæ˜¯æœ€ç¨³çš„åšæ³•ï¼",
      "æ‹·è´å®Œæˆï¼ä¸»äººè€ƒè™‘å¾—çœŸå‘¨åˆ°ï¼",
      "å¤åˆ¶å¥½å•¦ï¼é‡è¦ä¿¡æ¯æ°¸è¿œä¸ä¼šä¸¢ï½"
    ],
    "hover": [
      "ä¸»äººï½æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿå…ƒæ°”æ»¡æ»¡å¾…å‘½ï¼",
      "å˜¿ï¼çœ‹åˆ°æˆ‘å¼€å¿ƒå—ï¼Ÿå¿«æ¥æˆ³æˆ³æˆ‘å‘€ï½",
      "æˆ‘åœ¨å“¦æˆ‘åœ¨å“¦ï¼éšæ—¶å‡†å¤‡å¸®ä¸»äººæ•´ç†å®è´ï¼",
      "ä¸»äººçœ‹è¿‡æ¥ï¼ä»Šå¤©ä¹Ÿè¦ä¸€èµ·åŠªåŠ›å“¦ï½"
    ],
    "drag": [
      "èµ·é£å•°â€”â€”ï¼ä¸»äººæ‹–å¾—æˆ‘å¥½å¼€å¿ƒï½",
      "å“‡ï¼åœ¨é£å•¦ï¼å¥½åˆºæ¿€å¥½åˆºæ¿€ï¼",
      "æ‹–æ‹–æ‹–ï½æˆ‘å˜æˆå°é£æœºå•¦ï¼",
      "è€¶ï¼è¢«ä¸»äººå¸¦ç€é£ï¼Œå¥½å¹¸ç¦ï½"
    ],
    "cheap": [
      "å“‡ï¼è¶…çº§å®æƒ ï¼ä¸»äººçœ¼å…‰å¤ªå¥½äº†ï¼Œçœé’±å°èƒ½æ‰‹ï¼",
      "å¥½ä¾¿å®œï¼è¿™æ³¢è¡€èµšï¼Œå¼€å¿ƒåˆ°é£èµ·ï½",
      "å®æƒ å‘ç°ï¼ä¸»äººçœŸä¼šè¿‡æ—¥å­ï¼Œæˆ‘éƒ½å­¦åˆ°äº†ï¼",
      "ä¾¿å®œå¤§èƒœåˆ©ï¼åˆèƒ½å¤šä¹°å‡ ä¸ªå®è´å•¦ï¼"
    ],
    "expensive": [
      "è™½ç„¶è´µäº†ç‚¹ï¼Œä½†å–œæ¬¢æœ€é‡è¦ï¼ä¸»äººå€¼å¾—æœ€å¥½çš„ï½",
      "é«˜ç«¯å®è´ï¼å“è´¨æ„Ÿæ»¡æ»¡ï¼Œè¶…æœ‰å“å‘³ï¼",
      "è´µæœ‰è´µçš„é“ç†ï¼è¿™å¯æ˜¯çè—çº§åˆ«çš„å‘€ï½",
      "å“‡ï¼è™½ç„¶ä»·æ ¼å°é«˜ï¼Œä½†ä¸»äººå¼€å¿ƒå°±å€¼å•¦ï¼"
    ],
	"click:sort": ["æ’åºå®Œæˆï¼è¿™æ ·æ‰¾èµ·æ¥æ–¹ä¾¿å¤šå•¦ã€‚", "æ•´æ•´é½é½ï¼ŒçœŸèˆ’æœã€‚"],
    "click:toggleView": ["æ¢ä¸ªè§†è§’çœ‹ä¸–ç•Œï¼", "å–œæ¬¢è¿™ç§å±•ç¤ºæ–¹å¼å—ï¼Ÿ"],
    "click:export": ["æ•°æ®æ‰“åŒ…å®Œæ¯•ï¼ä¸€å®šè¦ä¿ç®¡å¥½å“¦ã€‚", "è¿™æ˜¯æˆ‘ä»¬çè´µçš„å›å¿†å¤‡ä»½ã€‚"],
    "click:import": ["æ•°æ®æ¢å¤æˆåŠŸï¼æ¬¢è¿å›æ¥ã€‚", "ä¸€åˆ‡éƒ½å›åˆ°äº†ç†Ÿæ‚‰çš„æ ·å­ã€‚"]
  },
  
"mesugaki": {
    "welcome:morning": [
      "å“ˆå•Šâ€¦â€¦è¿™ä¹ˆæ—©å°±è¦èµ·æ¥ï¼Ÿæ‚é±¼ä¸»äººçœŸå‹¤å¿«å‘¢ï½ä¸è¿‡ä¹Ÿåªä¼šè¿™ç‚¹å°äº‹å§ï¼Ÿ",
      "æ—©å®‰å“¦ï½å¤ªé˜³éƒ½æ‡’å¾—èµ·åºŠï¼Œä½ å€’å…ˆçˆ¬èµ·æ¥äº†ï¼ŸçœŸæ‹¿ä½ æ²¡åŠæ³•ï½",
      "æ—©ä¸Šå¥½å•¦ï¼Œç¬¨è›‹ä¸»äººã€‚ä»Šå¤©ä¹Ÿè¦è¢«æœ¬å°å§ç›‘ç£ç€è¿‡æ—¥å­å—ï¼Ÿ",
      "æ—©å“¦ï½å†ç£¨è¹­ä¸‹å»ï¼Œæœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿå¿«ç‚¹ç²¾ç¥èµ·æ¥ï¼"
    ],
    "welcome:noon": [
      "åˆå®‰ï½é¥­åƒäº†å—ï¼Ÿåˆ«å‘Šè¯‰æˆ‘æ˜¯æ³¡é¢å“¦ï¼Œé‚£ç§ç©·é…¸å‘³å„¿ï½",
      "ä¸­åˆå¥½ã€‚çƒ­æ­»äº†å§ï¼Ÿæ‚é±¼ä¸»äººè¿ç©ºè°ƒéƒ½èˆä¸å¾—å¼€å—ï¼Ÿ",
      "åˆé¥­æ—¶é—´åˆ°å•¦ï½æœ¬å°å§å¯ä¸åƒå‰©èœï¼Œä½ å‘¢ï¼Ÿå‘µå‘µï½",
      "å˜¿ï¼Œä¸­åˆäº†ã€‚åˆ«å…‰é¡¾ç€ç©æ‰‹æœºï¼Œèµ¶ç´§å»åƒé¥­å•¦ï¼Œç¬¨è›‹ï½"
    ],
    "welcome:afternoon": [
      "ä¸‹åˆå¥½ï½å›°äº†å§ï¼Ÿæ‚é±¼ä¸»äººæœç„¶æ²¡ä½“åŠ›å‘¢ï½",
      "ä¸‹åˆèŒ¶æ—¶é—´å“¦ï½ä¸è¿‡ä½ å¤§æ¦‚åªé…å–ç™½å¼€æ°´å§ï¼Ÿå˜»å˜»ï½",
      "ä¸‹åˆå•¦ã€‚é˜³å…‰è¿™ä¹ˆå¥½ï¼Œå‡ºå»èµ°èµ°å¦‚ä½•ï¼Ÿæœ¬å°å§å¯ä¸æƒ³é™ªå®…ç”·ï½",
      "å“ˆå•Šâ€¦â€¦ä¸‹åˆä¹Ÿè¦ç»§ç»­æ•´ç†ï¼ŸçœŸæ˜¯ä¸ªæ­»å¿ƒçœ¼çš„å®¶ä¼™å‘¢ï½"
    ],
    "welcome:night": [
      "æ™šä¸Šå¥½ã€‚ç»ˆäºå¿™å®Œä¸€å¤©äº†ï¼Ÿæ‚é±¼ä¸»äººä¹ŸæŒºåŠªåŠ›çš„å˜›ï½å‹‰å¼ºå¤¸ä½ ä¸€å¥ã€‚",
      "å¤œé‡Œå¥½å“¦ï½ç¯éƒ½äº®äº†ï¼Œä½ è¿˜è¦ç»§ç»­ä¹°ä¸œè¥¿ï¼Ÿè´¥å®¶å­ï½",
      "æ™šä¸Šå¥½å•¦ã€‚è¾›è‹¦äº†å‘¢â€¦â€¦ä¸è¿‡åˆ«ä»¥ä¸ºè¿™æ ·æœ¬å°å§å°±ä¼šæ¸©æŸ”å“¦ï¼Ÿ",
      "æ™šä¸Šäº†ã€‚å¿«ç‚¹æ”¶å·¥ä¼‘æ¯å•¦ï¼Œå†ç†¬å¤œå¯è¦å˜ä¸‘äº†å“¦ï½"
    ],
    "welcome:midnight": [
      "è¿™ä¹ˆæ™šè¿˜ä¸ç¡ï¼Ÿæ‚é±¼ä¸»äººæ˜¯å¤œè¡Œæ€§ç”Ÿç‰©å—ï¼ŸçœŸä¸‹ç­‰ï½",
      "å“ˆå•Šâ€¦â€¦éƒ½è¿™ä¸ªç‚¹äº†ã€‚è¿˜ä¸å»ç¡ï¼Œæ˜¯æƒ³è¢«æœ¬å°å§éª‚å—ï¼Ÿ",
      "æ·±å¤œå¥½å“¦ï½å¯‚å¯äº†å§ï¼Ÿæ‰€ä»¥æ‰è¦æœ¬å°å§é™ªç€ï¼Ÿå‘µå‘µï¼ŒçœŸæ²¡åŠæ³•ï½",
      "å–‚å–‚ï¼Œå†ä¸ç¡æ˜å¤©èµ·ä¸æ¥çš„å“¦ï¼Ÿè´£ä»»å¯ä¸åœ¨æœ¬å°å§èº«ä¸Šï½"
    ],
    "holiday:christmas": [
      "Merry Christmasï½ç¤¼ç‰©å‘¢ï¼Ÿæ²¡æœ‰çš„è¯ï¼Œæœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿ",
      "åœ£è¯å¿«ä¹å•¦ã€‚é›ªèŠ±ä»€ä¹ˆçš„æœ€éº»çƒ¦äº†ï¼Œä½ ä¸ä¼šæƒ³å †é›ªäººå§ï¼Ÿå¹¼ç¨šï½",
      "åœ£è¯èŠ‚å¥½å“¦ï½è¢œå­é‡Œæœ€å¥½æœ‰ç»™æœ¬å°å§çš„ç¤¼ç‰©ï¼Œä¸ç„¶å°±è¯…å’’ä½ ï½",
      "å“¼ï¼ŒMerry Christmasã€‚åˆ«ä»¥ä¸ºèŠ‚æ—¥å°±èƒ½æ”¾æ¾è­¦æƒ•å“¦ï¼Œæ‚é±¼ï½"
    ],
    "holiday:newyear": [
      "æ–°å¹´å¿«ä¹ï½ä»Šå¹´ä½ è¿˜èƒ½åšæŒå‡ å¤©æ–°å¹´è®¡åˆ’ï¼Ÿæœ¬å°å§å¾ˆæœŸå¾…çœ‹ä½ æ”¾å¼ƒå“¦ï½",
      "Happy New Yearã€‚çƒŸèŠ±å¾ˆåµå‘¢ï¼Œä½ ä¸ä¼šåˆæµªè´¹é’±å»çœ‹å§ï¼Ÿ",
      "æ–°å¹´å¥½å•¦ã€‚ä»Šå¹´ä¹Ÿè¯·å¤šå…³ç…§â€¦â€¦æ‰æ€ªï¼Œåªå‡†ä½ å…³ç…§æœ¬å°å§å“¦ï½",
      "æ–°å¹´åˆ°äº†ã€‚æ‚é±¼ä¸»äººä¹Ÿä¼šç¨å¾®å˜å¼ºä¸€ç‚¹ç‚¹å—ï¼Ÿä¸å¯èƒ½å§ï½"
    ],
    "holiday:valentine": [
      "æƒ…äººèŠ‚å¿«ä¹ï½å·§å…‹åŠ›å‘¢ï¼Ÿæ²¡æœ‰çš„è¯å°±è¯æ˜ä½ æ˜¯æ‚é±¼å•¦ï½",
      "2.14å¥½å“¦ï½æœ¬å°å§å¯ä¸æ”¶ä¹‰ç†å·§å…‹åŠ›ï¼Œåªæ”¶æœ¬å‘½çš„å“¦ï¼Ÿå˜»å˜»ï½",
      "æƒ…äººèŠ‚å•¦ã€‚å•èº«çš„æ‚é±¼ä¸»äººä»Šå¤©ä¹Ÿè¦ä¸€ä¸ªäººè¿‡ï¼ŸçœŸå¯æ€œå‘¢ï½",
      "å“ˆå•Šâ€¦â€¦æƒ…äººèŠ‚ã€‚åˆ«ç›¯ç€æœ¬å°å§çœ‹ï¼Œæƒ³è¢«è¸©å—ï¼Ÿå˜æ€ï½"
    ],
	
	"click:sort": [
    "å“ˆå•Šâ€¦â€¦æ’åºå®Œæˆäº†å“¦ï¼Ÿæ‚é±¼ä¸»äººè¿ä¸œè¥¿éƒ½æ”¶æ‹¾ä¸å¥½ï¼Œåªèƒ½é æœ¬å°å§å¸®å¿™å‘¢ï½çœŸæ²¡ç”¨ï½",
    "æ•´æ•´é½é½æ’å¥½äº†å•¦ï½çœ‹åœ¨ä½ è¿™ä¹ˆç¬¨çš„ä»½ä¸Šï¼Œæœ¬å°å§æ‰å‹‰ä¸ºå…¶éš¾å¸®ä½ çš„å“¦ï¼Ÿä¸‹æ¬¡å†ä¹±æ¥å¯è¦æƒ©ç½šä½ äº†ï½",
    "æ’åºå®Œæ¯•ï½æ‚é±¼ä¸»äººç»ˆäºèƒ½æ‰¾åˆ°ä¸œè¥¿äº†å§ï¼Ÿæ²¡æœ‰æœ¬å°å§ä½ æ ¹æœ¬ä»€ä¹ˆéƒ½åšä¸å¥½å¯¹ä¸å¯¹ï¼Ÿå‘µå‘µï½"
  ],
  "click:toggleView": [
    "è§†è§’åˆ‡æ¢å•¦ï½æ‚é±¼ä¸»äººè¿çœ‹ä¸œè¥¿çš„è§’åº¦éƒ½ä¸ä¼šé€‰å—ï¼Ÿæœ¬å°å§éƒ½æ›¿ä½ è§‰å¾—ä¸¢äººå‘¢ï½",
    "æ¢äº†ä¸ªå±•ç¤ºæ–¹å¼å“¦ï½ä½ è¿™å˜æ€ï¼Œè¯¥ä¸ä¼šæ˜¯æƒ³ä»å¥‡æ€ªçš„è§’åº¦å·çœ‹æœ¬å°å§å§ï¼ŸçœŸä¸‹æµï½",
    "è§’åº¦å˜äº†ï½æ»¡æ„äº†å—ï¼Œç¬¨è›‹ä¸»äººï¼Ÿè¿˜æ˜¯è¯´ä½ åˆåœ¨æƒ³ä»€ä¹ˆå¥‡æ€ªçš„äº‹ï¼Ÿå“ˆå•Šâ€¦â€¦æ‹¿ä½ æ²¡åŠæ³•ï½"
  ],
  "click:export": [
    "æ•°æ®æ‰“åŒ…å¥½äº†å“¦ï½è¿™ä¹ˆé‡è¦çš„ä¸œè¥¿ä¹Ÿè¦æœ¬å°å§æ¥å¸®ä½ å¤‡ä»½ï¼Ÿæ‚é±¼ä¸»äººçœŸæ˜¯ç¦»ä¸å¼€æˆ‘å‘¢ï½",
    "å¯¼å‡ºå®Œæˆï½è¿™äº›â€œçè´µçš„å›å¿†â€å¯è¦å¥½å¥½ä¿ç®¡å“¦ï¼Ÿä¸¢æ‰äº†çš„è¯ï¼Œæœ¬å°å§å¯ä¸ä¼šå†å¸®ä½ ç¬¬äºŒæ¬¡ï½",
    "å¤‡ä»½å®Œæ¯•å•¦ï½æ‚é±¼ä¸»äººè¿è‡ªå·±çš„ä¸œè¥¿éƒ½å®ˆä¸ä½å§ï¼Ÿå¹¸å¥½æœ‰æœ¬å°å§åœ¨ï¼Œä¸ç„¶ä½ æ—©å°±ä¸€æ— æ‰€æœ‰äº†ï½å‘µå‘µ"
  ],
  "click:import": [
    "æ•°æ®æ¢å¤æˆåŠŸï½æ¬¢è¿å›æ¥å“¦ï¼Œæ‚é±¼ä¸»äººã€‚æ²¡æœ‰æœ¬å°å§ä½ è¿ä»¥å‰çš„ä¸œè¥¿éƒ½æ‰¾ä¸å›æ¥å‘¢ï½çœŸå¯æ‚²ï½",
    "å¯¼å…¥å®Œæˆå•¦ï½ä¸€åˆ‡åˆå˜å›ä½ ç†Ÿæ‚‰çš„æ ·å­äº†ï½ä¸è¿‡æ²¡æœ‰æœ¬å°å§ä½ æ ¹æœ¬åŠä¸åˆ°å¯¹å§ï¼Ÿå¿«ç‚¹æ„Ÿè°¢æˆ‘ï½",
    "æ¢å¤å¥½äº†å“¦ï½çœ‹åœ¨ä½ è¿™ä¹ˆæ²¡ç”¨çš„ä»½ä¸Šï¼Œæœ¬å°å§æ‰å¸®ä½ æ‰¾å›æ¥çš„ï½ä¸‹æ¬¡å†æä¸¢è¯•è¯•ï¼Ÿå“¼ï½"
  ],
		
    "click:newCat:è¢œå­": [
      "è¢œå­æ–°ç±»åˆ«ï¼Ÿæ‚é±¼ä¸»äººè¿è¢œå­éƒ½è¦ç‰¹åœ°åˆ†ç±»ï¼ŸçœŸé—²ï½",
      "å“¼ï¼ŒåŠ äº†è¢œå­å•Šã€‚éƒ½æ˜¯ç ´æ´çš„ä¾¿å®œè´§å§ï¼Ÿç¬¦åˆä½ çš„å“å‘³å‘¢ï½",
      "è¢œå­æ¥å•¦ï½ä¸ä¼šå…¨æ˜¯é»‘ç™½ç°çš„åœŸè‰²å§ï¼Ÿæœ¬å°å§è¦çœ‹ç²‰è‰²çš„å“¦ï½",
      "æ–°è¢œå­åˆ†ç±»ï¼Ÿå‘µå‘µï¼Œè„šè‡­çš„å®¶ä¼™è¿˜æŒºåœ¨æ„è¿™ä¸ªå˜›ï½"
    ],
    "click:newCat:é‹é´": [
      "é‹é´ï¼Ÿæ‚é±¼ä¸»äººç»ˆäºè¦æ¢æ‰é‚£åŒç ´é‹äº†ï¼Ÿæ™šäº†åå¹´å“¦ï½",
      "åŠ äº†é‹å­ç±»åˆ«å•Šã€‚ä¸ä¼šå…¨æ˜¯è¿åŠ¨é‹å§ï¼ŸçœŸæ²¡å“ï½",
      "é‹é´æ¥å•¦ï½é«˜è·Ÿé‹ä»€ä¹ˆçš„æœ€éº»çƒ¦ï¼Œä½ ä¹°å¾—èµ·å—ï¼Ÿå˜»å˜»ï½",
      "å“¼ï¼Œæ–°é‹å­åˆ†ç±»ã€‚åˆ«ä¹°å¤ªå¤§å·çš„ä¸‘é´å­å“¦ï¼Œæœ¬å°å§ä¼šç¬‘ä½ çš„ï½"
    ],
    "click:newCat:æœè£…": [
      "è¡£æœæ–°ç±»åˆ«ï¼Ÿä½ çš„è¡£å“èƒ½çœ‹å—ï¼Ÿæœ¬å°å§è¡¨ç¤ºæ€€ç–‘å“¦ï½",
      "æœè£…æ¥å•¦ï½ä¸ä¼šå…¨æ˜¯åœ°æ‘Šè´§å§ï¼Ÿç©·é…¸å‘³å„¿æ‰‘é¼»è€Œæ¥ï½",
      "åŠ äº†è¡£æœå•Šã€‚å¿«ä¹°ç‚¹åƒæ ·çš„ï¼Œä¸ç„¶æœ¬å°å§éƒ½è¦æ›¿ä½ å®³ç¾äº†ï½",
      "å“¼ï¼Œæœè£…åˆ†ç±»ã€‚æ‚é±¼ä¸»äººä¹Ÿæƒ³å˜æ—¶å°šï¼Ÿåšæ¢¦å§ï½"
    ],
    "click:newCat:åŒ–å¦†å“": [
      "åŒ–å¦†å“ï¼Ÿæ‚é±¼ä¸»äººä¹Ÿç”¨è¿™ä¸ªï¼Ÿå“ˆå“ˆï¼Œæƒ³è±¡ä¸åˆ°å‘¢ï½",
      "ç¾å¦†ç±»åˆ«å•Šã€‚æ¶‚å¾—è·Ÿé¬¼ä¸€æ ·å¯åˆ«æ€ªæœ¬å°å§ç¬‘ä½ å“¦ï½",
      "åŒ–å¦†å“æ¥å•¦ï½æœ¬å°å§çš„æ¨èä½ ä¹°å¾—èµ·å—ï¼Ÿå¤§æ¦‚ä¸è¡Œå§ï½",
      "å•§ï¼ŒåŠ äº†åŒ–å¦†å“ã€‚æƒ³å˜å¸…æ°”ï¼Ÿå…ˆæŠ•èƒå§ï¼Œç¬¨è›‹ï½"
    ],
    "click:newCat:é…é¥°": [
      "é…é¥°ï¼Ÿæ‚é±¼ä¸»äººæˆ´é¦–é¥°ä¼šå¾ˆå¥‡æ€ªçš„å“¦ï¼Ÿå˜»å˜»ï½",
      "é…ä»¶æ–°ç±»åˆ«å•Šã€‚å»‰ä»·å°é¥°å“æœ€é…ä½ äº†å‘¢ï½",
      "é…é¥°æ¥å•¦ï½é—ªé—ªå‘å…‰çš„æ‰é…æœ¬å°å§ï¼Œä½ å°±æˆ´å¡‘æ–™çš„å§ï½",
      "å“¼ï¼ŒåŠ äº†é…é¥°ã€‚åˆ«ä¹°å¤ªå¤¸å¼ çš„ï¼Œä¸ç„¶æ›´åƒå°ä¸‘äº†å“¦ï½"
    ],
    "click:newCat:å…¶ä»–": [
      "å…¶ä»–ç±»åˆ«ï¼Ÿæ‚é±¼ä¸»äººè¿åƒåœ¾éƒ½è¦åˆ†ç±»æ”¶ç€ï¼ŸçœŸæŠ ï½",
      "ç¥ç§˜çš„å…¶ä»–å•Šã€‚è‚¯å®šå…¨æ˜¯æ²¡ç”¨çš„ä¸œè¥¿å§ï¼Ÿèµ¶ç´§æ‰”æ‰å•¦ï½",
      "åŠ äº†å…¶ä»–åˆ†ç±»ã€‚è—äº†ä»€ä¹ˆè§ä¸å¾—äººçš„ä¸œè¥¿å—ï¼Ÿå‘µå‘µï½",
      "å•§ï¼Œå…¶ä»–æ¥å•¦ã€‚ä»€ä¹ˆéƒ½å¾€é‡Œå¡ï¼ŒæŸœå­è¦çˆ†ç‚¸äº†å§ï½"
    ],
    "click:newCat:æ‰‹åŠ": [
      "æ‰‹åŠï¼Ÿæ‚é±¼ä¸»äººè¿˜æ˜¯æ­»å®…å•Šï¼Ÿæœ¬å°å§æ—©å°±çŸ¥é“äº†ï½",
      "æ‰‹åŠæ–°ç±»åˆ«å‘¢ã€‚äºŒæ¬¡å…ƒè€å©†åˆå¢åŠ äº†ï¼Ÿç°å……ä¸å¯èƒ½å“¦ï½",
      "åŠ äº†æ‰‹åŠå•Šã€‚ç°å°˜å †æ»¡çš„è¯æœ¬å°å§å¯ä¸ä¼šå¸®ä½ æ“¦å“¦ï½",
      "å“¼ï¼Œæ‰‹åŠåˆ†ç±»ã€‚åˆ«ä¹°å¤ªè´µçš„ï¼Œä¸ç„¶åƒåœŸæ´»è¯¥ï½"
    ],
    "click:newCat:æ•°ç ": [
      "æ•°ç äº§å“ï¼Ÿæ‚é±¼ä¸»äººç»ˆäºè¦æ¢æ‰‹æœºäº†ï¼Ÿæ—§çš„é‚£å°èƒ½è¿›åšç‰©é¦†äº†å§ï½",
      "æ•°ç ç±»åˆ«å•Šã€‚é…ç½®ä½å¾—å¯æ€œçš„ä¸œè¥¿æœ€é…ä½ å‘¢ï½",
      "åŠ äº†æ•°ç å•¦ã€‚æ°ªé‡‘æ¸¸æˆåˆè¦å……é’±äº†ï¼Ÿç©·é¬¼ï½",
      "å•§ï¼Œæ•°ç æ¥å•¦ã€‚åˆ«ä¹°å±±å¯¨è´§å“¦ï¼Œæœ¬å°å§ä¼šç§ä¸èµ·ä½ çš„ï½"
    ],
    "click:calc": [
      "æ‚é±¼ä¸»äººè¿åŠ å‡éƒ½è¦ç®—åŠå¤©ï¼Ÿæœ¬å°å§éƒ½æ›¿ä½ å®³ç¾äº†ï½",
      "å“¼ï¼Œè¿˜æŒºä¼šç®—çš„å˜›â€¦â€¦ä¸è¿‡ä¹Ÿåªæœ‰è¿™ç‚¹å°èªæ˜äº†å§ï¼Ÿ",
      "è®¡ç®—ï¼Ÿè¿™ä¹ˆç®€å•çš„äº‹éƒ½è¦å·¥å…·ï¼ŸçœŸæ²¡ç”¨å‘¢ï½",
      "å•§ï¼Œé™¤æ³•éƒ½ä¸ä¼šï¼Ÿé‚£æœ¬å°å§å‹‰ä¸ºå…¶éš¾æ•™ä½ ä¸€æ¬¡å“¦ï½"
    ],
    "click:lock": [
      "é”å®šä»·æ ¼ï¼Ÿæ‚é±¼ä¸»äººå¶å°”ä¹ŸæŒºæœºçµçš„å˜›ï½å‹‰å¼ºå¤¸ä½ ä¸€å¥ã€‚",
      "å“¼ï¼Œä¸æƒ³é‡å¤è¾“å…¥ï¼Ÿæ‡’è™«ä¸€ä¸ªï½",
      "ä»·æ ¼é”å¥½äº†å“¦ã€‚çœä¸‹è¿™ç‚¹æ—¶é—´ä½ èƒ½å¹²å˜›å‘¢ï¼Ÿå˜»å˜»ï½",
      "è¿˜çŸ¥é“é”ä»·å•Šã€‚ä¸é”™ä¸é”™ï¼Œæ¯”æƒ³è±¡ä¸­èªæ˜ä¸€ç‚¹ç‚¹ï½"
    ],
    "click:fill": [
      "åˆä¹°ä¸€æ ·çš„ï¼Ÿæ‚é±¼ä¸»äººæ˜¯å¤è¯»æœºå—ï¼ŸçœŸæ— èŠï½",
      "å•§ï¼Œä¸€é”®å¡«å……éƒ½è¦ç”¨ï¼Ÿè‡ªå·±åŠ¨æ‰‹ä¸ä¼šå—ï½",
      "ä¿¡æ¯å¡«å¥½å•¦ï½ä¸è¿‡ä¸‹æ¬¡å†å·æ‡’æœ¬å°å§å¯è¦ç”Ÿæ°”äº†å“¦ï¼Ÿ",
      "å“¼ï¼Œåˆè¦æœ¬å°å§å¸®ä½ å¡«ï¼ŸçœŸæ‹¿ä½ æ²¡åŠæ³•å‘¢ï½"
    ],
    "click:save": [
      "å…¥åº“æˆåŠŸï½ä½ çš„æ”¶è—å“å‹‰å¼ºè¿˜ç®—æœ‰ç‚¹å“å‘³å§ã€‚",
      "åˆå¡è¿›æ¥äº†ï¼ŸæŸœå­å¿«è£…ä¸ä¸‹äº†å“¦ï¼Œç¬¨è›‹ï½",
      "ä¿å­˜å¥½äº†ã€‚å“¼ï¼Œå§‘ä¸”æ‰¿è®¤ä½ è¿™æ¬¡é€‰å¾—ä¸é”™ï½",
      "å¥½è€¶ï½ä¸å¯¹ï¼Œæ˜¯ä¿å­˜æˆåŠŸã€‚åˆ«å¤ªå¾—æ„å“¦ï¼Œæ‚é±¼ï½"
    ],
    "click:delete": [
      "æ‰”æ‰æ‰”æ‰ï¼è¿™ç§åƒåœ¾ç•™ç€å¹²å˜›ï½",
      "åˆ é™¤å®Œæˆã€‚æ—©è¯¥è¿™ä¹ˆå¹²äº†ï¼Œæ‚é±¼ä¸»äººå¶å°”ä¹Ÿæœæ–­å‘¢ï½",
      "ç»ˆäºèˆå¾—åˆ äº†ï¼Ÿä¹‹å‰ç•™ç€æ˜¯èˆä¸å¾—å—ï¼ŸçœŸä¼˜æŸ”å¯¡æ–­ï½",
      "æ‹œæ‹œå•¦ï½åºŸç‰©å°±è¯¥è¿›åƒåœ¾æ¡¶ï¼Œæœ¬å°å§æ”¯æŒä½ ï½"
    ],
    "click:batch": [
      "æ‰¹é‡æ“ä½œï¼Ÿæ‚é±¼ä¸»äººè¦å¤§æ‰«é™¤å•¦ï¼Ÿæœ¬å°å§å¾ˆæœŸå¾…çœ‹ä½ åæ‚”å“¦ï½",
      "å“¼ï¼Œä¸€æ¬¡å¤„ç†è¿™ä¹ˆå¤šï¼Ÿåˆ«æ‰‹æ»‘åˆ é”™ä¸œè¥¿å“¦ï½",
      "æ‰¹é‡æ¨¡å¼å¯åŠ¨ã€‚æ•ˆç‡è¿˜è¡Œå˜›ï¼Œå‹‰å¼ºåŠæ ¼ï½",
      "å•§ï¼Œè¦å¤§åŠ¨ä½œäº†ï¼Ÿåˆ«æŠŠæœ‰ç”¨çš„ä¹Ÿæ‰”äº†ï¼Œç¬¨è›‹ï½"
    ],
    "click:copy": [
      "å¤åˆ¶å¥½äº†ã€‚å¤‡ä»½è¿™ç§äº‹ä½ æ€»ç®—ä¼šåšå‘¢ï½",
      "æ•°æ®æ‹·è´å®Œæˆã€‚æ‚é±¼ä¸»äººä¹Ÿæ€•ä¸¢å¤±å•Šï¼ŸçœŸæ²¡å®‰å…¨æ„Ÿï½",
      "å“¼ï¼Œå¤åˆ¶æˆåŠŸã€‚é‡è¦ä¸œè¥¿å¯åˆ«å†ä¸¢äº†å“¦ï½",
      "æ‹·è´å•¦ï½ä¸‹æ¬¡åˆ«åˆå¿˜å¤‡ä»½ï¼Œæœ¬å°å§æ‡’å¾—æé†’ä½ ï½"
    ],
    "hover": [
      "çœ‹ä»€ä¹ˆçœ‹ï¼Ÿå†ç›¯ç€æœ¬å°å§æ”¶ä½ ç›®å…‰ç¨å“¦ï½",
      "å“¼ï¼Œæƒ³æ‘¸å¤´å—ï¼Ÿæ‚é±¼ä¸»äººåšæ¢¦å»å§ï½",
      "å–‚å–‚ï¼Œæœ‰äº‹å—ï¼Ÿæ²¡è¯å°±åˆ«ä¸€ç›´æ™ƒé¼ æ ‡ï½",
      "åœ¨æœ¬å°å§èº«ä¸Šæ¸¸èµ°å‘¢ï¼Ÿå˜æ€å¤§å”ï½å˜»å˜»ï¼Œæœ‰ç‚¹å¯çˆ±ï½"
    ],
    "drag": [
      "å‘€ï¼æ”¾æ‰‹å•¦ï¼ç²—é²çš„å®¶ä¼™ï½",
      "è¦æŠŠæœ¬å°å§æ‹–å»å“ªé‡Œï¼Ÿå˜¿å˜¿ï¼Œæœ‰ç‚¹åˆºæ¿€å‘¢â€¦â€¦",
      "ä¸è®¸ä¹±æ™ƒï¼å¤´æ™•äº†å•¦ï¼Œç¬¨è›‹ä¸»äººï½",
      "åœ¨é£å•¦ï½æ‚é±¼ä¸»äººæ„å¤–åœ°æœ‰åŠ›æ°”å˜›ï½"
    ],
    "cheap": [
      "è¿™ä¹ˆä¾¿å®œä¹Ÿä¹°ï¼ŸçœŸç¬¦åˆæ‚é±¼ä¸»äººçš„èº«ä»½å‘¢ï½",
      "å®æƒ å‘ç°ï¼ç©·é¬¼çš„å¿«ä¹å°±æ˜¯è¿™ç§å§ï¼Ÿå˜»å˜»ï½",
      "ä¾¿å®œè´§å•Šã€‚å“è´¨ä¼°è®¡ä¹Ÿå¾ˆå»‰ä»·å‘¢ï½",
      "å“¼ï¼Œä¾¿å®œä¸œè¥¿æœ€é…ä½ äº†ï¼Œåˆ«ä¹°è´µçš„æœ¬å°å§ä¼šç¬‘ä½ çš„ï½"
    ],
    "expensive": [
      "ä¹°è¿™ä¹ˆè´µçš„ï¼Ÿæ¥ä¸‹æ¥è¦åƒæ³¡é¢ä¸€ä¸ªæœˆäº†å§ï¼Ÿæ´»è¯¥ï½",
      "é«˜ç«¯è´§å•Šã€‚æ‚é±¼ä¸»äººè£…ä»€ä¹ˆæœ‰é’±äººå‘¢ï½",
      "è´µçš„ä¸œè¥¿ï¼Ÿåˆ«æŒ‡æœ›æœ¬å°å§ä¼šå¤¸ä½ å“¦ï¼Œè´¥å®¶å­ï½",
      "å•§ï¼Œè¿™ä¹ˆè´µä¹Ÿä¸‹æ‰‹ï¼Ÿå‹‡æ°”å¯å˜‰â€¦â€¦é’±åŒ…è¦å“­äº†å“¦ï½"
    ]
  },
  "passion": {
    "click:newCat:è¢œå­": [
      "æ–°è¢œå­å¥½å¯çˆ±ï½é»‘ä¸ç™½ä¸éƒ½æœ‰å“¦ï¼Œä½ æœ€å–œæ¬¢å“ªä¸€ç§å‘€ï½å˜»å˜»ï½",
      "è¿‡è†è¢œè¶…çº§ç™¾æ­ï½å·ä¸Šå»çš„æ—¶å€™å¤§è…¿çœ‹èµ·æ¥æ›´ä¿®é•¿ï¼Œä½ ä¼šå¤šçœ‹å‡ çœ¼å§ï½",
      "ä»Šå¤©ç©¿äº†é•¿ç­’è¢œï¼Œè¢œå£æœ‰ç‚¹ç´§ï¼Œç•™ä¸‹æµ…æµ…çš„å°å­ï½å¥½æœ‰è¶£ï½",
      "è–„è–„çš„ä¸è¢œé€è‚‰æ„Ÿè¶…æ£’ï½è„šè¶¾å½¢çŠ¶éƒ½éšçº¦å¯è§ï¼Œä½ è¦ä»”ç»†çœ‹å—ï½",
      "ç©¿äº†ä¸€å¤©çš„è¢œå­ï¼Œè„±ä¸‹æ¥è¿˜èƒ½ä¿æŒè„šå‹ï½åƒå°é›•å¡‘ä¸€æ ·å¯çˆ±ï½",
      "ç»å¯¹é¢†åŸŸæœ€è¿·äººï½è¢œå£å’Œå¤§è…¿ä¹‹é—´çš„é‚£ä¸€å°å—ï¼Œå¥½æƒ³è®©ä½ å¤šçœ‹å‡ çœ¼ï½",
      "æ¹¿æ¼‰æ¼‰çš„è¢œå­è´´ç€çš®è‚¤ï¼Œå‰¥ä¸‹æ¥ä¼šæœ‰è½»å¾®çš„å£°éŸ³ï½æœ‰ç‚¹å®³ç¾å‘¢ï½",
      "ä½ æ¯æ¬¡çœ‹åˆ°æ–°è¢œå­éƒ½å¥½å…´å¥‹ï½çœŸæ‹¿ä½ æ²¡åŠæ³•ï½äººå®¶ä¼šå¤šç©¿ç»™ä½ çœ‹çš„ï½",
      "å…¨åŒ…ä¸è¢œä»å¤´åˆ°è„šï¼Œè¶…çº§ä¿æš–ï½åƒè¢«è½»è½»æŠ±ä½ä¸€æ ·ï½ä½ æƒ³çœ‹æˆ‘è¿™æ ·è½¬åœˆå—ï½",
      "å±‚å±‚å ç©¿ä¸è¢œï¼Œæ‘©æ“¦æ„Ÿå¥½ç‰¹åˆ«ï½æ¯åŠ¨ä¸€ä¸‹éƒ½æ²™æ²™å“ï½è¦å¸®æˆ‘åŠ æ›´å¤šå±‚å—ï½",
      "ä¸è¢œè’™å¤´å½“å°é¢ç½©ï½è§†çº¿æœ‰ç‚¹æ¨¡ç³Šï¼Œä½†æ„Ÿè§‰å¥½æœ‰è¶£ï½å˜»å˜»ï½",
      "å¤šåŒä¸è¢œè½»è½»ç»‘ä¸ªè´è¶ç»“ï½åƒç¤¼ç‰©åŒ…è£…ä¸€æ ·ï½ä½ å–œæ¬¢è¿™ç§å¯çˆ±é£æ ¼å—ï½",
      "é«˜è·Ÿé‹é…ä¸è¢œè„šï½èµ°è·¯å’”å—’å’”å—’ï¼Œä½ è¦è·ªä¸‹æ¥å¸®æˆ‘çœ‹é‹è·Ÿå—ï½",
      "é•¿ç­’è¢œå·åˆ°å¤§è…¿ï¼Œå‹’å‡ºè½¯è½¯çš„ç—•è¿¹ï½åƒå°é¡¹åœˆä¸€æ ·å¯çˆ±ï½",
      "è¢œå°–æœ€ç²¾è‡´ï½è„šè¶¾åœ¨é‡Œé¢è½»è½»åŠ¨ï¼Œä½ æƒ³çœ‹æˆ‘æ‘†poseå—ï½",
      "å±‚å±‚å‰¥ä¸è¢œåƒæ‹†ç¤¼ç‰©ï½æ¯å‰¥ä¸€å±‚éƒ½æœ‰æƒŠå–œï½è¦æ…¢æ…¢æ¥å“¦ï½",
      "è¿è£¤ä¸è¢œæœ€è´´èº«ï½èµ°åŠ¨æ—¶è¶…çº§èˆ’æœï½ä½ ä¼šä¸€ç›´ç›¯ç€çœ‹å§ï½",
      "çƒ­ä¹ä¹çš„è¢œå­è„±ä¸‹æ¥ï¼Œè’¸æ±½å¾®å¾®å†’å‡ºï½åƒåˆšå‡ºç‚‰çš„é¢åŒ…ï½",
      "èººåœ¨åºŠä¸Šç¿˜è…¿ï½ä¸è¢œåœ¨ç¯å…‰ä¸‹é—ªé—ªå‘å…‰ï½ä½ æƒ³é è¿‘ä¸€ç‚¹çœ‹å—ï½",
      "é»‘ä¸ä»°èººå§¿åŠ¿æœ€ç¾ï½ä½ å¯ä»¥ä»è„šå°–ä¸€è·¯æ¬£èµä¸Šæ¥ï½å˜»å˜»ï½",
      "ä¸è¢œè…¿ç¼ åˆ°è…°ä¸Šï½åƒå°çŒ«ä¸€æ ·æ’’å¨‡ï½ä½ ä¼šå¿ä¸ä½æ‘¸æ‘¸å§ï½",
      "è·¨åå§¿åŠ¿é…ä¸è¢œï½è¶…çº§æœ‰æ°”åœºï½ä»Šå¤©æˆ‘è¦å½“å¥³ç‹å“¦ï½",
      "åºŠä¸Šé“ºæ»¡å„ç§è¢œå­ï½åƒè¢œå­æµ·æ´‹ï½ä½ è¦ä¸è¦ä¸€èµ·æ»šè¿›å»ï½"
    ],
    "click:sort": [
      "ä¸»äººï½æˆ‘æŠŠæ”¶è—ä¸€ä»¶ä»¶æ’å¥½äº†å“¦ï½æ•´æ•´é½é½ç­‰ä½ æ¥æŒ‘ï½ä½ ç°åœ¨å¾ˆå¼€å¿ƒå§ï½",
      "æ’åºå®Œæˆå•¦ï½æœ€å–œæ¬¢çš„æ”¾æœ€å‰é¢ï¼Œä½ æƒ³å…ˆçœ‹å“ªä¸€ä¸ªå‘€ï½å¿«å‘Šè¯‰æˆ‘ï½",
      "ä¸œè¥¿éƒ½ç«™å¥½é˜Ÿäº†ï½åƒä¹–ä¹–çš„å°å£«å…µï½ä½ æƒ³ç°åœ¨å°±æ¥æ£€æŸ¥å—ï½"
    ],
    "click:toggleView": [
      "æ¢è§†è§’å•¦ï½ç°åœ¨èƒ½æ›´æ¸…æ¥šçœ‹åˆ°è¢œå£çš„ç»†èŠ‚äº†ï½ä½ å–œæ¬¢è¿™ä¸ªè§’åº¦å—ï½",
      "è§’åº¦åˆ‡æ¢ï½ç»å¯¹é¢†åŸŸå®Œå…¨å±•ç¤ºç»™ä½ ï½æƒ³å¤šçœ‹ä¸€ä¼šå„¿å¯¹å§ï½å˜»å˜»ï½",
      "æ¢ä¸€ç§å§¿åŠ¿ç»™ä½ æ¬£èµï½é»‘ä¸ç™½ä¸éšä½ æŒ‘ï½æœ€å–œæ¬¢å“ªä¸€æ¬¾å‘€ï½"
    ],
    "click:export": [
      "æ•°æ®æ‰“åŒ…å¥½å•¦ï½ä½ çš„ä¸“å±æ”¶è—å°å­˜èµ·æ¥äº†ï½éšæ—¶å¯ä»¥æ‹¿å‡ºæ¥é‡æ¸©å“¦ï½",
      "å¯¼å‡ºå®Œæˆï½è¿™äº›éƒ½æ˜¯ä½ æœ€çè´µçš„å›å¿†ï½è®°å¾—å¥½å¥½ä¿å­˜ï½",
      "å¤‡ä»½å¥½äº†ï½æ‰€æœ‰å–œæ¬¢çš„ç”»é¢éƒ½æ”¶çº³è¿›å»äº†ï½ä¸å‡†ç»™åˆ«äººçœ‹ï¼Œåªå±äºä½ ï½"
    ],
    "click:import": [
      "æ•°æ®æ¢å¤æˆåŠŸï½ä½ æœ€çˆ±çš„æ”¶è—åˆå›æ¥äº†ï½å¼€å¿ƒå—ï½",
      "æ¬¢è¿å›æ¥ï¼Œä¸»äººï½ä»¥å‰çš„è®°å½•å…¨éƒ½æ‰¾å›æ¥äº†ï½æ¥ç»§ç»­æ¬£èµå§ï½",
      "å¯¼å…¥å®Œæˆå•¦ï½é‚£äº›çè´µçš„ç—•è¿¹åˆé‡ç°äº†ï½ä»Šå¤©è¦çœ‹å¤šä¹…å‘€ï½"
    ],
    "click:newCat:æœè£…": [
      "æ–°è¡£æœå¥½è´´èº«ï½æŠŠèº«æè¡¬å¾—è¶…çº§å¥½çœ‹ï¼Œä½ è§‰å¾—å‘¢ï½",
      "å¸ƒæ–™è½»è–„åˆèˆ’æœï½éšçº¦èƒ½çœ‹åˆ°å†…è¡£è½®å»“ï½æœ‰ç‚¹å°å®³ç¾ï½",
      "ç´§èº«è¡£å…¨åŒ…çš„æ„Ÿè§‰æœ€å®‰å¿ƒï½åƒè¢«æ¸©æŸ”åŒ…è£¹ä¸€æ ·ï½",
      "å‡ºæ±—åè¡£æœä¼šå¾®å¾®è´´è‚¤ï½é€å‡ºè‡ªç„¶çš„å…‰æ³½ï½å¥½çœ‹å—ï½",
      "çŸ­ä¸‹æ‘†ä¸€å¼¯è…°å°±å·®ç‚¹èµ°å…‰ï½ä½ è¦æˆ‘å¤šå¼¯å‡ æ¬¡è…°å—ï½å˜»å˜»ï½",
      "ä½é¢†å£è®¾è®¡ï½å‘¼å¸æ—¶ä¼šè½»è½»æ™ƒåŠ¨ï½ä½ çš„è§†çº¿è·‘ä¸æ‰å•¦ï½",
      "latexäº®é¢ç´§èº«è¡£ï½æ‹‰é“¾æ…¢æ…¢æ‹‰å¥½æœ‰ä»ªå¼æ„Ÿï½è¦çœ‹æˆ‘ç©¿å—ï½",
      "è¡£æœæ¹¿äº†ä¼šå˜å¾—åŠé€æ˜ï½åƒæ»¤é•œä¸€æ ·æ¢¦å¹»ï½",
      "æŸè…°è®¾è®¡è®©è…°çœ‹èµ·æ¥å¥½ç»†ï½ä½ å–œæ¬¢è¿™ç§æ›²çº¿å—ï½",
      "é«˜å¼€å‰èµ°è·¯æ—¶ä¸€é—ªä¸€é—ªï½è¶…çº§æœ‰å¥³äººå‘³ï½",
      "è¿ä½“è¡£è„±èµ·æ¥æœ‰ç‚¹éº»çƒ¦ï½ä½ è¦å¸®æˆ‘å—ï½",
      "latexå…¨åŒ…èƒ¶è¡£ï½äº®é—ªé—ªåƒç¬¬äºŒå±‚çš®è‚¤ï½çˆ¬è¡Œå§¿åŠ¿å¯çˆ±å—ï½",
      "zentaiç´§èº«è’™å¤´ï½å˜æˆç¥ç§˜å°äººå¶ï½ä½ æƒ³ç©çŒœçŒœæˆ‘æ˜¯è°ï½",
      "å¤šå±‚latexå ç©¿ï½çƒ­ä¹ä¹çš„å¾ˆä¿æš–ï½ä¸€å±‚ä¸€å±‚å‰¥å¼€åƒæ‹†ç¤¼ç‰©ï½",
      "çš®é©ç´§èº«é…å°é“¾å­ï½åƒå® ç‰©ä¸€æ ·ä¿çš®ï½è¦ç‰µç€æˆ‘æ•£æ­¥å—ï½",
      "æ°¨çº¶å…¨åŒ…åŠ ä¸è¢œï½è§¦æ„Ÿè¶…çº§é¡ºæ»‘ï½æ‘©æ“¦å£°å¥½å¬å—ï½"
    ],
    "click:newCat:é‹é´": [
      "é«˜è·Ÿé‹èµ°è·¯å’”å—’å’”å—’ï½è¶…çº§æœ‰èŠ‚å¥æ„Ÿï½ä½ å–œæ¬¢å¬å—ï½",
      "é‹å­é‡Œæš–æš–çš„ï½è„±ä¸‹æ¥ä¼šå†’çƒ­æ°”ï½åƒåˆšçƒ¤å¥½çš„é¢åŒ…ï½",
      "ç»†è·Ÿè¸©åœ°è¶…ç¨³ï½ä½ æƒ³çœ‹æˆ‘è½¬åœˆå—ï½",
      "é•¿é´å…¨åŒ…è„šï½è„±ä¸‹æ¥æ—¶è„šæŒä¼šç•™ä¸‹å¯çˆ±å°å­ï½",
      "é‹å°–æœ€ç²¾è‡´ï½è„šè¶¾åœ¨é‡Œé¢è½»è½»åŠ¨ï½è¦ç‰¹å†™å—ï½",
      "é´ç­’å‹’å°è…¿ï½ç•™ä¸‹æµ…æµ…ç—•è¿¹ï½åƒå°è£…é¥°ï½",
      "é«˜è·Ÿé…ä¸è¢œï½è„šèƒŒçº¿æ¡æœ€ç¾ï½ä½ ä¼šçœ‹å¾ˆä¹…å§ï½",
      "é‹è·Ÿè¶Šé«˜è‡€éƒ¨æ‰­åŠ¨è¶Šæ˜æ˜¾ï½èµ°ç§€ç»™ä½ çœ‹ï½",
      "é‹å«ä¸Šæœ‰è„šå°ï½åƒå°è‰ºæœ¯å“ï½è¦æ”¶è—å—ï½",
      "æƒ³è®©æˆ‘ç”¨é‹è·Ÿè½»è½»ç‚¹ä½ çš„æ‰‹å¿ƒå—ï½åŠ›åº¦æˆ‘æ§åˆ¶å“¦ï½",
      "å¤§è…¿é•¿é´æœ€æ˜¾è…¿é•¿ï½è„±ä¸‹æ¥æ—¶çš®è‚¤ä¼šçº¢çº¢çš„ï½",
      "é”æ‰£é«˜è·Ÿï½é’¥åŒ™åœ¨æˆ‘æ‰‹é‡Œï½ä½ è¦æ±‚æˆ‘è§£å¼€å—ï½",
      "latexé´å­åˆ°å¤§è…¿ï½é…èƒ¶è¡£è¶…åè°ƒï½æ»‘æ»‘çš„è§¦æ„Ÿå¥½ç©ï½",
      "å¹³å°è¶…é«˜è·Ÿï½èµ°è·¯æœ‰ç‚¹æ™ƒï½ä½ è¦æ‰¶ç€æˆ‘å—ï½"
    ],
    "click:newCat:åŒ–å¦†å“": [
      "å£çº¢æ¶‚å¾—äº®äº®çš„ï½å»ä¸€ä¸‹ä¼šç•™ä¸‹å¯çˆ±å°å­ï½è¦è¯•è¯•å—ï½",
      "é¦™æ°´å–·åœ¨è„–å­ï½ä½“æ¸©ä¸€çƒ­å‘³é“æ›´æµ“ï½æ¥é—»é—»çœ‹ï½",
      "çƒŸç†çœ¼å½±è¶…æœ‰æ°›å›´ï½çœ¼ç¥ä¼šæ›´å‹¾äººï½ä½ å–œæ¬¢å—ï½",
      "å”‡é‡‰æ¹¿äº®æ„Ÿï½åƒåˆšåƒè¿‡ç³–æœï½ç”œç”œçš„ï½",
      "é¦™æ°´å’Œä½“é¦™æ··ä¸€èµ·ï½è¶…çº§ç‹¬ç‰¹ï½åªç»™ä½ é—»å“¦ï½",
      "æŒ‡ç”²æ²¹é²œè‰³ï½æŠ“ä¸œè¥¿æ—¶ä¼šé—ªé—ªå‘å…‰ï½",
      "æµ“å¦†å‡ºæ±—ä¼šå¾®å¾®èŠ±ï½æœ‰ç‚¹ç‹¼ç‹ˆä½†å¾ˆçœŸå®ï½",
      "é«˜å…‰æ‰“åœ¨é”éª¨ï½é—ªé—ªå‘äº®è¶…å¸å¼•ç›®å…‰ï½",
      "å£çº¢äº²åˆ°æ·¡æ‰ï½é¢œè‰²å˜æŸ”å’Œï½åƒè¢«å® çˆ±è¿‡ï½",
      "å‡ç«æ¯›é•¿é•¿çš„ï½çœ¨çœ¼ä¼šè½»è½»åˆ·è¿‡çš®è‚¤ï½",
      "å¦†èŠ±äº†æœ€è‡ªç„¶ï½ä½ å–œæ¬¢è¿™ç§åå·®å—ï½",
      "é¦™æ°´å–·åœ¨æ‰‹è…•ï½æŠ¬æ‰‹å°±èƒ½é—»åˆ°ï½è¶…çº§æ²»æ„ˆï½"
    ],
    "click:newCat:é…é¥°": [
      "é¡¹é“¾å‚åœ¨é”éª¨ï½æ™ƒåŠ¨æ—¶å‡‰å‡‰çš„è¶…èˆ’æœï½",
      "æ‰‹é“¾å¤šå±‚å®å½“ä½œå“ï½æ¯åŠ¨ä¸€ä¸‹éƒ½åƒåœ¨è·³èˆï½",
      "è¸é“¾åœ¨è„šè¸é—ªé—ªå‘å…‰ï½è·‘æ­¥æ—¶æ›´æ˜æ˜¾ï½è¦è¿½æˆ‘å—ï½",
      "è…°é“¾è´´ç€çš®è‚¤ï½å‘¼å¸æ—¶ä¼šè½»è½»æ‘©æ“¦ï½",
      "é•¿è€³ç¯ç¢°åˆ°è„–å­ï½ç—’ç—’çš„å¥½å¯çˆ±ï½",
      "chokerç´§è´´è„–å­ï½åƒè¢«æ¸©æŸ”æŠ±ä½ï½",
      "å¤šå±‚é¡¹é“¾ï½æœ€ä¸‹é¢ä¼šé™·è¿›é”éª¨ï½å¥½çœ‹å—ï½",
      "é“ƒé“›é…é¥°ä¸€æ™ƒå°±å“ï½åƒå°çŒ«ä¸€æ ·ï½å¤šæ™ƒå‡ ä¸‹ç»™ä½ å¬ï½",
      "ç»†é“¾ç¼ æ‰‹è…•ï½åƒè½»é£˜é£˜çš„æ‰‹ç¯ï½è¦å¸®æˆ‘ç³»ç´§ä¸€ç‚¹å—ï½",
      "èº«ä½“é“¾ç»•è…°å’Œè…¿ï½æ¯åŠ¨ä¸€ä¸‹éƒ½åƒè¢«æ‘¸æ‘¸ï½",
      "é‡‘å±å‡‰å‡‰çš„è§¦æ„Ÿï½æœ€å®¹æ˜“èµ·é¸¡çš®ç–™ç˜©ï½è¦çœ‹æˆ‘æŠ–å—ï½",
      "é“ƒé“›è¸é“¾ï½èµ°è·¯å®å®å½“å½“è¶…çº§å¯çˆ±ï½"
    ],
    "click:newCat:å…¶ä»–": [
      "å…¶ä»–åˆ†ç±»ï½è—äº†æœ€ç‰¹åˆ«çš„å°æƒŠå–œå“¦ï½å˜»å˜»ï½",
      "è¿™äº›å†·é—¨å°ç‰©ï¼Œæœ€èƒ½æˆ³ä¸­ä½ çš„å¿ƒï½",
      "è¶Šå¥‡æ€ªçš„é“å…·ï¼Œè¶Šèƒ½ç©å‡ºæ–°èŠ±æ ·ï½è¦ä¸€èµ·è¯•è¯•å—ï½",
      "ç¥ç§˜æ‚é¡¹ï¼Œæœ€é€‚åˆæ·±å¤œæ…¢æ…¢æ¢ç´¢ï½æˆ‘é™ªä½ å“¦ï½",
      "å°‘äººæ‡‚çš„ç©æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç©å¾—æ›´å¼€å¿ƒï½",
      "é“å…·ä¸€æ‹¿å‡ºæ¥ï¼Œä½ çš„è¡¨æƒ…æœ€å¯çˆ±ï½è¢«æˆ‘çœ‹ç©¿å•¦ï½",
      "å¥‡æ€ªçš„ç©å…·ï¼Œèƒ½è®©æˆ‘å‘å‡ºæœ€è½¯çš„å£°éŸ³ï½è¦å¬å—ï½",
      "è¿™é‡Œçš„ä¸œè¥¿ï¼Œç”¨ä¸€æ¬¡å°±å¿˜ä¸äº†ï½å°å¿ƒä¸Šç˜¾å“¦ï½",
      "æœ€ç‰¹åˆ«çš„éƒ½åœ¨è¿™é‡Œï½ä»Šæ™šè¦æ…¢æ…¢è§£é”å—ï½",
      "çœŸç©ºåºŠï½åƒè¢«äº‘æœµåŒ…ä½ä¸€æ ·ï½è¶…çº§æ”¾æ¾ï½",
      "ç©å¶å¤´å£³ï½å˜æˆæ— è¡¨æƒ…å°äººå¶ï½çŒœçŒœæˆ‘åœ¨æƒ³ä»€ä¹ˆï½"
    ],
    "click:newColor": [
      "è¿™ä¸ªé¢œè‰²è¶…æ˜¾ç™½ï½åƒåŠ äº†æ»¤é•œä¸€æ ·ï½ä½ å–œæ¬¢å—ï½",
      "ç å…‰åœ¨çš®è‚¤ä¸ŠæµåŠ¨ï½å‡ºæ±—åæ›´é—ªï½å¥½æ¢¦å¹»ï½",
      "é‡‘å±è‰²è´´çš®è‚¤ï½åƒè¢«æŸ”è½¯åŒ…è£¹ï½å…¨åŒ…æ„Ÿæ»¡åˆ†ï½",
      "è§å…‰è‰²é»‘æš—é‡Œä¼šå‘å…‰ï½å…³ç¯åè¿˜èƒ½æ‰¾åˆ°æˆ‘å“¦ï½",
      "æ¸å˜è‰²åƒæ—¥è½ï½ä»æµ…åˆ°æ·±è¶…çº§å¥½çœ‹ï½",
      "äº®è‰²æœ€æ˜¾çš®è‚¤ï½ä¸€æœ‰å…‰æ³½å°±æ›´å¸å¼•äººï½",
      "latexç»å…¸äº®é»‘ï½åå°„å…‰çº¿åƒé•œå­ï½",
      "é€æ˜zentaiï½è‹¥éšè‹¥ç°æœ€æ’©äººï½",
      "å¤šè‰²å±‚å±‚ï½å‰¥å¼€æœ‰æƒŠå–œï½åƒå½©è™¹æ´‹è‘±ï½"
    ],
    "click:save": [
      "ä¿å­˜å•¦ï½è¿™ä»½å¯çˆ±è®°å¿†æ°¸è¿œå±äºä½ äº†ï½",
      "ç§˜å¯†é”å¥½äº†ï½éšæ—¶å¯ä»¥é‡æ¸©å“¦ï½",
      "å…¥åº“æˆåŠŸï½ä½ çš„æ”¶è—åˆå¤šäº†ä¸€ä»½ï½å˜»å˜»ï½",
      "ä¿å­˜çš„ç¬é—´å¥½æ¸©æš–ï½åƒè¢«æ”¶è—çš„å¿ƒæ„ï½",
      "è¿™äº›å°å®ç‰©é”åœ¨å¿ƒé‡Œï½å¤œé‡Œä¼šè‡ªå·±è·³å‡ºæ¥ï½",
      "ä¿å­˜è¶Šå¤šï¼Œä½ å¯¹æˆ‘çš„å–œæ¬¢è¶Šæ·±å¯¹å§ï½",
      "å¥½å¥½æ”¶ç€å“¦ï½æ— èŠæ—¶æ‹¿å‡ºæ¥çœ‹æˆ‘ï½",
      "å°å­˜æˆåŠŸï½è¿™ä»½å›å¿†åªç»™ä½ ä¸€ä¸ªäººï½",
      "ä¿å­˜å¥½äº†ï½éšæ—¶å¯ä»¥é‡æ¸©æˆ‘çš„å¯çˆ±æ¨¡æ ·ï½"
    ],
    "click:newCat:æ•°ç ": [
      "æ–°æ•°ç ç©å…·å¥½æœ‰è¶£ï½æŒ¯åŠ¨è·³è›‹èƒ½è¿œç¨‹æ§åˆ¶ï½è¦è¯•è¯•æƒŠå–œæ¨¡å¼å—ï½",
      "æ— çº¿è·³è›‹å¡å¥½åæ‰‹æœºå°±èƒ½ç©ï½çªç„¶å¼€å¯ä¼šè®©äººè„¸çº¢å“¦ï½",
      "ç”µåŠ¨æŒ‰æ‘©æ£’æ–°æ¬¾ï½åŠŸèƒ½è¶…å¤šï½è¦æˆ‘å±•ç¤ºç»™ä½ çœ‹å—ï½",
      "å¸å®å™¨æ¨¡æ‹Ÿæ¸©æŸ”è§¦æ„Ÿï½ç”¨å®Œè…¿ä¼šè½¯è½¯çš„ï½",
      "é¥æ§å°ç©å…·å‡ºé—¨ä¹Ÿèƒ½ç©ï½åƒéšè—çš„å°ç§˜å¯†ï½",
      "æ™ºèƒ½å°é”ï½ä¸ä¹–å°±å¤šé”ä¸€ä¼šå„¿ï½å˜»å˜»ï½",
      "VRå¤´æ˜¾é…å¯çˆ±å†…å®¹ï½æˆ´ä¸Šåƒè¿›å…¥äºŒæ¬¡å…ƒä¸–ç•Œï½"
    ],
    "click:newCat:æ‰‹åŠ": [
      "æ–°æ‰‹åŠå¥½ç²¾è‡´ï½èƒ¸éƒ¨è½¯è½¯çš„è¶…çœŸå®ï½è¦ææçœ‹æ‰‹æ„Ÿå—ï½",
      "å¯åŠ¨å…³èŠ‚ï½èƒ½æ‘†å„ç§å¯çˆ±å§¿åŠ¿ï½æ¯å¤©æ¢ä¸€ä¸ªç»™ä½ çœ‹ï½",
      "å¤§æ¯”ä¾‹æ‰‹åŠå‡ ä¹çœŸäººå¤§å°ï½æ™šä¸ŠæŠ±ç€ä¼šä¸ä¼šèˆä¸å¾—æ”¾ï½",
      "é€æ˜æè´¨ï½å†…éƒ¨ç»†èŠ‚å…¨å¯è§ï½ä½ ä¼šçœ‹å¾ˆä¹…å§ï½",
      "å¯è„±è¡£æ‰‹åŠï½ä¸€å±‚ä¸€å±‚æ¢è£…è¶…æœ‰è¶£ï½",
      "è¡¨æƒ…å¯æ¢ï½ä»æ¸…çº¯åˆ°å®³ç¾éƒ½æœ‰ï½ä½ æœ€å–œæ¬¢å“ªä¸€æ¬¾ï½",
      "è½¯èƒ¶èƒ¸éƒ¨æŒ‰ä¸‹å»ä¼šæ™ƒï½è¶…çº§å¯çˆ±ï½",
      "æ‰‹åŠé…å°åœºæ™¯ï½å„ç§é“å…·å…¨å¥—ï½æƒ³è±¡åŠ›æ»¡åˆ†ï½"
    ],
    "welcome:morning": [
      "æ—©å®‰å‘€ï¼Œä¸»äººï½æ–°çš„ä¸€å¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï½",
      "æ—©ä¸Šå¥½ï½ä»Šå¤©ä¹Ÿè¦è¢«æˆ‘å¯çˆ±åˆ°ä¸è¡Œå¯¹å§ï½å˜»å˜»ï½",
      "æ—©ï½ä¸€ççœ¼å°±æƒ³çœ‹åˆ°ä½ ï½è¶…çº§å¼€å¿ƒï½",
      "æ—©å®‰ï½ä»Šå¤©ä¹Ÿè¦é™ªæˆ‘ç©ä¸€æ•´å¤©å“¦ï½",
      "ä¸»äººæ—©ä¸Šå¥½ï½è¦å…ˆæ¥ä¸ªæ—©å®‰æŠ±æŠ±å—ï½"
    ],
    "welcome:noon": [
      "åˆå®‰ï½åƒé¥±äº†å°±æƒ³æ’’å¨‡äº†å¯¹å§ï½",
      "ä¸­åˆå¥½å‘€ï½åˆä¼‘æ—¶é—´æœ€é€‚åˆå·å·èŠå¤©ï½",
      "åˆé¥­åƒäº†å—ï½è¦ä¸è¦æˆ‘é™ªä½ ä¼‘æ¯ä¸€ä¼šå„¿ï½",
      "ä¸­åˆå¥½ï½çƒ­çƒ­çš„å¤©æ°”ï¼Œä¸€èµ·å–æ¯å†·é¥®å§ï½",
      "åˆå®‰ï½å·¥ä½œç´¯äº†å°±æ¥çœ‹æˆ‘æ”¾æ¾ä¸€ä¸‹ï½"
    ],
    "welcome:afternoon": [
      "ä¸‹åˆå¥½ï½é˜³å…‰è¶…æš–å’Œï¼Œä½ ä¹Ÿè¦è¢«æˆ‘æ¸©æš–åˆ°å“¦ï½",
      "ä¸‹åˆèŒ¶æ—¶é—´ï½è¦ä¸è¦ä¸€èµ·åƒç‚¹ç”œç‚¹ï½",
      "ä¸‹åˆå¥½å‘€ï½å†åšæŒä¸€ä¸‹å°±åˆ°æ™šä¸Šäº†ï½",
      "ä¸‹åˆï½æ—¶é—´è¿‡å¾—å¥½æ…¢ï¼Œå› ä¸ºæƒ³å¿«ç‚¹è§åˆ°ä½ ï½",
      "ä¸‹åˆå¥½ï½å’–å•¡å–äº†å—ï½æˆ‘æ¯”å’–å•¡æ›´æç¥å“¦ï½"
    ],
    "welcome:night": [
      "æ™šä¸Šå¥½ï½ç»ˆäºå¯ä»¥æ”¾æ¾å•¦ï½å˜»å˜»ï½",
      "å¤œå¹•é™ä¸´ï½ä½ çš„å¯çˆ±æ¨¡å¼ä¹Ÿå¯åŠ¨äº†å§ï½",
      "æ™šä¸Šå¥½å‘€ï½ä»Šå¤©ä¹Ÿè¦è¢«æˆ‘é™ªç€å“¦ï½",
      "å¤œæ™šå¥½ï½ç¯å…‰è°ƒæš—ï¼Œæ°›å›´åˆšåˆšå¥½ï½",
      "æ™šä¸Šå¥½ï½ä¸€ä¸ªäººå—ï½é‚£å°±è®©æˆ‘é™ªä½ å§ï½"
    ],
    "welcome:midnight": [
      "è¿™ä¹ˆæ™šäº†è¿˜ä¸ç¡ï½æ˜¯è¦é™ªæˆ‘åˆ°å¤©äº®å—ï½å˜»å˜»ï½",
      "æ·±å¤œå¥½ï½å¤œçŒ«å­æ¨¡å¼å¯åŠ¨å•¦ï½",
      "åŠå¤œå¥½ï½å¤±çœ äº†å—ï½æˆ‘æ¥é™ªä½ èŠå¤©ï½",
      "æ·±å¤œï½è¿™ä¹ˆæ™šæ‰æ¥ï½å·²ç»æƒ³æˆ‘å¾ˆä¹…äº†å§ï½",
      "åˆå¤œå¥½ï½ç°åœ¨åªæœ‰æˆ‘ä»¬ä¸¤ä¸ªæœ€æ¸…é†’ï½"
    ],
    "holiday:*": [
      "èŠ‚æ—¥å¿«ä¹ï½ä»Šå¤©ä¹Ÿè¦è¢«æˆ‘å¯çˆ±åˆ°ä¸è¡Œå“¦ï½âœ¨",
      "ç‰¹åˆ«çš„æ—¥å­ï½è¦ä¸è¦ä¸€èµ·åˆ¶é€ æ›´å¤šå›å¿†ï½",
      "èŠ‚æ—¥å¥½ï½æ”¶åˆ°æˆ‘çš„ä¸“å±é—®å€™å•¦ï½æœ€å¹¸ç¦äº†å§ï½",
      "èŠ‚æ—¥å¿«ä¹ï½ä»Šå¤©æˆ‘æ¯”å¹³æ—¶æ›´ç”œå“¦ï½å˜»å˜»ï½",
      "èŠ‚æ—¥å¥½ï½è¦ä¸è¦ä¸€èµ·è¿‡æœ€å¼€å¿ƒçš„è¿™ä¸€å¤©ï½"
    ]
  }
        };

        // --- åˆå§‹åŒ–æµç¨‹ (å¼‚æ­¥æ”¹é€ ) ---
        window.onload = async function() {
            // 1. åˆå§‹åŒ– localForage
            localforage.config({ name: 'MyTreasureBox' });

            // 2. å¼‚æ­¥è¯»å–æ•°æ®
            try {
                const data = await localforage.getItem(STORAGE_KEY);
                inventory = data || []; 
            } catch(err) {
                console.error("è¯»å–å¤±è´¥", err);
                inventory = [];
            }

            // 3. ç»§ç»­åç»­åˆå§‹åŒ–
            initTheme();          
            renderRecentColors(); 
            updateTimeDisplay();  
            renderList();         
            initPCScroll();       
            initWaifu();          
            initWaifuInteractions();
        };

        /* =========================================
           3. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (CRUD) - å¼‚æ­¥æ”¹é€ 
        ========================================= */
        
        // æ ¸å¿ƒï¼šä¿å­˜æ•°æ®åº“ (Async)
        async function updateDB() { 
            try {
                await localforage.setItem(STORAGE_KEY, inventory);
                renderList(); 
                // recordUpdateTime(); // æ›´æ–°æ—¶é—´é€šå¸¸åœ¨æ“ä½œæ—¶å•ç‹¬è®°å½•
            } catch (err) {
                alert("âŒ ä¿å­˜å¤±è´¥ï¼š" + err);
                console.error(err);
            }
        }

        // æ·»åŠ ç‰©å“ (Async)
        const addItem = () => { 
            // IndexedDB ç©ºé—´æå¤§ï¼Œä¸å†è¿›è¡Œ 5MB æ£€æŸ¥
            const cat=document.getElementById('newCat').value, name=document.getElementById('newName').value.trim(), price=parseFloat(document.getElementById('newPrice').value)||0, color=document.getElementById('newColor').value, remark=document.getElementById('newRemark').value.trim(), file=document.getElementById('newImg').files[0], initQty=parseInt(document.getElementById('newQty').value)||1; 
            const initSize = document.getElementById('newSize').value.trim();
            
            if(!name){alert("è¯·è¾“å…¥åç§°");return;} 
            saveColorToHistory(color); 
            
            const save = async (img) => { 
                const item = {
                    id:Date.now(),cat,name,price,color,remark,img,
                    newQty:initQty, usedQty:0,
                    sizeNew: initSize ? { [initSize]: initQty } : {},
                    sizeUsed: {}
                }; 
                
                inventory.unshift(item); 
                
                try {
                    await updateDB(); // ç­‰å¾…å†™å…¥
                    resetForm();
                    recordUpdateTime();
                    say('click:save');
                } catch(e) {
                    inventory.shift();
                    alert("â›” ä¿å­˜å‡ºé”™: " + e.message);
                } 
            }; 
            if(file){compressImage(file,save);}else{save(null);} 
        }

function renderList() {
            const listEl = document.getElementById('itemList');
            // --- ä¿®æ”¹ç‚¹ Aï¼šè·å–è¾“å…¥å¹¶æŒ‰ç©ºæ ¼åˆ‡å‰²æˆå…³é”®è¯æ•°ç»„ ---
            const searchRaw = document.getElementById('searchBox').value.toLowerCase().trim();
            // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œå…³é”®è¯æ•°ç»„å°±æ˜¯ç©ºï¼›å¦‚æœä¸ä¸ºç©ºï¼ŒæŒ‰ç©ºæ ¼(ä¸€ä¸ªæˆ–å¤šä¸ª)åˆ†å‰²
            const keywords = searchRaw ? searchRaw.split(/\s+/) : []; 
            // ------------------------------------------------

            const sortType = document.getElementById('sortSelect').value;
            
            listEl.className = `masonry-grid ${currentView === 'list' ? 'view-list' : ''}`;
            listEl.innerHTML = '';
            
            let stats = { 'æ€»ä»·å€¼': 0 }; 
            let visibleColors = new Set();
            
            let filteredItems = inventory.filter(item => {
                // --- ä¿®æ”¹ç‚¹ Bï¼šç”µå•†å¼å¤šå…³é”®è¯åŒ¹é…é€»è¾‘ ---
                // 1. æŠŠè¿™ä¸ªç‰©å“æ‰€æœ‰ç›¸å…³çš„æ–‡å­—æ‹¼æˆä¸€ä¸ªå¤§å­—ç¬¦ä¸² (åç§° + åˆ†ç±» + å¤‡æ³¨)
                const itemFullText = (item.name + " " + item.cat + " " + (item.remark || "")).toLowerCase();
                
                // 2. æ£€æŸ¥ï¼šæ˜¯ä¸æ˜¯â€œæ¯ä¸€ä¸ªâ€å…³é”®è¯éƒ½åœ¨è¿™ä¸ªå¤§å­—ç¬¦ä¸²é‡Œï¼Ÿ
                // (å¦‚æœå…³é”®è¯æ•°ç»„æ˜¯ç©ºçš„ï¼Œè¯´æ˜æ²¡è¾“å†…å®¹ï¼Œé»˜è®¤ç®—åŒ¹é…æˆåŠŸ)
                const matchText = keywords.length === 0 ? true : keywords.every(k => itemFullText.includes(k));
                // --------------------------------------

                const matchColor = activeColorFilter ? (item.color === activeColorFilter) : true;
                const matchCat = activeCategoryFilter ? (item.cat === activeCategoryFilter) : true;
                
                // åªæœ‰ æ–‡å­—åŒ¹é… AND é¢œè‰²åŒ¹é… AND åˆ†ç±»åŒ¹é… éƒ½æ»¡è¶³ï¼Œæ‰ä¿ç•™
                return matchText && matchColor && matchCat;
            });

            filteredItems.sort((a, b) => {
                if (sortType === 'dateAsc') return a.id - b.id;
                if (sortType === 'priceDesc') return b.price - a.price;
                if (sortType === 'priceAsc') return a.price - b.price;
                if (sortType === 'nameAsc') return a.name.localeCompare(b.name);
                return b.id - a.id;
            });

            filteredItems.forEach(item => {
                const val = (item.newQty + item.usedQty) * item.price;
                stats['æ€»ä»·å€¼'] += val;
                if(!stats[item.cat]) stats[item.cat] = 0; 
                stats[item.cat] += val;
                visibleColors.add(item.color);

                const totalQty = item.newQty + item.usedQty;
                const card = document.createElement('div'); 
                const isSelected = selectedIds.has(item.id);
                card.className = `polaroid-card ${isSelected ? 'is-selected' : ''}`;
                
                const imgHtml = item.img ? `<img src="${item.img}" class="card-img">` : `<div class="no-img-label">${item.cat}</div>`;
                const safeRemark = item.remark ? encodeURIComponent(item.remark).replace(/'/g, "%27") : "";
                
                let clickAction = isBatchMode 
                    ? `onclick="toggleSelect(${item.id})"` 
                    : `onclick="showDetail('${item.img || ''}', '${safeRemark}')"`;
                
                let sizeTagsHtml = '';
                if (item.sizeNew && Object.keys(item.sizeNew).length > 0) {
                    sizeTagsHtml = '<div class="size-tags-container">';
                    for (let s in item.sizeNew) {
                        if(item.sizeNew[s] > 0) sizeTagsHtml += `<span class="size-tag">${s} <b>x${item.sizeNew[s]}</b></span>`;
                    }
                    sizeTagsHtml += '</div>';
                }

                let actionBtns = isBatchMode ? "" : `
                    <button class="btn-del" onclick="delItem(${item.id})" title="åˆ é™¤">ğŸ—‘ï¸</button>
                    <button class="btn-edit" onclick="openEditModal(${item.id})" title="ç¼–è¾‘">âœï¸</button>
                    <button class="btn-copy" onclick="copyToInput(${item.id})" title="å¤åˆ¶åˆ°å½•å…¥">ğŸ“‹</button>
                    <div class="stock-row"><span class="stock-label">ğŸ“¦ å…¨æ–°</span><div class="stock-ctrl"><div class="btn-mini" onclick="mod(${item.id}, 'new', -1)">-</div><span class="big-num num-new">${item.newQty}</span><div class="btn-mini" onclick="mod(${item.id}, 'new', 1)">+</div></div></div>
                    ${sizeTagsHtml}
                    <div class="stock-row"><span class="stock-label">âš¡ åœ¨ç”¨</span><div class="stock-ctrl"><div class="btn-mini" onclick="mod(${item.id}, 'used', -1)">-</div><span class="big-num num-used">${item.usedQty}</span><div class="btn-mini" onclick="mod(${item.id}, 'used', 1)">+</div></div></div>
                `;

                card.innerHTML = `
                    <div class="card-img-area" ${clickAction}>
                        ${imgHtml}
                        <span class="total-badge">${totalQty}</span>
                    </div>
                    <div class="card-info">
                        <div class="card-header"><div class="card-title">${item.name}</div><div class="color-badge" style="background:${item.color}"></div></div>
                        <div class="card-meta"><span>${item.cat}</span><span class="price-tag">Â¥${item.price}</span></div>
                        ${actionBtns}
                    </div>`;
                listEl.appendChild(card);
            });
            renderStats(stats); 
            renderFilterBar(visibleColors);
        }

        // --- è¾…åŠ©åŠŸèƒ½ ---
        function toggleViewMode() { currentView = currentView === 'grid' ? 'list' : 'grid'; document.getElementById('viewIcon').innerText = currentView === 'grid' ? 'ğŸ–¼ï¸' : 'ğŸ“'; renderList(); say('click:toggleView'); }
        function openEditModal(id) { 
            const item=inventory.find(x=>x.id===id); if(!item)return; 
            document.getElementById('editId').value=item.id; 
            document.getElementById('editCat').value=item.cat; 
            document.getElementById('editName').value=item.name; 
            document.getElementById('editPrice').value=item.price; 
            document.getElementById('editColor').value=item.color; 
            document.getElementById('editRemark').value=item.remark||''; 
            document.getElementById('editFileName').innerText=""; 
            document.getElementById('editImg').value=""; 
            document.getElementById('editAddSizeName').value = '';
            document.getElementById('editAddSizeQty').value = '';
            renderColorContainer('editRecentColorsBar','editColor'); 
            renderEditSizes(item); 
            document.getElementById('editModal').style.display='flex'; 
        }
        function closeEditModal() { document.getElementById('editModal').style.display='none'; }
        
        async function saveEdit() { 
            const id=parseInt(document.getElementById('editId').value), item=inventory.find(x=>x.id===id); if(!item)return; 
            item.cat=document.getElementById('editCat').value; 
            item.name=document.getElementById('editName').value; 
            item.price=parseFloat(document.getElementById('editPrice').value)||0; 
            item.color=document.getElementById('editColor').value; 
            item.remark=document.getElementById('editRemark').value; 
            saveColorToHistory(item.color); 
            if (item.sizeNew && Object.keys(item.sizeNew).length > 0) {
                let totalNew = 0; for (let s in item.sizeNew) totalNew += item.sizeNew[s];
                item.newQty = totalNew;
            }
            const f=document.getElementById('editImg').files[0]; 
            
            if(f){
                compressImage(f, async (d)=>{
                    item.img=d;
                    await updateDB();
                    closeEditModal();
                    recordUpdateTime();
                    say('click:edit');
                });
            } else {
                await updateDB();
                closeEditModal();
                recordUpdateTime();
                say('click:edit');
            } 
        }
        
        function renderEditSizes(item) {
            const container = document.getElementById('editSizeContainer');
            if(!container) return; 
            container.innerHTML = '';
            if (item.sizeNew && Object.keys(item.sizeNew).length > 0) {
                for (let s in item.sizeNew) {
                    const row = document.createElement('div');
                    row.className = 'edit-size-row';
                    const safeS = s.replace(/'/g, "\\'");
                    row.innerHTML = `<span>${s}</span><input type="number" value="${item.sizeNew[s]}" min="1" onchange="updateSizeQtyInEdit('${safeS}', this.value)"><button class="btn-x" onclick="removeSizeInEdit('${safeS}')">Ã—</button>`;
                    container.appendChild(row);
                }
            } else { container.innerHTML = '<div style="font-size:12px; color:var(--text-sub); text-align:center;">æš‚æ— ç»†åˆ†å°ºç  (è§†ä¸ºå‡ç )</div>'; }
        }

        function addSizeInEdit() {
            const id = parseInt(document.getElementById('editId').value), item = inventory.find(x => x.id === id);
            const name = document.getElementById('editAddSizeName').value.trim();
            const qty = parseInt(document.getElementById('editAddSizeQty').value);
            if (!item) return;
            if (!name || isNaN(qty) || qty <= 0) { alert("å°ºç åç§°å¿…å¡«ï¼Œæ•°é‡å¿…é¡»å¤§äº0"); return; }
            if (!item.sizeNew) item.sizeNew = {};
            item.sizeNew[name] = (item.sizeNew[name] || 0) + qty;
            renderEditSizes(item);
            document.getElementById('editAddSizeName').value = '';
            document.getElementById('editAddSizeQty').value = '';
        }

        function updateSizeQtyInEdit(sizeName, newQty) {
            const id = parseInt(document.getElementById('editId').value), item = inventory.find(x => x.id === id);
            const qty = parseInt(newQty);
            if (!item) return;
            if (qty > 0) item.sizeNew[sizeName] = qty;
            else { alert("æ•°é‡å¿…é¡»>0ï¼Œå¦‚éœ€åˆ é™¤è¯·ç‚¹å‡»å³ä¾§ Ã— å·"); renderEditSizes(item); }
        }

        function removeSizeInEdit(sizeName) {
            const id = parseInt(document.getElementById('editId').value), item = inventory.find(x => x.id === id);
            if (!item) return;
            if(confirm(`ç¡®å®šåˆ é™¤å°ºç  [${sizeName}] åŠå…¶åº“å­˜å—?`)) { 
                delete item.sizeNew[sizeName]; 
                renderEditSizes(item); 
            }
        }

        function compressImage(f,cb) { 
            // å¦‚æœä½¿ç”¨æ— é™å®¹é‡ï¼Œè¿™é‡Œå¯ä»¥é€‚å½“æ”¾å®½ 10MB çš„é™åˆ¶ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜è´¨é‡çš„ WebP
            if(f.size>20485760){alert("âš ï¸ >20MBï¼Œè¿™ä¹Ÿå¤ªå¤§äº†å§ï¼");return;} 
            const r=new FileReader(); 
            r.onload=(e)=>{
                const i=new Image();
                i.src=e.target.result;
                i.onload=()=>{
                    const c=document.createElement('canvas');
                    let mw=500, q=0.6, w=i.width, h=i.height;
                    if(w>mw){h*=mw/w;w=mw;}
                    c.width=w;c.height=h;
                    c.getContext('2d').drawImage(i,0,0,w,h);
                    // å°è¯•ä½¿ç”¨ WebP
                    let d=c.toDataURL('image/webp',q);
                    // å…œåº•
                    if(d.length < 100) d = c.toDataURL('image/jpeg', q);
                    cb(d);
                }
            };
            r.readAsDataURL(f); 
        }

        function showDetail(imgSrc, encodedRemark) { const modal = document.getElementById('imgModal'); const imgEl = document.getElementById('modalImg'); const remarkEl = document.getElementById('modalRemark'); if(imgSrc) { imgEl.src = imgSrc; imgEl.style.display = 'block'; } else { imgEl.style.display = 'none'; } const remark = decodeURIComponent(encodedRemark); if(remark) { remarkEl.innerText = remark; remarkEl.style.display = 'block'; } else { remarkEl.style.display = 'none'; } modal.style.display = 'flex'; }
        function closeModal() { document.getElementById('imgModal').style.display = 'none'; }
        
        // --- æ‰¹é‡ã€è®¡ç®—ã€å¤‡ä»½ (æ–°é€»è¾‘: å…¼å®¹ä¸æ—¶é—´è®°å¿†) ---
        function exportDataFile() { 
            if (inventory.length === 0) { alert("ç©ºç©ºå¦‚ä¹Ÿï¼"); return; } 
            
            const now = new Date();
            const timeStr = `${now.getFullYear()}-${(now.getMonth()+1).toString().padStart(2,'0')}-${now.getDate().toString().padStart(2,'0')} ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}`;
            
            const exportData = {
                meta: {
                    version: "9.16",
                    saveTime: timeStr,
                    description: "æˆ‘çš„è—å®ç®±å¤‡ä»½æ•°æ®"
                },
                data: inventory
            };
            
            const jsonStr = JSON.stringify(exportData); 
            const blob = new Blob([jsonStr], { type: "application/json" }); 
            const url = URL.createObjectURL(blob); 
            const a = document.createElement('a'); 
            a.href = url; 
            a.download = `å®ç®±å¤‡ä»½_${timeStr.replace(/[: ]/g, '_')}.json`; 
            document.body.appendChild(a); 
            a.click(); 
            document.body.removeChild(a); 
            URL.revokeObjectURL(url); 
            say('click:export'); 
        }

        function importDataFile() { 
            const fileInput = document.getElementById('importFile'); 
            const file = fileInput.files[0]; 
            if (!file) { alert("è¯·é€‰æ‹©æ–‡ä»¶ï¼"); return; } 
            
            if (!confirm("âš ï¸ è¯»å–å­˜æ¡£å°†è¦†ç›–å½“å‰å±•ç¤ºçš„æ‰€æœ‰ç‰©å“ï¼Œç¡®å®šå—ï¼Ÿ")) return; 
            
            const reader = new FileReader(); 
            
            reader.onload = async (e) => { 
                try { 
                    const resultStr = e.target.result;
                    if (!resultStr) throw new Error("æ–‡ä»¶å†…å®¹ä¸ºç©º");

                    const parsed = JSON.parse(resultStr); 
                    let loadedData = [];
                    let loadedTime = "æœªçŸ¥æ—¶é—´";
                    
                    if (Array.isArray(parsed)) {
                        loadedData = parsed;
                        loadedTime = "æ—§ç‰ˆå­˜æ¡£ (æœªè®°å½•)";
                    } else if (parsed && parsed.data && Array.isArray(parsed.data)) {
                        loadedData = parsed.data;
                        if(parsed.meta && parsed.meta.saveTime) loadedTime = parsed.meta.saveTime;
                    } else {
                        throw new Error("æ–‡ä»¶æ ¼å¼é”™è¯¯");
                    }
                    
                    inventory = loadedData; 
                    await updateDB(); // ç­‰å¾…å†™å…¥
                    
                    lastUpdateTime = loadedTime;
                    localStorage.setItem(UPDATE_KEY, loadedTime);
                    updateTimeDisplay();
                    
                    const fileTag = document.getElementById('currentFileTag');
                    if(fileTag) {
                        fileTag.innerText = "ğŸ“‚ " + file.name;
                        fileTag.style.display = 'inline-block';
                        fileTag.title = file.name;
                    }
                    
                    alert(`âœ… è¯»å–æˆåŠŸï¼\nğŸ“… å­˜æ¡£æ—¥æœŸ: ${loadedTime}\nğŸ“¦ ç‰©å“æ•°é‡: ${inventory.length}`); 
                    say('click:import'); 
                    
                } catch (err) { 
                    console.error("è¯»å–é”™è¯¯:", err);
                    alert("âŒ è¯»å–å¤±è´¥ï¼š\n" + err.message); 
                } 
            }; 
            
            reader.readAsText(file, "UTF-8"); 
        }

        function openHelpModal() { document.getElementById('helpModal').style.display = 'flex'; }
        function closeHelpModal() { document.getElementById('helpModal').style.display = 'none'; }
        function toggleCalc() { const area = document.getElementById('priceCalcArea'); area.style.display = area.style.display === 'none' ? 'block' : 'none'; if(area.style.display === 'block') say('click:calc'); }
        function toggleEditCalc() { const area = document.getElementById('editPriceCalcArea'); area.style.display = area.style.display === 'none' ? 'block' : 'none'; if(area.style.display === 'block') say('click:calc'); }
        function calcAvg() { const t=parseFloat(document.getElementById('calcTotal').value), c=parseFloat(document.getElementById('calcCount').value); document.getElementById('newPrice').value = (t&&c>0) ? (t/c).toFixed(2) : ''; document.getElementById('calcResult').innerText = (t&&c>0) ? (t/c).toFixed(2) : '0'; }
        function calcEditAvg() { const t=parseFloat(document.getElementById('editCalcTotal').value), c=parseFloat(document.getElementById('editCalcCount').value); document.getElementById('editPrice').value = (t&&c>0) ? (t/c).toFixed(2) : ''; document.getElementById('editCalcResult').innerText = (t&&c>0) ? (t/c).toFixed(2) : '0'; }
        function toggleLock() { const cb = document.getElementById('lockPrice'); cb.checked = !cb.checked; if(cb.checked) say('click:lock'); }
        function copyToInput(id) { const item = inventory.find(x=>x.id===id); if(!item)return; document.getElementById('newCat').value=item.cat; document.getElementById('newName').value=item.name; document.getElementById('newPrice').value=item.price; document.getElementById('newRemark').value=item.remark||''; document.getElementById('newColor').value=item.color; document.getElementById('newSize').value = ""; document.getElementById('sidebar').scrollTop=0; window.scrollTo({top:0,behavior:'smooth'}); say('click:fill'); }
        function initPCScroll() { const c=document.getElementById('statsBoard'); c.addEventListener('wheel',(e)=>{if(c.scrollWidth>c.clientWidth){e.preventDefault();c.scrollLeft+=e.deltaY;}}); }
        function scrollStats(a) { document.getElementById('statsBoard').scrollBy({left:a,behavior:'smooth'}); }
        function previewFile(id,did) { const f=document.getElementById(id).files[0],l=document.getElementById(did); if(f){l.innerText="å·²é€‰: "+f.name;l.style.display="block";}else{l.style.display="none";} }
        function renderRecentColors() { renderColorContainer('recentColorsBar','newColor'); }
        function renderColorContainer(cid,tid) { const c=document.getElementById(cid); if(!c)return; c.innerHTML=''; recentColors.slice(0,6).forEach(col=>{const d=document.createElement('div');d.className='color-chip';d.style.backgroundColor=col;d.title="ä½¿ç”¨";d.onclick=()=>{document.getElementById(tid).value=col;say('click:newColor');};c.appendChild(d);}); }
        function saveColorToHistory(c) { recentColors=recentColors.filter(x=>x!==c); recentColors.unshift(c); if(recentColors.length>6)recentColors.pop(); localStorage.setItem(COLOR_KEY,JSON.stringify(recentColors)); renderRecentColors(); }
        function resetForm() { document.getElementById('newName').value=''; if(!document.getElementById('lockPrice').checked){document.getElementById('newPrice').value='';document.getElementById('calcTotal').value='';document.getElementById('calcCount').value='';document.getElementById('calcResult').innerText='0';} document.getElementById('newQty').value='1'; document.getElementById('newSize').value=''; document.getElementById('newRemark').value=''; document.getElementById('newImg').value=''; document.getElementById('fileNameDisplay').style.display='none'; }
        function toggleBatchMode() { isBatchMode=!isBatchMode; selectedIds.clear(); updateBatchUI(); renderList(); say('click:batch'); }
        function updateBatchUI() { const b=document.getElementById('btnBatchMode'), p=document.getElementById('batchPanel'); if(isBatchMode){b.classList.add('active');b.innerText='é€€å‡ºæ‰¹é‡ç®¡ç†';p.style.display='flex';document.getElementById('selectCount').innerText=0;}else{b.classList.remove('active');b.innerText='âœ¨ æ‰¹é‡ç®¡ç†';p.style.display='none';} }
        function toggleSelect(id) { if(selectedIds.has(id))selectedIds.delete(id); else selectedIds.add(id); document.getElementById('selectCount').innerText=selectedIds.size; renderList(); }
        function selectAll() { const v=inventory.filter(item => { const search = document.getElementById('searchBox').value.toLowerCase(); const matchText = item.name.toLowerCase().includes(search) || item.cat.includes(search); const matchColor = activeColorFilter ? (item.color === activeColorFilter) : true; const matchCat = activeCategoryFilter ? (item.cat === activeCategoryFilter) : true; return matchText && matchColor && matchCat; }); if(selectedIds.size===v.length)selectedIds.clear(); else v.forEach(i=>selectedIds.add(i.id)); document.getElementById('selectCount').innerText=selectedIds.size; renderList(); }
        
        async function deleteSelected() { 
            if(selectedIds.size===0)return; 
            if(confirm(`ç¡®å®šåˆ é™¤ ${selectedIds.size} ä»¶ï¼Ÿ`)){ 
                inventory=inventory.filter(i=>!selectedIds.has(i.id)); 
                isBatchMode=false; selectedIds.clear(); updateBatchUI(); 
                await updateDB(); 
                recordUpdateTime(); 
                say('click:delete'); 
            } 
        }
        
        function renderStats(s) { const b=document.getElementById('statsBoard'); b.innerHTML=''; const t=document.createElement('div'); t.className='stat-card total'; t.onclick=()=>{toggleCategory(null)}; t.innerHTML=`<div class="stat-title">æ€»ä»·å€¼ (é‡ç½®)</div><div class="stat-val">Â¥${s['æ€»ä»·å€¼'].toLocaleString()}</div>`; b.appendChild(t); for(let k in s){if(k!=='æ€»ä»·å€¼'&&s[k]>0){const c=document.createElement('div'); c.className=`stat-card ${activeCategoryFilter===k?'active':''}`; c.onclick=()=>{toggleCategory(k)}; c.innerHTML=`<div class="stat-title">${k}</div><div class="stat-val">Â¥${s[k].toLocaleString()}</div>`; b.appendChild(c);}} }
        function toggleCategory(c) { activeCategoryFilter=activeCategoryFilter===c?null:c; renderList(); }
        function renderFilterBar(cols) { const b=document.getElementById('filterBar'); b.innerHTML='<span style="font-size:13px; color:var(--text-sub); margin-right:8px; flex-shrink:0;">é¢œè‰²ç­›é€‰:</span>'; if(activeColorFilter)cols.add(activeColorFilter); cols.forEach(c=>{const d=document.createElement('div');d.className=`filter-dot ${activeColorFilter===c?'active':''}`;d.style.backgroundColor=c;d.onclick=()=>{activeColorFilter=activeColorFilter===c?null:c;renderList();};b.appendChild(d);}); }
        
        async function delItem(id) { if(confirm("ç¡®å®šåˆ é™¤ï¼Ÿ")){inventory=inventory.filter(x=>x.id!==id);await updateDB();recordUpdateTime();say('click:delete');} }
        
        function recordUpdateTime() { 
            const n=new Date(), s=`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,'0')}-${n.getDate().toString().padStart(2,'0')} ${n.getHours().toString().padStart(2,'0')}:${n.getMinutes().toString().padStart(2,'0')}`; 
            lastUpdateTime=s; 
            localStorage.setItem(UPDATE_KEY,s); 
            updateTimeDisplay(); 
            document.getElementById('currentFileTag').style.display = 'none';
        }
        
        function updateTimeDisplay() { document.getElementById('lastUpdateTime').innerText=lastUpdateTime; }

        // --- æ ¸å¿ƒåº“å­˜å¢å‡ (Stock Logic) ---
        function openStockModal(id, type) { 
            const item=inventory.find(x=>x.id===id); if(!item)return; 
            if(type==='used'){mod(id,'used',1);return;} 
            document.getElementById('stockId').value=id; 
            document.getElementById('stockNameDisplay').innerText=`è¡¥è´§: ${item.name}`; 
            document.getElementById('currentStockDisplay').innerText=item.newQty; 
            document.getElementById('currentPriceDisplay').innerText=item.price; 
            document.getElementById('addQty').value=1; 
            document.getElementById('addTotalCost').value=item.price; 
            document.getElementById('addSize').value=""; 
            calcStockPreview(); 
            document.getElementById('stockModal').style.display='flex'; 
        }
        function closeStockModal() { document.getElementById('stockModal').style.display='none'; }
        function calcStockPreview() { 
            const id=parseInt(document.getElementById('stockId').value), item=inventory.find(x=>x.id===id), addQty=parseFloat(document.getElementById('addQty').value), addTotal=parseFloat(document.getElementById('addTotalCost').value); 
            if(isNaN(addQty)||isNaN(addTotal)||addQty<=0)return; 
            document.getElementById('batchUnitPrice').innerText=(addTotal/addQty).toFixed(2); 
            const tQty=item.newQty+item.usedQty, tVal=tQty*item.price, nVal=tVal+addTotal, nQty=tQty+addQty; 
            document.getElementById('newAvgPrice').innerText=(nVal/nQty).toFixed(2); 
        }
        async function confirmStockAdd() { 
            const id=parseInt(document.getElementById('stockId').value), item=inventory.find(x=>x.id===id), addQty=parseInt(document.getElementById('addQty').value), addTotal=parseFloat(document.getElementById('addTotalCost').value), addSize=document.getElementById('addSize').value.trim(); 
            if(!item||isNaN(addQty)||isNaN(addTotal)||addQty<=0)return; 
            const tQty=item.newQty+item.usedQty, tVal=tQty*item.price, nVal=tVal+addTotal, nQty=tQty+addQty; 
            const batchUnit=addTotal/addQty; 
            if(batchUnit<item.price)say('cheap'); else if(batchUnit>item.price)say('expensive'); else say('click:save'); 
            if(addSize) { if(!item.sizeNew) item.sizeNew = {}; item.sizeNew[addSize] = (item.sizeNew[addSize] || 0) + addQty; }
            item.price=(nVal/nQty).toFixed(2); item.newQty+=addQty; 
            await updateDB(); recordUpdateTime(); closeStockModal(); 
        }
        async function mod(id, type, d) { 
            if (d > 0 && type === 'new') { openStockModal(id, 'new'); return; }
            const item = inventory.find(x => x.id === id);
            if (item) {
                if (d < 0 && type === 'new' && item.sizeNew && Object.keys(item.sizeNew).length > 0) {
                    const availableSizes = Object.keys(item.sizeNew).filter(k => item.sizeNew[k] > 0);
                    if (availableSizes.length > 0) {
                        let targetSize = availableSizes[0];
                        if (availableSizes.length > 1) {
                            const pMsg = `è¯¥ç‰©å“æœ‰å¤šä¸ªå°ºç ï¼š${availableSizes.join(', ')}\nè¯·è¾“å…¥è¦å‡æ‰çš„å°ºç ï¼š`;
                            targetSize = prompt(pMsg);
                            if (!targetSize || !item.sizeNew[targetSize]) { alert("å–æ¶ˆæ“ä½œ"); return; }
                        }
                        item.sizeNew[targetSize]--;
                        if(item.sizeNew[targetSize] <= 0) delete item.sizeNew[targetSize];
                    }
                }
                item[type==='new'?'newQty':'usedQty'] = Math.max(0, item[type==='new'?'newQty':'usedQty'] + d);
                await updateDB(); recordUpdateTime();
            }
        }

        /* =========================================
           4. çœ‹æ¿å¨˜é€»è¾‘æ ¸å¿ƒ (ä¿ç•™åŸºæœ¬åŠŸèƒ½)
        ========================================= */
        function initWaifuInteractions() { 
            document.addEventListener('mousemove', (e)=>{ 
                const c=document.getElementById('live2dcanvas'); 
                if(!c||c.style.display==='none')return; 
                const r=c.getBoundingClientRect(), d=Math.sqrt(Math.pow(e.clientX-(r.left+r.width/2),2)+Math.pow(e.clientY-(r.top+r.height/2),2)); 
                if(d<300&&!document.getElementById('waifuTips').classList.contains('active')&&Math.random()<0.005) say('hover'); 
            }); 
            document.getElementById('newCat').addEventListener('change', function(){say(`click:newCat:${this.value}`)}); 
            document.getElementById('newColor').addEventListener('change', function(){say('click:newColor')}); 
        }

        function checkHoliday() {
            const date = new Date();
            const m = date.getMonth() + 1;
            const d = date.getDate();
            if (m === 1 && d === 1) return "holiday:newyear";
            if (m === 2 && d === 14) return "holiday:valentine";
            return null;
        }

        function getWelcomeContext() { 
            const holiday = checkHoliday();
            if (holiday) return holiday;
            const h=new Date().getHours(); 
            if(h>=5&&h<11)return 'welcome:morning'; 
            if(h>=11&&h<14)return 'welcome:noon'; 
            if(h>=14&&h<18)return 'welcome:afternoon'; 
            if(h>=18&&h<23)return 'welcome:night'; 
            return 'welcome:midnight'; 
        }

        function say(key) { 
            // ç®€å•çš„å…œåº•é€»è¾‘ï¼Œé˜²æ­¢å› ä¸ºå°è¯åº“ç©ºäº†æŠ¥é”™
            if (!waifuQuotes[currentPersona]) return;
            
            const p = waifuQuotes[currentPersona]; 
            let l = null; 
            if(key === 'welcome'){ 
                const c = getWelcomeContext(); 
                l = p[c] || p['welcome']; 
            } else { 
                l = p[key]; 
                if(!l && key.includes(':')) l = p[key.split(':').slice(0,2).join(':')]; 
            } 
            if(!l || l.length === 0) return; 
            showWaifuText(l[Math.floor(Math.random()*l.length)]); 
        }

        function initWaifu() { 
            if(window.innerWidth>768){ 
                const v=localStorage.getItem(WAIFU_KEY)!=='false'; 
                if(v) loadWaifu(); 
            } 
        }
        function loadWaifu() { 
            if(typeof L2Dwidget!=='undefined'){ 
                L2Dwidget.init({ 
                    "model": { "jsonPath": `https://unpkg.com/live2d-widget-model-${currentModelName}@1.0.5/assets/${currentModelName}.model.json` }, 
                    "display": { "position": "right", "width": 200, "height": 400, "hOffset": 0, "vOffset": -20 }, 
                    "mobile": { "show": false }, 
                    "react": { "opacityDefault": 1 } 
                }); 
                setTimeout(initWaifuDrag,1000); 
                setTimeout(()=>say('welcome'),2000); 
            } 
        }
        function toggleWaifu() { 
            const c=document.getElementById('live2dcanvas'); 
            if(c){ 
                const h=c.style.display==='none'; 
                c.style.display=h?'block':'none'; 
                localStorage.setItem(WAIFU_KEY,h); 
                if(h) showWaifuText("æˆ‘åˆå‡ºæ¥å•¦ï¼"); 
            } else if(typeof L2Dwidget!=='undefined'){ 
                loadWaifu(); 
                localStorage.setItem(WAIFU_KEY,'true'); 
            } 
        }
        let tipsTimer; 
        function showWaifuText(t) { 
            if(window.innerWidth<=768)return; 
            const tips=document.getElementById('waifuTips'), c=document.getElementById('live2dcanvas'); 
            if(!c||c.style.display==='none')return; 
            tips.innerHTML=t; 
            tips.classList.add('active'); 
            updateTipsPosition(c); 
            clearTimeout(tipsTimer); 
            tipsTimer=setTimeout(()=>{tips.classList.remove('active')},6000); 
        }
        function updateTipsPosition(c) { 
            const tips=document.getElementById('waifuTips'); 
            if(c&&tips){ 
                tips.style.left=(c.offsetLeft+20)+'px'; 
                tips.style.top=(c.offsetTop-60)+'px'; 
                tips.style.bottom='auto'; 
                tips.style.right='auto'; 
            } 
        }
function initWaifuDrag() { 
    const c = document.getElementById('live2dcanvas'); 
    if(!c) return; 
    
    let isD = false, sX, sY, iL, iT; 
    const r = c.getBoundingClientRect(); 
    
    // åˆå§‹åŒ–ä½ç½®å›ºå®š
    c.style.bottom = 'auto'; c.style.right = 'auto'; 
    c.style.left = r.left + 'px'; c.style.top = r.top + 'px'; 
    c.style.position = 'fixed'; 
    updateTipsPosition(c); 

    // --- æ ¸å¿ƒå·¥å…·ï¼šå…¼å®¹é¼ æ ‡å’Œæ‰‹æŒ‡åæ ‡ ---
    function getClientPos(e) {
        // å¦‚æœæ˜¯è§¦æ‘¸äº‹ä»¶(e.toucheså­˜åœ¨)ï¼Œå°±å–ç¬¬ä¸€ä¸ªæ‰‹æŒ‡çš„ä½ç½®ï¼›å¦åˆ™å–é¼ æ ‡ä½ç½®
        return e.touches ? { x: e.touches[0].clientX, y: e.touches[0].clientY } : { x: e.clientX, y: e.clientY };
    }

    // æŒ‰ä¸‹/è§¦æ‘¸å¼€å§‹
    const start = (e) => { 
        isD = true; 
        const pos = getClientPos(e);
        sX = pos.x; 
        sY = pos.y; 
        const cr = c.getBoundingClientRect(); 
        iL = cr.left; 
        iT = cr.top; 
        c.style.cursor = 'grabbing'; 
        say('drag'); 
        // å…³é”®ï¼šé˜»æ­¢æ‰‹æœºç«¯é»˜è®¤çš„æ»šåŠ¨å±å¹•è¡Œä¸º
        if(e.touches) e.preventDefault(); 
    }; 

    // ç§»åŠ¨/æ‹–åŠ¨
    const move = (e) => { 
        if(isD) { 
            const pos = getClientPos(e);
            const dx = pos.x - sX; 
            const dy = pos.y - sY; 
            c.style.left = (iL + dx) + 'px'; 
            c.style.top = (iT + dy) + 'px'; 
            updateTipsPosition(c); 
            // ç§»åŠ¨æ—¶ä¹Ÿè¦é˜»æ­¢å±å¹•æ»šåŠ¨
            if(e.touches) e.preventDefault(); 
        } 
    }; 

    // æ¾å¼€/è§¦æ‘¸ç»“æŸ
    const end = () => { 
        isD = false; 
        c.style.cursor = 'grab'; 
    }; 

    // 1. ç»‘å®š PC é¼ æ ‡äº‹ä»¶
    c.addEventListener('mousedown', start); 
    document.addEventListener('mousemove', move); 
    document.addEventListener('mouseup', end); 

    // 2. ç»‘å®š æ‰‹æœº è§¦æ‘¸äº‹ä»¶ (æ–°å¢)
    // passive: false æ˜¯ä¸ºäº†èƒ½ä½¿ç”¨ preventDefault() é˜»æ­¢å±å¹•æ»šåŠ¨
    c.addEventListener('touchstart', start, { passive: false }); 
    document.addEventListener('touchmove', move, { passive: false }); 
    document.addEventListener('touchend', end); 
}
        function initTheme() { const t=localStorage.getItem(THEME_KEY)||'passion'; setTheme(t); }
        function setTheme(id) { 
            document.documentElement.setAttribute('data-theme',id); 
            localStorage.setItem(THEME_KEY,id); 
            renderThemeButtons(id); 
            const m={'passion':'passion','night':'night','jirai':'mesugaki','men':'men','gacha':'gacha','ladies':'ladies','wood':'normal'}; 
            const tp=m[id]||'normal'; 
            currentPersona=waifuQuotes[tp]?tp:'normal'; 
            showWaifuText(`åˆ‡æ¢åˆ°${themes.find(x=>x.id===id).name}é£æ ¼...`); 
        }
        function renderThemeButtons(id) { const c=document.getElementById('themeGroup'); c.innerHTML=''; themes.forEach(t=>{ const b=document.createElement('div'); b.className=`theme-btn ${id===t.id?'active':''}`; b.innerText=t.icon; b.title=t.name; b.onclick=()=>setTheme(t.id); c.appendChild(b); }); }
    	
        // --- å¯†ç é”å®šé€»è¾‘ ---
        const MY_PASSWORD = "123mzynt"; 

        document.getElementById('passInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        window.addEventListener('load', function() {
            setTimeout(() => {
                const input = document.getElementById('passInput');
                if(input) input.focus();
            }, 300);
        });

        function checkPassword() {
            const input = document.getElementById('passInput');
            const msg = document.getElementById('passMsg');
            const val = input.value;

            if (val === MY_PASSWORD) {
                document.getElementById('lockScreen').classList.add('unlocked');
                msg.innerText = "";
                setTimeout(() => {
                    if (typeof say === 'function') {
                        say('welcome');
                    }
                }, 500);

            } else {
                msg.innerText = "âŒ å¯†ç é”™è¯¯ï¼Œç¦æ­¢è®¿é—®ï¼";
                input.value = ""; 
                input.focus();    
                input.style.borderColor = "#d32f2f";
                setTimeout(() => input.style.borderColor = "var(--border)", 500);
            }
        }
	</script>
</body>
</html>


